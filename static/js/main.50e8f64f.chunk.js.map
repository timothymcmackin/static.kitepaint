{"version":3,"sources":["theme/colors.js","theme/media.js","theme/patterns.js","theme/A.js","theme/Text.js","theme/P.js","theme/Alert.js","theme/BlockListItem.js","theme/Button.js","theme/Dropdown.js","theme/Icon.js","theme/Error.js","utils/embedAllowed.js","utils/getAppDimensions.js","constants/environment.js","utils/getAssetUrl.js","utils/getQueryParams.js","utils/makeCancelable.js","utils/redirect.js","utils/softCompareStrings.js","theme/FillToBottom.js","theme/H1.js","theme/H2.js","theme/H3.js","theme/Input.js","theme/Label.js","theme/Loading.js","theme/utilities/BodyPortal.js","theme/Modal.js","theme/ModalClose.js","theme/ModalConfirm.js","theme/ModalPrompt.js","theme/PageLoader/dual-line.svg","theme/PageLoader/quad-line.svg","theme/PageLoader/PageLoader.js","theme/PageLoader/index.js","theme/Select.js","theme/Sidebar.js","theme/Spacer.js","theme/Tile.js","theme/TextButton.js","theme/Tooltip.js","theme/index.js","api/kitePaint/activateAccount.js","api/kitePaint/changeEmail.js","api/kitePaint/changePassword.js","api/kitePaint/checkLoginStatus.js","api/kitePaint/createAccount.js","api/kitePaint/createDesign.js","api/kitePaint/deleteAccount.js","api/kitePaint/deleteDesign.js","models/Manufacturer.js","models/Status.js","models/Product.js","models/Design.js","api/kitePaint/getDesign.js","api/kitePaint/getDesigns.js","api/kitePaint/getManufacturers.js","api/kitePaint/getProducts.js","models/User.js","api/kitePaint/getUser.js","api/kitePaint/logIn.js","api/kitePaint/logOut.js","api/kitePaint/resetPassword.js","api/kitePaint/updateDesign.js","api/KitePaintApi.js","redux/createAsyncAction.js","redux/actions.js","redux/modules/user.js","constants/embed.js","containers/UserContainer.js","components/layout/Footer.js","components/layout/Header.js","components/EmbeddedCss.js","components/ErrorPage.js","components/RestrictedRoute.js","components/LegacyRedirect.js","components/about/About.js","containers/AccountContainer.js","components/account/ChangeEmail.js","components/account/ChangePassword.js","components/account/Account.js","containers/ActivateContainer.js","components/activate/Activate.js","redux/modules/products.js","redux/modules/manufacturers.js","containers/ProductsContainer.js","components/ManufacturerLogo.js","components/create/ManufacturerShowcase.js","components/Svg.js","components/create/ProductShowcase.js","components/create/Create.js","containers/CreateNewContainer.js","containers/EditorContainer.js","components/ShareModal.js","components/DesignSettingsModal.js","containers/DesignSettingsModalContainer.js","components/editor/Toolbar.js","components/editor/ColorTile.js","components/editor/ColorableSvg.js","components/editor/Sidebar.js","components/editor/Canvas.js","components/editor/ProductNotes.js","components/createNew/CreateNew.js","redux/modules/designs.js","containers/DesignsContainer.js","components/designs/Designs.js","components/RecentDesigns.js","containers/EditContainer.js","components/edit/Edit.js","containers/RecentDesignsContainer.js","components/LogInForm.js","containers/LogInFormContainer.js","components/RegisterForm.js","containers/RegisterFormContainer.js","components/ResetPasswordForm.js","containers/ResetPasswordFormContainer.js","components/AccountForm.js","components/home/CTABanner.js","components/home/Home.js","components/home/AccountBanner.js","components/login/Login.js","containers/MyDesignsContainer.js","components/my-designs/DesignManager.js","components/my-designs/MyDesigns.js","redux/modules/users.js","containers/ViewContainer.js","components/view/Sidebar.js","components/view/View.js","components/App.js","containers/AppContainer.js","redux/modules/index.js","redux/index.js","utils/polyfill.js","index.js","components/home/bg-rev.jpg"],"names":["navy","blueLighter","blue","blueDarker","aqua","teal","olive","green","lime","yellow","orange","red","fuchsia","purple","maroon","white","gray","grayDark","grayDarker","silver","black","mediaSm","mediaMd","mediaLg","mediaXl","transparencyBackground","css","_templateObject","Object","taggedTemplateLiteral","A","styled","a","A_templateObject","_ref","theme","colors","TypographyStyles","Text_templateObject","StyledText","p","_templateObject2","props","isLight","P","children","objectWithoutProperties","react_default","createElement","Text","assign","as","success","message","window","kp_alert","type","error","AlertWrapper","div","Alert_templateObject","alertEntryAnimation","keyframes","Alert_templateObject2","StyledAlert","_templateObject3","removing","_templateObject4","_templateObject5","alertType","_templateObject6","_templateObject7","_templateObject8","Alert","state","alerts","handleIncomingAlert","alert","_alert$duration","duration","includes","currentAlerts","_this","currentTime","Date","getTime","id","concat","push","created","setState","Promise","resolve","setTimeout","find","removeAlert","console","updatedAlerts","map","prunedAlerts","filter","_this2","this","key","theme_P","React","Component","BlockListItem","BlockListItem_templateObject","StyledButton","button","Button_templateObject","Button","_ref2","isPrimary","isBlock","className","classes","join","StyleWrapper","span","Dropdown_templateObject","StyledDropdown","Dropdown_templateObject2","Item","Dropdown_templateObject3","disabled","Spacer","Dropdown_templateObject4","Dropdown","isOpen","autoClose","event","node","contains","target","close","open","document","addEventListener","removeEventListener","renderData","actions","components","ref","dropdownContent","FontAwesomeIcon","StyledError","Error_templateObject","Error","_ref3","Icon","icon","embedAllowed","whitelist","parentDomain","arguments","length","undefined","referrer","replace","split","toConsumableArray","entry","trim","getAppDimensions","height","documentElement","clientHeight","width","clientWidth","isBeta","location","hostname","isProduction","getAssetUrl","path","getQueryParams","search","substr","paramString","reduce","accumulated","parts","paramName","paramValue","decodeURIComponent","Array","isArray","makeCancelable","promise","hasCanceled_","reject","then","val","isCanceled","cancel","redirect","url","href","softCompareStrings","_len","strings","_key","match","string","index","toLowerCase","FillToBottom_templateObject","FillToBottom_templateObject2","FillToBottom","originalHeight","fillToBottom","wrapperRect","wrapper","getBoundingClientRect","distanceFromBottom","y","offset","strict","minHeight","offsetHeight","FillToBottom_StyleWrapper","defaultProps","StyledH1","H1_templateObject","StyledH2","H2_templateObject","StyledH3","H3_templateObject","Input","input","Input_templateObject","StyledLabel","Label_templateObject","animation","Loading_templateObject","Loading_templateObject2","Loading","Loading_StyleWrapper","BodyPortal","ReactDOM","createPortal","querySelector","backdropAnimation","Modal_templateObject","ModalBackdrop","Modal_templateObject2","modalAnimation","Modal_templateObject3","StyledModal","Modal_templateObject4","Modal","modalContent","onBackdropClick","Fragment","utilities_BodyPortal","onClick","ModalCloseStyle","ModalClose_templateObject","ModalClose","ModalConfirm_templateObject","ModalPrompt","handleConfirm","onConfirm","handleCancel","onCancel","data","theme_Modal","ModalConfirm_StyleWrapper","theme_Button","confirmText","cancelText","ModalPrompt_templateObject","value","handleSubmit","preventDefault","onSubmit","handleValueChange","prevProps","prevState","promptInput","focus","ModalPrompt_StyleWrapper","theme_Label","theme_Input","inputType","onChange","submitText","_path","_extends","i","source","prototype","hasOwnProperty","call","apply","_polygon","dual_line_SvgComponent","version","xmlnsXlink","x","viewBox","style","enableBackground","xmlSpace","d","__webpack_require__","quad_line_extends","quad_line_SvgComponent","points","k1Animation","PageLoader_templateObject","k2Animation","PageLoader_templateObject2","k3Animation","PageLoader_templateObject3","k4Animation","PageLoader_templateObject4","PageLoader_templateObject5","PageLoader","PageLoader_StyleWrapper","SelectWrapper","Select_templateObject","Select","Sidebar_templateObject","Sidebar_templateObject2","hasAction","isActive","Sidebar_templateObject3","Heading","Sidebar_templateObject4","Sidebar","Sidebar_StyleWrapper","sizes","xs","sm","md","lg","xl","StyledSpacer","Spacer_templateObject","top","bottom","left","right","Tile","TextButton_templateObject","Tile_templateObject","fadeIn","Tooltip_templateObject","fadeOut","Tooltip_templateObject2","Tooltip_templateObject3","fadeSpeed","TooltipIcon","Tooltip_templateObject4","TooltipText","Tooltip_templateObject5","Tooltip","renderTooltip","removingTooltip","fadeTimer","handleMouseEnter","clearTimeout","targetBounds","handleMouseLeave","fadeSpeedMs","onMouseEnter","onMouseLeave","Tooltip_StyleWrapper","isVisible","displayTooltip","Theme","media","patterns","_callee","userId","activationCode","bodyFormData","response","regenerator_default","wrap","_context","prev","next","FormData","append","axiosInstance","post","sent","activated","abrupt","stop","newEmail","changed","email","username","currentPassword","newPassword","confirmNewPassword","sessionData","parsedSessionData","localStorage","getItem","JSON","parse","_unused","keys","forEach","logged_in","setItem","stringify","registered","design","defaults","status","new","getProperties","variations","valid","password","designId","delete","Manufacturer","createModel","name","logo","website","json","computed","propTypes","PropTypes","isRequired","shape","statusProp","oneOf","Status","0","1","2","PRIVATE","UNLISTED","PUBLIC","Product","embed","notes","manufacturer","arrayOf","color","svg","Design","active","images","updated","product","user","productStatus","updatedDate","get","moment","valueOf","isPublic","isPrivate","isPrivateProduct","currentStatus","primary","bool","instanceOf","object","cache","_message","_args","_cacheable","continue","params","useCache","filterDefaults","filterWithDefaults","requestData","requestString","publicOnly","limit","order","Qs","sortIndex","note","User","loginid","return","removeItem","reset","api_KitePaintApi","KitePaintApi","classCallCheck","baseUrl","apiDomains","beta.kitepaint.com","kitepaint.com","default","_getApiDomain","config","_cache","_getUserCache","_getDesignsCache","_getProductsCache","_getManufacturersCache","baseURL","headers","Accept","Content-Type","axios","create","createClass","identifier","defaultData","relevantIndex","relevantCacheGroup","relevantCache","cacheTime","splice","_x","_x2","_activateAccount","_checkLoginStatus","_logIn","_logOut","_createAccount","_resetPassword","_changeEmail","_changePassword","_deleteAccount","_getUser","_getDesigns","_getDesign","_getProducts","_getManufacturers","designData","_createDesign","_updateDesign","_deleteDesign","createAsyncAction","actionType","request","ACTION_REQUESTED","createAction","ACTION_RECEIVED","ACTION_FAILED","asyncAction","args","dispatch","REQUESTED","payload","RECEIVED","catch","FAILED","CHECK_LOGIN","checkLoginStatus","LOG_IN","logIn","LOG_OUT","logOut","CREATE_ACCOUNT","createAccount","RESET_PASSWORD","resetPassword","CHANGE_EMAIL","changeEmail","CHANGE_PASSWORD","changePassword","DELETE_ACCOUNT","deleteAccount","SET_RECOGNIZED_USER","newValue","GET_DESIGNS","filters","getDesigns","GET_DESIGN","getDesign","GET_PRODUCTS","getProducts","GET_MANUFACTURERS","getManufacturers","GET_USER","getUser","CREATE_DESIGN","createDesign","UPDATE_DESIGN","updateDesign","DELETE_DESIGN","deleteDesign","defaultState","fromJS","actcode","firstName","isCheckingLogin","isLoggedIn","isLoggingIn","isRecognizedUser","lastName","handleActions","_handleActions","defineProperty","action","set","merge","first_name","user_id","last_name","getUserRecognition","getIn","queryParams","isEmbedded","self","e","inIframe","externalCss","defaultBackground","background","UserContainer","_React$Component","inherits","_super","UserContainer_createSuper","toggleRecognition","onSetRecognition","setRecognition","handleLogOut","onLogOut","buildRedirect","onRedirect","Redirect","to","_this$props$user","mapDispatchToProps","connect","header","Header_templateObject","Header_templateObject2","footer","Footer_templateObject","Footer","Footer_StyleWrapper","theme_A","getFullYear","EmbeddedCss","_isEmbedded","_externalCss","rel","ErrorPage_templateObject","ErrorPage","errorCode","errorMessage","ErrorPage_StyleWrapper","theme_H1","RestrictedRoute","components_ErrorPage","Route","generateObjectFromQueryParams","param","_param$split","_param$split2","slicedToArray","LegacyRedirect","LegacyRedirect_createSuper","rest","legacyPath","history","hash","possibleConstructorReturn","redirectData","relevantRedirectRule","from","rule","_legacyPath$split","_legacyPath$split2","_rule$from$split","_rule$from$split2","rulePath","ruleSearch","searchObject","ruleSearchObject","redirectTo","withRouter","About_templateObject","About","About_StyleWrapper","theme_Spacer","AccountContainer","AccountContainer_createSuper","deleteError","editingEmail","editingPassword","emailError","passwordError","handleToggleEditEmail","handleToggleEditPassword","handleEmailChange","handleCurrentPasswordChange","handleNewPasswordChange","handleConfirmNewPasswordChange","handleSubmitEmail","onEmailChange","_requests","handleSubmitPassword","onPasswordChange","handleDeleteAccount","onDeleteAccount","changeCurrentPassword","changeNewPassword","changeConfirmNewPassword","toggleEditEmail","toggleEditPassword","submitEmail","submitPassword","StyledForm","form","ChangeEmail_templateObject","ChangeEmail","editing","onChangeEmail","onToggleEdit","htmlFor","readOnly","required","theme_Error","ChangePassword_templateObject","ChangePassword","onChangeConfirmNewPassword","onChangeCurrentPassword","onChangeNewPassword","ChangePassword_StyledForm","theme_Tooltip","defaultValue","Account_templateObject","Account","Account_StyleWrapper","containers_AccountContainer","accountData","theme_Tile","account_ChangeEmail","account_ChangePassword","theme_H2","theme_ModalPrompt","modal","ActivateContainer","isPending","_cancelablePromises","cancelable","activateAccount","Activate_templateObject","Activate","Activate_StyleWrapper","ActivateContainer_ActivateContainer","activation","theme_Loading","productsById","getPublicProductsGrouped","groupBy","toList","toJS","getProductById","getProductsWithIndex","manufacturersById","sort","manA","manB","aName","bName","getManufacturerByProductId","productId","manufacturerId","getManufacturersWithIndex","ProductsContainer","ProductsContainer_createSuper","isLoading","cancelablePromises","productRequest","manufacturerRequest","all","products","manufacturers","ManufacturerLogo","ManufacturerLogo_templateObject","src","size","noMargin","ManufacturerShowcase_templateObject","HeadingWrapper","ManufacturerShowcase_templateObject2","ManufacturerShowcase","ManufacturerShowcase_StyleWrapper","components_ManufacturerLogo","theme_H3","Svg","dangerouslySetInnerHTML","__html","ProductShowcase_templateObject","ProductShowcase","ProductShowcase_StyleWrapper","Link","variation","components_Svg","Create_templateObject","Create","Create_StyleWrapper","containers_ProductsContainer","productsData","theme_PageLoader","create_ManufacturerShowcase","create_ProductShowcase","CreateNewContainer","CreateNewContainer_createSuper","onRequestProduct","onRequestManufacturer","appliedColorsShape","objectOf","generateAppliedColors","panels","DOMParser","parseFromString","querySelectorAll","appliedColors","_loop","panel","getAttribute","colorMatch","storedColor","colorName","EditorContainer","EditorContainer_createSuper","handleUndo","currentUndoDepth","undoDepth","appliedColorsHistory","stepToUndo","setIn","previousValue","handleRedo","stepToRedo","handleColorSelection","currentColor","handleVariationSelection","variationId","currentVariation","handleColorApplied","_applyColors","generateDesignVariations","render","colorMap","setAttribute","outerHTML","handleReset","handleSave","onSave","handleUpdate","onUpdate","getCurrentVariationColors","currentVariationId","handleAutofill","currentColors","objectSpread","handleChangeBackground","handleToggleHideOutlines","hideOutlines","defaultColor","defaultVariation","currentAppliedColors","hasIn","Iterable","isIterable","slice","historyEntry","unshift","pop","applyColor","autofill","changeBackground","redo","save","selectColor","selectVariation","toggleHideOutlines","undo","update","canRedo","canUndo","currentVariationColors","ShareModal_templateObject","Content","onClose","onDownloadSvg","onDownloadPng","ShareModal_StyleWrapper","theme_ModalClose","origin","theme_Dropdown","dropdownData","ShareModal","handleOpen","handleClose","handleDownloadSvg","element","encodeURIComponent","display","body","appendChild","click","removeChild","handleDownloadPng","canvas","canvg","dataUrl","toDataURL","ShareModal_Content","DesignSettingsModal_templateObject","onChangeName","onChangeStatus","onChangePrimary","statusOptions","label","DesignSettingsModal_StyleWrapper","theme_Select","option","DesignSettingsModal","handleChangeName","handleChangeStatus","handleChangePrimary","DesignSettingsModal_Content","backgroundOptions","Toolbar_templateObject","ModalWrapper","saveModal","components_ShareModal","shareModal","DesignSettingsModalContainer","designSettingsModal","Toolbar","truncationCount","actionIndex","_indexActions","item","_determineTruncationCount","truncationIndex","windowWidth","actionEdge","Toolbar_ModalWrapper","dataWrapper","content","truncatedContent","onUndo","undoDisabled","onRedo","redoDisabled","dropdown","onBackgroundChange","onHideOutlines","onAutofill","onReset","showSettings","nonTruncatedActions","truncatedActions","Toolbar_StyleWrapper","ColorTile","ColorTile_templateObject","StyledDiv","ColorableSvg_templateObject","ColorableSvg_templateObject2","ColorableSvg","originalColors","applyColors","panelId","VariationPreview","editor_Sidebar_templateObject","StyledSidebar","SidebarUI","editor_Sidebar_templateObject2","selectedVariation","selectedColor","onColorSelect","onVariationSelect","sidebar","editor_ColorableSvg","theme_FillToBottom","editor_ColorTile","Canvas_templateObject","Canvas_templateObject2","isReadOnly","Canvas","handleClick","checkWhitelist","processWhitelist","whitelistString","targetId","parentElement","parentGroupId","Canvas_StyleWrapper","ProductNotes_templateObject","ProductNotes","ProductNotes_StyleWrapper","PageLayout","CreateNew_templateObject","CreateNew","containers_CreateNewContainer","createNewData","containers_EditorContainer","editorData","containers_UserContainer","userData","editor_Toolbar","editor_Sidebar","editor_Canvas","editor_ProductNotes","designs_handleActions","designsById","deletedId","sortNewestToOldest","designA","designB","aId","bId","getRecentDesigns","count","getDesignsByUser","getDesignById","PAGE_SIZE","Counter","DesignsContainer_createSuper","updateCount","pageSize","Data","_React$Component2","_super2","_len2","_key2","hasMore","_fetchDesigns","setLoading","onFetchDesigns","loadedCount","onChangeLoadedCount","_this3","designRequest","onFetchProducts","onFetchManufacturers","responses","loadMore","designs","DataConnected","DesignsContainer","DesignsContainer_Counter","counter","Designs","RecentDesigns_templateObject","containers_DesignsContainer","EditContainer","EditContainer_createSuper","onRequestDesign","userMatchesDesign","withoutDesign","Edit_templateObject","Edit","containers_EditContainer","editData","Edit_PageLayout","RecentDesignsContainer","RecentDesignsContainer_createSuper","productsRequest","manufacturersRequest","LogInForm","isDisabled","onRegister","onResetPassword","onUsernameChange","LogInFormContainer","LogInFormContainer_createSuper","pendingRequest","handleUsernameChange","handlePasswordChange","cancelablePromise","onLogin","pendingPromises","components_LogInForm","RegisterForm","onLogIn","onPasswordConfirmationChange","passwordConfirmation","showSuccessMessage","RegisterFormContainer","RegisterFormContainer_createSuper","registrationSent","handlePasswordConfirmationChange","password2","components_RegisterForm","ResetPasswordForm","ResetPasswordFormContainer","ResetPasswordFormContainer_createSuper","resetPasswordSent","components_ResetPasswordForm","AccountForm_templateObject","AccountForm","showResetPassword","handleResetPasswordToggle","_this$props","AccountForm_StyleWrapper","containers_ResetPasswordFormContainer","handlePasswordReset","containers_LogInFormContainer","onToggleRecognition","containers_RegisterFormContainer","CTABanner_templateObject","bgRev","CTABanner","CTABanner_StyleWrapper","Home","AccountBanner_templateObject","home_CTABanner","Login_templateObject","Login","redirectAfterLogin","redirectUrl","Login_StyleWrapper","components_AccountForm","MyDesignsContainer","MyDesignsContainer_createSuper","onDeleteDesign","withoutUser","DesignManager_templateObject","DesignManager","onDelete","DesignManager_StyleWrapper","ModalConfirm","MyDesigns_templateObject","MyDesigns","MyDesigns_StyleWrapper","containers_MyDesignsContainer","userDesigns","my_designs_DesignManager","getUserById","ViewContainer","ViewContainer_createSuper","usedColors","handleBackgroundChange","promises","designPromise","onFetchDesign","onFetchUser","productColors","newState","accumulatedColors","colorValue","view_Sidebar_templateObject","view_Sidebar_templateObject2","Sidebar_StyledSidebar","Sidebar_VariationPreview","View_templateObject","View","containers_ViewContainer","viewData","View_PageLayout","view_Sidebar","App","components_EmbeddedCss","components_LegacyRedirect","Switch","components_RestrictedRoute","exact","component","layout_Footer","theme_Alert","library","add","faAngleDown","faCog","faEdit","faEllipsisH","faEraser","faExclamationCircle","faEye","faEyeSlash","faHome","faImage","faInfo","faMagic","faPalette","faPlus","faRedo","faSave","faShare","faSignOutAlt","faSpinner","faUndo","faTimes","faTrash","AppContainer","AppContainer_createSuper","BrowserRouter","styled_components_browser_esm","components_App","combineReducers","DesignsReducer","UserReducer","users","UsersReducer","ProductsReducer","ManufacturersReducer","composeEnahancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducers","applyMiddleware","thunk","NodeList","es","store","Store","containers_AppContainer","getElementById","module","exports"],"mappings":"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","file":"static/js/main.50e8f64f.chunk.js","sourcesContent":["export const navy = \"#001F3F\";\nexport const blueLighter = \"#f0fbff\";\nexport const blue = \"#0074D9\";\nexport const blueDarker = \"#005daa\";\nexport const aqua = \"#7FDBFF\";\nexport const teal = \"#39CCCC\";\nexport const olive = \"#3D9970\";\nexport const green = \"#2ECC40\";\nexport const lime = \"#01FF70\";\nexport const yellow = \"#FFDC00\";\nexport const orange = \"#FF851B\";\nexport const red = \"#FF4136\";\nexport const fuchsia = \"#F012BE\";\nexport const purple = \"#B10DC9\";\nexport const maroon = \"#85144B\";\nexport const white = \"#FFFFFF\";\nexport const gray = \"#AAAAAA\";\nexport const grayDark = \"#5e5e5e\";\nexport const grayDarker = \"#3a3a3a\";\nexport const silver = \"#DDDDDD\";\nexport const black = \"#111111\";\n","export const mediaSm = \"@media screen and (min-width: 600px)\";\nexport const mediaMd = \"@media screen and (min-width: 900px)\";\nexport const mediaLg = \"@media screen and (min-width: 1200px)\";\nexport const mediaXl = \"@media screen and (min-width: 1800px)\";\n","import { css } from \"styled-components\";\nimport { gray, grayDark } from \"./colors\";\n\n/**\n * Creates a gray checkerboad background to denote transparency.\n */\nexport const transparencyBackground = css`\n  background-image: linear-gradient(45deg, ${gray} 25%, transparent 25%),\n    linear-gradient(-45deg, ${gray} 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, ${gray} 75%),\n    linear-gradient(-45deg, transparent 75%, ${gray} 75%);\n  background-color: ${grayDark};\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n`;\n","import styled from \"styled-components\";\n\n/**\n * A styled <a> element. Passes all props directly to the <a> element.\n *\n * @param {Node} children The items to be rendered inside the <a> tag\n */\nconst A = styled.a`\n  color: ${({ theme }) => theme.colors.blue};\n  text-decoration: none;\n  margin: 0;\n  cursor: pointer;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\nexport default A;\n","import styled, { css } from \"styled-components\";\n\n/**\n * Displays styled text with the provided tag\n * @param {Boolean} isLight If set to true, the text will be lighter colored for dark backgrounds\n */\nexport const TypographyStyles = css`\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\",\n    \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  line-height: 16px;\n`;\nconst StyledText = styled.p`\n  margin: 0;\n  padding: 0;\n  ${TypographyStyles}\n\n  color: ${props =>\n    props.isLight ? props.theme.colors.silver : props.theme.colors.black};\n`;\nexport default StyledText;\n","import React from \"react\";\nimport Text from \"./Text\";\n\n/**\n * A styled <p> element.\n * This uses <Text> and passes arguments there.\n * @param {Node} children The items to render inside the <p>\n */\nconst P = ({ children, ...props }) => (\n  <Text as=\"p\" {...props}>\n    {children}\n  </Text>\n);\nexport default P;\n","/* eslint-disable no-console */\nimport React from \"react\";\nimport styled, { css, keyframes } from \"styled-components\";\nimport P from \"./P\";\n\n/**\n * Triggers a success alert to display with the provided message.\n * @param  {String} message message\n */\nexport function success(message) {\n  window.kp_alert({\n    message,\n    type: \"success\"\n  });\n}\n\n/**\n * Triggers a warning alert to display with the provided message.\n * @param  {String} message message\n */\nexport function warn(message) {\n  window.kp_alert({\n    message,\n    type: \"warning\"\n  });\n}\n\n/**\n * Triggers an error alert to display with the provided message.\n * @param  {String} message message\n */\nexport function error(message) {\n  window.kp_alert({\n    message,\n    type: \"error\"\n  });\n}\n\n/**\n * Styling for the element that contains all of the alerts.\n */\nconst AlertWrapper = styled.div`\n  position: fixed;\n  top: 7vh;\n  right: 0;\n  z-index: 1000;\n`;\n\n/** The animation used when an alert is created. */\nconst alertEntryAnimation = keyframes`\n  0% {\n    transform: translateX(120%);\n  }\n  80% {\n    transform: translateX(-5%);\n  }\n  100% {\n    transform: translateX(0);\n  }\n`;\n\n/**\n * An individual alert\n * @prop {Boolean} removing Causes the alert to animate away before being removed from the DOM\n * @prop {\"success\"|\"warning\"|\"error\"} alertType\n */\nexport const StyledAlert = styled.div`\n  padding: 8px;\n  box-sizing: border-box;\n  width: 300px;\n  position: relative;\n  max-height: 500px\n  transition: .2s max-height, .2s padding;\n  transition-delay: .2s;\n  ${props =>\n    props.removing\n      ? css`\n          max-height: 0;\n          padding: 0;\n        `\n      : null};\n\n  > div {\n    box-sizing: border-box;\n    padding: 8px 8px 8px 12px;\n    background: ${props => props.theme.colors.grayDarker};\n    border-radius: 4px;\n    width: 100%;\n    box-shadow: 0 1px 2px 0px ${props => props.theme.colors.black};\n    transition: 0.2s transform;\n    position: relative;\n    animation: ${alertEntryAnimation} .3s ease-out 1\n\n    ${props =>\n      props.removing\n        ? css`\n            transform: translateX(120%);\n          `\n        : null};\n\n    &:before {\n      display: block;\n      position: absolute;\n      content: \"\";\n      width: 4px;\n      height: 100%;\n      top: 0;\n      left: 0;\n\n      ${props =>\n        props.alertType === \"error\"\n          ? css`\n              background: ${props.theme.colors.red};\n            `\n          : null};\n      ${props =>\n        props.alertType === \"success\"\n          ? css`\n              background: ${props.theme.colors.green};\n            `\n          : null};\n      ${props =>\n        props.alertType === \"warning\"\n          ? css`\n              background: ${props.theme.colors.orange};\n            `\n          : null};\n    }\n  }\n`;\n\nclass Alert extends React.Component {\n  state = {\n    /** An array of alerts being displayed. */\n    alerts: [\n      // { Example data format\n      //   // A unique ID for this alert\n      //   id: \"abc\",\n      //   // The displayed message\n      //   message: \"boogers\",\n      //   // The type of alert (error, warning, or success)\n      //   type: \"error\",\n      //   // The time that it was created (ms)\n      //   created: 123,\n      //   // Indication if the alert is about to be removed\n      //   removing: false\n      // },\n    ]\n  };\n\n  componentDidMount() {\n    if (window.kp_alert) {\n      console.error(\n        \"More than one instance of Alert is rendered. Only one Alert should be rendered at a time.\"\n      );\n      return;\n    }\n    window.kp_alert = alert => {\n      return this.handleIncomingAlert(alert);\n    };\n  }\n\n  componentWillUnmount() {\n    delete window.kp_alert;\n  }\n\n  handleIncomingAlert = alert => {\n    const { message, type, duration = 5000 } = alert;\n    if (!message || !type) {\n      console.error(\n        \"Alert called with no message or type. A type and message must be supplied.\"\n      );\n      return;\n    }\n    if (![\"error\", \"success\", \"warning\"].includes(type)) {\n      console.error(\n        `Alert called with ${type} as type. Only \"error\", \"success\", and \"warning\" are accepted.`\n      );\n      return;\n    }\n\n    // Create the alert and store it on the state with the others\n    const currentAlerts = this.state.alerts;\n    const currentTime = new Date().getTime();\n    const id = `${currentTime}${type}${message}`;\n    currentAlerts.push({\n      message,\n      type,\n      created: currentTime,\n      id,\n      removing: false\n    });\n    this.setState({\n      alerts: currentAlerts\n    });\n\n    // Wait the specified duration to remove the alert\n    return new Promise(resolve => {\n      window.setTimeout(() => {\n        // Only remove the alert if it still exists\n        if (this.state.alerts.find(alert => alert.id === id)) {\n          this.removeAlert(id);\n        }\n        resolve();\n      }, duration);\n    });\n  };\n\n  removeAlert = id => {\n    // Indicate on the alert that it will be removed soon\n    const updatedAlerts = this.state.alerts.map(alert => {\n      if (alert.id === id) {\n        alert.removing = true;\n      }\n      return alert;\n    });\n    this.setState({\n      alerts: updatedAlerts\n    });\n\n    // Give the alert time to animate out before removing it from the DOM\n    window.setTimeout(() => {\n      const prunedAlerts = this.state.alerts.filter(alert => alert.id !== id);\n      this.setState({\n        alerts: prunedAlerts\n      });\n    }, 1000);\n  };\n\n  render() {\n    return (\n      <AlertWrapper>\n        {this.state.alerts.map(alert => (\n          <StyledAlert\n            alertType={alert.type}\n            removing={alert.removing}\n            key={alert.id}\n          >\n            <div>\n              <P isLight>{alert.message}</P>\n            </div>\n          </StyledAlert>\n        ))}\n      </AlertWrapper>\n    );\n  }\n}\n\nexport default Alert;\n","import styled from \"styled-components\";\nimport { TypographyStyles } from \"./Text\";\n\nconst BlockListItem = styled.div`\n  ${TypographyStyles};\n  display: block;\n  border-bottom: 1px solid\n    ${props =>\n      props.isLight ? props.theme.colors.grayDark : props.theme.colors.gray};\n  color: ${props =>\n    props.isLight ? props.theme.colors.silver : props.theme.colors.black};\n  white-space: nowrap;\n  padding: 8px;\n  text-decoration: none;\n  transition: 0.2s background;\n`;\n\nexport default BlockListItem;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { TypographyStyles } from \"./Text\";\n\nconst StyledButton = styled.button`\n  ${TypographyStyles};\n  background: linear-gradient(\n    -45deg,\n    ${props => props.theme.colors.silver},\n    ${props => props.theme.colors.silver},\n    ${props => props.theme.colors.gray},\n    ${props => props.theme.colors.gray}\n  );\n  background-size: 400% 400%;\n  background-position: 100% 50%;\n  border-radius: 4px;\n  border: 0;\n  padding: 4px 8px;\n  margin: 8px 0;\n  cursor: pointer;\n  transition: 0.6s background;\n  box-sizing: border-box;\n  outline: none;\n  text-decoration: none;\n  text-align: center;\n  color: ${props => props.theme.colors.black};\n\n  &:hover {\n    background-position: 0% 50%;\n  }\n  &.is-primary {\n    background-image: linear-gradient(\n      -45deg,\n      ${props => props.theme.colors.blue},\n      ${props => props.theme.colors.blue},\n      ${props => props.theme.colors.blueDarker},\n      ${props => props.theme.colors.blueDarker}\n    );\n    color: ${({ theme }) => theme.colors.silver};\n  }\n  &.is-block {\n    display: block;\n    width: 100%;\n  }\n  &[disabled] {\n    opacity: 0.5;\n    box-shadow: none;\n    cursor: not-allowed;\n  }\n`;\n\nconst Button = ({ isPrimary, isBlock, children, className, ...props }) => {\n  const classes = className ? [className] : [];\n  if (isPrimary) {\n    classes.push(\"is-primary\");\n  }\n  if (isBlock) {\n    classes.push(\"is-block\");\n  }\n  return (\n    <StyledButton className={classes.join(\" \")} {...props}>\n      {children}\n    </StyledButton>\n  );\n};\nexport default Button;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { TypographyStyles } from \"./Text\";\n\nconst StyleWrapper = styled.span`\n  position: relative;\n`;\n\n/**\n * Applies styles to the dropdown itself\n */\nexport const StyledDropdown = styled.span`\n  position: absolute;\n  top: calc(100% + 4px);\n  right: 0;\n  background: ${props => props.theme.colors.white};\n  border-radius: 4px;\n  border: 1px solid ${props => props.theme.colors.gray};\n  text-align: right;\n  box-shadow: 0px 2px 2px -1px ${props => props.theme.colors.grayDarker};\n`;\n\n/**\n * A component for a styled dropdown item.\n */\nexport const Item = styled.a`\n  ${TypographyStyles};\n  display: block;\n  text-decoration: none;\n  white-space: nowrap;\n  padding: 4px 8px;\n  font-size: 14px;\n  color: ${props =>\n    props.disabled ? props.theme.colors.gray : props.theme.colors.black};\n  transition: 0.2s;\n  cursor: ${props => (props.disabled ? \"default\" : \"pointer\")};\n\n  ${props =>\n    !props.disabled &&\n    `&:hover {\n      background: ${props.theme.colors.silver};\n    }`};\n`;\n\n/**\n * A component for a styled spacer to separate dropdown items.\n */\nexport const Spacer = styled.div`\n  border-bottom: 1px solid ${props => props.theme.colors.gray};\n  margin: 4px 0;\n`;\n\n/**\n * Wraps the provided children in a ralative container and allows for opening and closing an\n * absolutely positionined dropdown.\n *\n * Example:\n * ```\n * <Dropdown\n *   dropdownContent={dropdownData => <a onClick={dropdownData.actions.close}>Close</a>}\n * >\n *   {dropdownData => <a onClick={dropdownData.actions.open}>Open</a>}\n * </Dropdown>\n * ```\n */\nclass Dropdown extends React.Component {\n  static propTypes = {\n    /**\n     * The persistent content that the dropdown is bound to.\n     */\n    children: PropTypes.func.isRequired,\n    /**\n     * The contents of the dropdown\n     */\n    dropdownContent: PropTypes.func.isRequired\n  };\n  state = {\n    /**\n     * Indicates if the dropdown is open or not\n     */\n    isOpen: false\n  };\n\n  /**\n   * Based on the provided event, close the dropdown if the event happened outside this component.\n   * This enables the dropdown to automatically close when clicking outside of it.\n   * @param {Object} event A DOM click event\n   */\n  autoClose = event => {\n    if (!this.state.isOpen) {\n      return;\n    }\n    if (this.node.contains(event.target)) {\n      return;\n    }\n    this.close();\n  };\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.autoClose);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.autoClose);\n  }\n\n  /**\n   * Opens the dropdown\n   */\n  open = () => {\n    this.setState({\n      isOpen: true\n    });\n  };\n\n  /**\n   * Closes the dropdown\n   */\n  close = () => {\n    this.setState({\n      isOpen: false\n    });\n  };\n\n  render() {\n    const renderData = {\n      actions: {\n        open: this.open,\n        close: this.close\n      },\n      props: {\n        isOpen: this.state.isOpen\n      },\n      components: {\n        Item,\n        Spacer\n      }\n    };\n    return (\n      <StyleWrapper ref={node => (this.node = node)}>\n        {this.props.children(renderData)}\n        {this.state.isOpen && (\n          <StyledDropdown>\n            {this.props.dropdownContent(renderData)}\n          </StyledDropdown>\n        )}\n      </StyleWrapper>\n    );\n  }\n}\n\nexport default Dropdown;\n","import { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faAngleDown,\n  faCog,\n  faEdit,\n  faEllipsisH,\n  faEraser,\n  faExclamationCircle,\n  faEye,\n  faEyeSlash,\n  faHome,\n  faImage,\n  faInfo,\n  faMagic,\n  faPalette,\n  faPlus,\n  faRedo,\n  faSave,\n  faShare,\n  faSignOutAlt,\n  faSpinner,\n  faUndo,\n  faTimes,\n  faTrash\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport function setupFontAwesome() {\n  library.add(\n    faAngleDown,\n    faCog,\n    faEdit,\n    faEllipsisH,\n    faEraser,\n    faExclamationCircle,\n    faEye,\n    faEyeSlash,\n    faHome,\n    faImage,\n    faInfo,\n    faMagic,\n    faPalette,\n    faPlus,\n    faRedo,\n    faSave,\n    faShare,\n    faSignOutAlt,\n    faSpinner,\n    faUndo,\n    faTimes,\n    faTrash\n  );\n}\n\nexport default FontAwesomeIcon;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Icon from \"./Icon\";\n\nconst StyledError = styled.div`\n  color: ${({ theme }) => theme.colors.red};\n  border: 1px solid ${({ theme }) => theme.colors.red};\n  padding: 4px;\n  margin: 0 0 8px;\n  border-radius: 4px;\n  display: flex;\n\n  > .error-icon {\n    padding: 1px 4px 0 0;\n  }\n`;\n\n/**\n * Displays an error box that can house any type of content.\n */\nconst Error = ({ children, ...props }) => (\n  <StyledError {...props}>\n    <Icon className=\"error-icon\" icon=\"exclamation-circle\" />\n    <div>{children}</div>\n  </StyledError>\n);\n\nexport default Error;\n","export default function embedAllowed(whitelist, _referrer = document.referrer) {\n  const parentDomain = _referrer\n    .replace(/http(s)?:\\/\\//, \"\")\n    .split(\"/\")[0]\n    .split(\":\")[0];\n  const embedWhiteList = [\"localhost\", ...whitelist].map(entry => entry.trim());\n  return embedWhiteList.includes(parentDomain);\n}\n","/**\n * A mockable method for getting the dimeions of the application.\n */\nexport default function getAppDimensions() {\n  return {\n    height: document.documentElement.clientHeight,\n    width: document.documentElement.clientWidth\n  };\n}\n","export const isBeta = window.location.hostname === \"beta.kitepaint.com\";\nexport const isProduction = window.location.hostname === \"kitepaint.com\";\n","import { isBeta, isProduction } from \"../constants/environment\";\n\n/**\n * Builds the correct asset url depending on the current environment.\n * @param {String} path An absolute asset path e.g. \"/my-image.png\"\n */\nexport default function getAssetUrl(path) {\n  if (isBeta) {\n    return `//static.beta.kitepaint.com${path}`;\n  }\n  if (isProduction) {\n    return `//static.kitepaint.com${path}`;\n  }\n  return path;\n}\n","/**\n * Retrieves the query params from the URL.\n * Duplicate params will be collected as an array of the values.\n * @return {Object}\n */\nexport default function getQueryParams() {\n  // Get the params separated into an array where each item looks like \"foo=bar\"\n  const paramStrings = window.location.search\n    .substr(1)\n    .split(\"&\")\n    .filter(paramString => !!paramString);\n\n  // Reduce the paramStrings into a POJO\n  return paramStrings.reduce((accumulated, paramString) => {\n    const parts = paramString.split(\"=\");\n    const paramName = parts[0];\n    const paramValue = decodeURIComponent(parts[1]);\n\n    // If we haven't handled this param yet, add it to the accumulated object\n    if (!accumulated[paramName]) {\n      accumulated[paramName] = paramValue;\n      return accumulated;\n    }\n\n    // If we have handled this param, and it is an array, add this value to the array\n    if (Array.isArray(accumulated[paramName])) {\n      accumulated[paramName].push(paramValue);\n      return accumulated;\n    }\n\n    // If we have handled this param, and it is not an array, make an array with both values\n    accumulated[paramName] = [accumulated[paramName], paramValue];\n    return accumulated;\n  }, {});\n}\n","/**\n * Makes a promise cancelable\n */\nconst makeCancelable = promise => {\n  let hasCanceled_ = false;\n\n  const wrappedPromise = new Promise((resolve, reject) => {\n    promise.then(\n      val => (hasCanceled_ ? reject({ isCanceled: true }) : resolve(val)),\n      error => (hasCanceled_ ? reject({ isCanceled: true }) : reject(error))\n    );\n  });\n\n  return {\n    promise: wrappedPromise,\n    cancel() {\n      hasCanceled_ = true;\n    }\n  };\n};\n\nexport default makeCancelable;\n","export default function redirect(url) {\n  window.location.href = url;\n}\n","/**\n * Compares strings discounting leading/trailing white space and case sensitivity\n * @param  {String} ...strings\n * @return {Boolean} is true if all strings provided match\n */\nfunction softCompareStrings(...strings) {\n  let match = true;\n  strings.find((string, index) => {\n    if (!index) {\n      return false;\n    }\n    const prevString = strings[index - 1];\n    if (prevString.trim().toLowerCase() !== string.trim().toLowerCase()) {\n      match = false;\n      return true;\n    }\n    return false;\n  });\n  return match;\n}\n\nexport default softCompareStrings;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { css } from \"styled-components\";\nimport { getAppDimensions } from \"../utils\";\n\n/**\n * A style wrapper that just uses the provided height.\n */\nexport const StyleWrapper = styled.div`\n  overflow: auto;\n  ${props =>\n    props.height || props.height === 0\n      ? css`\n          height: ${props.height}px;\n        `\n      : null};\n`;\n\n/**\n * A div whose position and size is evaluated, and the div's height is increased to fill to the\n * bottom of the screen.\n *\n * The sizing is only reevaluated on window resize. Do not use this for elements that are expected\n * to move vertically (below accordion menus, delayed loading content, etc).\n */\nclass FillToBottom extends React.Component {\n  static propTypes = {\n    /**\n     * An offset to adjust the height of the fill-to-bottom. This can be used to take into account\n     * content that is below the fill-to-bottom that we want to make room for. A value of 5 will\n     * make the FillToBottom extend down until it is 5px away from the edge of the screen.\n     */\n    offset: PropTypes.number.isRequired,\n    /**\n     * If set to true, fill-to-bottom will make itself smaller if necessary, to stay at the bottom\n     * of the screen.\n     * If false, fill-to-bottom will only make the element larger, not smaller.\n     * @type {[type]}\n     */\n    strict: PropTypes.bool.isRequired,\n    /**\n     * The minimum height (px) that the element can be.\n     */\n    minHeight: PropTypes.number.isRequired,\n    children: PropTypes.node\n  };\n  static defaultProps = {\n    offset: 0,\n    strict: false,\n    minHeight: 0\n  };\n  state = {\n    height: null\n  };\n\n  /**\n   * The original height of the wrapper is stored after mounting so that we can reevaluate the\n   * height after window resizes while maintaining consistent resizing logic.\n   */\n  originalHeight = 0;\n\n  componentDidMount() {\n    this.originalHeight = this.wrapper.offsetHeight;\n    this.fillToBottom();\n    window.addEventListener(\"resize\", this.fillToBottom);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.fillToBottom);\n  }\n\n  /**\n   * Evaluates the wrapper and sets the state with the desired height.\n   */\n  fillToBottom = () => {\n    const wrapperRect = this.wrapper.getBoundingClientRect();\n    const distanceFromBottom =\n      getAppDimensions().height -\n      wrapperRect.y -\n      this.originalHeight -\n      this.props.offset;\n\n    // If we are not being strict, we want to return early if distanceFromBottom is negative because\n    // that would make the element smaller.\n    if (distanceFromBottom < 0 && !this.props.strict) {\n      return;\n    }\n\n    // Get the desired height\n    const height = this.originalHeight + distanceFromBottom;\n\n    // If the element's height is lower than the provided minHeight, use the minHeight instead.\n    if (height < this.props.minHeight) {\n      this.setState({ height: this.props.minHeight });\n      return;\n    }\n\n    // Apply the desired height\n    this.setState({ height });\n  };\n\n  render() {\n    return (\n      <StyleWrapper\n        height={this.state.height}\n        ref={wrapper => (this.wrapper = wrapper)}\n      >\n        {this.props.children}\n      </StyleWrapper>\n    );\n  }\n}\n\nexport default FillToBottom;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Text from \"./Text\";\n\n/**\n * A styled <h1> element.\n * This uses <Text> and passes arguments there.\n * @param {Node} children The items to render inside the <h1>\n */\nconst H1 = ({ children, ...props }) => (\n  <Text as=\"h1\" {...props}>\n    {children}\n  </Text>\n);\nconst StyledH1 = styled(H1)`\n  font-size: 32px;\n  line-height: 32px;\n`;\nexport default StyledH1;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Text from \"./Text\";\n\n/**\n * A styled <h2> element.\n * This uses <Text> and passes arguments there.\n * @param {Node} children The items to render inside the <h2>\n */\nconst H2 = ({ children, ...props }) => (\n  <Text as=\"h2\" {...props}>\n    {children}\n  </Text>\n);\nconst StyledH2 = styled(H2)`\n  font-size: 24px;\n  line-height: 24px;\n`;\nexport default StyledH2;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Text from \"./Text\";\n\n/**\n * A styled <h3> element.\n * This uses <Text> and passes arguments there.\n * @param {Node} children The items to render inside the <h3>\n */\nconst H3 = ({ children, ...props }) => (\n  <Text as=\"h3\" {...props}>\n    {children}\n  </Text>\n);\nconst StyledH3 = styled(H3)`\n  font-size: 18px;\n  line-height: 24px;\n`;\nexport default StyledH3;\n","import styled from \"styled-components\";\nimport { TypographyStyles } from \"./Text\";\n\nconst Input = styled.input`\n  ${TypographyStyles} display: block;\n  width: 100%;\n  padding: 4px;\n  border-radius: 4px;\n  border: 1px solid ${({ theme }) => theme.colors.gray};\n  box-sizing: border-box;\n  outline: none;\n\n  &[readOnly] {\n    background: ${props => props.theme.colors.silver};\n  }\n  &:focus {\n    box-shadow: 0 0 3px ${props => props.theme.colors.blue};\n  }\n`;\n\nexport default Input;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Text from \"./Text\";\n\n/**\n * A styled <label> element.\n * This uses <Text> and passes arguments there.\n * @param {Node} children The items to render inside the <label>\n */\nconst Label = ({ children, ...props }) => (\n  <Text as=\"label\" {...props}>\n    {children}\n  </Text>\n);\nconst StyledLabel = styled(Label)`\n  margin: 8px 0 4px;\n  display: block;\n  font-weight: 600;\n`;\nexport default StyledLabel;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport Icon from \"./Icon\";\nimport Text from \"./Text\";\n\nconst animation = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`;\nconst StyleWrapper = styled.div`\n  text-align: center;\n\n  .spinner {\n    display: inline-block;\n    animation: ${animation} 1s infinite linear;\n  }\n`;\nconst Loading = () => (\n  <StyleWrapper>\n    <Icon icon=\"spinner\" className=\"spinner\" />{\" \"}\n    <Text as=\"span\">Loading...</Text>\n  </StyleWrapper>\n);\n\nexport default Loading;\n","import ReactDOM from \"react-dom\";\n\n/**\n * Body portal creates a ReactDOM portal to send the provided content to the end of the <body>\n * element.\n */\nconst BodyPortal = ({ children }) => {\n  return ReactDOM.createPortal(children, document.querySelector(\"body\"));\n};\n\nexport default BodyPortal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { keyframes } from \"styled-components\";\nimport BodyPortal from \"./utilities/BodyPortal\";\n\nconst backdropAnimation = keyframes`\n  0% {\n    background-position: 0% 0%;\n  },\n  100% {\n    background-position: 100% 100%;\n  }\n`;\n\n/**\n * Styling for the modal's backdrop\n */\nconst ModalBackdrop = styled.div`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: linear-gradient(-45deg, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0));\n  background-size: 400% 400%;\n  background-position: 100% 100%;\n  z-index: 100;\n  animation: ${backdropAnimation} 0.6s;\n`;\n\nconst modalAnimation = keyframes`\n  0% {\n    opacity: 0\n  }\n\n  15% {\n    opacity: 0\n  }\n\n  100% {\n    opacity: 1\n  }\n`;\n\n/**\n * Styling for the modal window itself\n */\nexport const StyledModal = styled.div`\n  position: fixed;\n  top: 50px;\n  left: 50%;\n  transform: translateX(-50%);\n  max-width: 300px;\n  background: ${props => props.theme.colors.white};\n  z-index: 100;\n  padding: 16px;\n  border: 1px solid ${props => props.theme.colors.gray};\n  border-radius: 4px;\n  animation: ${modalAnimation} 0.8s;\n`;\n\nconst Modal = ({ children, isOpen, modalContent, onBackdropClick }) => (\n  <React.Fragment>\n    {children}\n    {isOpen && (\n      <BodyPortal>\n        <ModalBackdrop onClick={onBackdropClick} className=\"testing_backdrop\" />\n        <StyledModal className=\"testing_modal\">{modalContent}</StyledModal>\n      </BodyPortal>\n    )}\n  </React.Fragment>\n);\n\nModal.defaultProps = {\n  onBackdropClick() {}\n};\n\nModal.propTypes = {\n  children: PropTypes.node,\n  isOpen: PropTypes.bool,\n  modalContent: PropTypes.node,\n  onBackdropClick: PropTypes.func\n};\n\nexport default Modal;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Icon from \"./Icon\";\n\n/**\n * A component used as a close button in the upper right corner of a modal.\n */\nconst ModalCloseStyle = styled(Icon)`\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  cursor: pointer;\n`;\n\nconst ModalClose = props => <ModalCloseStyle icon=\"times\" {...props} />;\nexport default ModalClose;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport Button from \"./Button\";\nimport Modal from \"./Modal\";\nimport P from \"./P\";\n\n/**\n * Styling for the modal window itself\n */\nexport const StyleWrapper = styled.div`\n  .buttons {\n    display: flex;\n\n    button {\n      flex-grow: 1;\n      margin: 8px 8px 0;\n    }\n  }\n`;\n\n/**\n * Modal prompt prompts the user for a single string value and has submit and cancel buttons.\n */\nclass ModalPrompt extends React.Component {\n  static propTypes = {\n    /**\n     * Triggered when the user confirms.\n     */\n    onConfirm: PropTypes.func.isRequired,\n    /**\n     * Triggered when the cancel button is pressed, or when the backdrop is clicked on.\n     */\n    onCancel: PropTypes.func,\n    /**\n     * A message to pose to the user.\n     */\n    message: PropTypes.string.isRequired,\n    /**\n     * The text to display on the confirm button.\n     */\n    confirmText: PropTypes.string,\n    /**\n     * The text to display on the cancel button.\n     */\n    cancelText: PropTypes.string,\n    /**\n     * A function that renders content that can trigger the modal.\n     */\n    children: PropTypes.func.isRequired\n  };\n\n  static defaultProps = {\n    confirmText: \"Confirm\",\n    cancelText: \"Cancel\",\n    onCancel: () => {}\n  };\n\n  state = {\n    /**\n     * Is the modal currently open?\n     */\n    isOpen: false\n  };\n\n  /**\n   * Handles when the confirm button is pressed.\n   */\n  handleConfirm = () => {\n    this.setState({ isOpen: false });\n    this.props.onConfirm();\n  };\n\n  /**\n   * Handles the cancelation by closing/resetting the modal and triggering onCancel.\n   */\n  handleCancel = () => {\n    this.setState({ isOpen: false });\n    this.props.onCancel();\n  };\n\n  render() {\n    const data = {\n      actions: {\n        open: () => this.setState({ isOpen: true })\n      },\n      props: {\n        isOpen: this.state.isOpen\n      }\n    };\n    return (\n      <Modal\n        isOpen={this.state.isOpen}\n        onBackdropClick={this.handleCancel}\n        modalContent={\n          <StyleWrapper>\n            <P>{this.props.message}</P>\n            <div className=\"buttons\">\n              <Button\n                isPrimary\n                className=\"testing_confirm\"\n                onClick={this.handleConfirm}\n              >\n                {this.props.confirmText}\n              </Button>{\" \"}\n              <Button\n                className=\"testing_cancel\"\n                type=\"button\"\n                onClick={this.handleCancel}\n              >\n                {this.props.cancelText}\n              </Button>\n            </div>\n          </StyleWrapper>\n        }\n      >\n        {this.props.children(data)}\n      </Modal>\n    );\n  }\n}\n\nexport default ModalPrompt;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport Label from \"./Label\";\nimport Input from \"./Input\";\nimport Button from \"./Button\";\nimport Modal from \"./Modal\";\n\n/**\n * Styling for the modal window itself\n */\nexport const StyleWrapper = styled.div`\n  .buttons {\n    display: flex;\n\n    button {\n      flex-grow: 1;\n      margin: 8px 8px 0;\n    }\n  }\n`;\n\n/**\n * Modal prompt prompts the user for a single string value and has submit and cancel buttons.\n */\nclass ModalPrompt extends React.Component {\n  static propTypes = {\n    /**\n     * Triggered when the prompt has been submitted. Is provided the user-provided string value as\n     * the first parameter.\n     */\n    onSubmit: PropTypes.func.isRequired,\n    /**\n     * Triggerd when the cancel button is pressed, or when the backdrop is clicked on.\n     */\n    onCancel: PropTypes.func,\n    /**\n     * A message to pose to the user to guide them on what value should be entered.\n     */\n    message: PropTypes.string.isRequired,\n    /**\n     * The text to display on the submit button.\n     */\n    submitText: PropTypes.string,\n    /**\n     * The text to display on the cancel button.\n     */\n    cancelText: PropTypes.string,\n    /**\n     * A function that renders content that can trigger the modal.\n     */\n    children: PropTypes.func.isRequired,\n    /**\n     * The value for the type attribute on the input.\n     */\n    inputType: PropTypes.oneOf([\"text\", \"number\", \"password\", \"email\"])\n  };\n\n  static defaultProps = {\n    submitText: \"Submit\",\n    cancelText: \"Cancel\",\n    inputType: \"text\",\n    onCancel: () => {}\n  };\n\n  state = {\n    /**\n     * Is the modal currently open?\n     */\n    isOpen: false,\n    /**\n     * What is the user provided value?\n     */\n    value: \"\"\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    // Auto focus the input when the modal opens\n    if (!prevState.isOpen && this.state.isOpen && this.promptInput) {\n      this.promptInput.focus();\n    }\n  }\n\n  /**\n   * Handles the submission event by calling onSubmit with the value and closing/resetting the\n   * modal. This does not call onSubmit if the value is empty.\n   * @param  {Object} event A DOM submit event\n   */\n  handleSubmit = event => {\n    event.preventDefault();\n    if (!this.state.value) {\n      return;\n    }\n    this.props.onSubmit(this.state.value);\n    this.setState({ isOpen: false, value: \"\" });\n  };\n\n  /**\n   * Handles the cancelation by closing/resetting the modal and triggering onCancel.\n   */\n  handleCancel = () => {\n    this.setState({ isOpen: false, value: \"\" });\n    this.props.onCancel();\n  };\n\n  /**\n   * Handles a change in the provided value by updating state.\n   * @param  {Object} event A DOM change event\n   */\n  handleValueChange = event => {\n    this.setState({ value: event.target.value });\n  };\n\n  render() {\n    const data = {\n      actions: {\n        open: () => this.setState({ isOpen: true })\n      },\n      props: {\n        isOpen: this.state.isOpen\n      }\n    };\n    return (\n      <Modal\n        isOpen={this.state.isOpen}\n        onBackdropClick={this.handleCancel}\n        modalContent={\n          <StyleWrapper className=\"testing_modal\">\n            <form onSubmit={this.handleSubmit} className=\"testing_submit\">\n              <Label>{this.props.message}</Label>\n              <Input\n                type={this.props.inputType}\n                ref={input => (this.promptInput = input)}\n                className=\"testing_prompt-value\"\n                value={this.state.value}\n                onChange={this.handleValueChange}\n              />\n              <div className=\"buttons\">\n                <Button type=\"submit\" isPrimary>\n                  {this.props.submitText}\n                </Button>{\" \"}\n                <Button\n                  type=\"button\"\n                  className=\"testing_cancel\"\n                  onClick={this.handleCancel}\n                >\n                  {this.props.cancelText}\n                </Button>\n              </div>\n            </form>\n          </StyleWrapper>\n        }\n      >\n        {this.props.children(data)}\n      </Modal>\n    );\n  }\n}\n\nexport default ModalPrompt;\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar SvgComponent = function SvgComponent(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    version: 1.1,\n    id: \"Layer_1\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 909.6 340.42\",\n    style: {\n      \"enableBackground\": \"new 0 0 909.6 340.42\"\n    },\n    xmlSpace: \"preserve\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.96,336.19c-0.78,0.69-2.96,1.68-1.41,3.43c1.55,1.74,4.26-0.22,4.26-0.22s172.42-113.07,290.41-107.24 c117.99,5.83,144.29,99.69,144.29,99.69c0.76,2.17,2.25,2.35,2.25,2.35l6.46,0.12c2.32-0.22,2.63-2.5,2.63-2.5 s36.68-91.49,132.9-94.44c113.67-3.49,321.78,101.26,321.78,101.26c2.26,1.79,2.77,2.11,4.08,0.83c1.32-1.28-1.17-4.2-1.17-4.2 L460.32,6.54c-16.43-15.5-36.21,1.39-36.21,1.39C361.64,52.04,2.73,335.5,1.96,336.19z\"\n  })));\n};\n\nexport default __webpack_public_path__ + \"static/media/dual-line.ba70883a.svg\";\nexport { SvgComponent as ReactComponent };","var _polygon;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar SvgComponent = function SvgComponent(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    version: 1.1,\n    id: \"Layer_1\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 1929.27 631.64\",\n    style: {\n      \"enableBackground\": \"new 0 0 1929.27 631.64\"\n    },\n    xmlSpace: \"preserve\"\n  }, props), _polygon || (_polygon = /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"251.3,621.31 963.98,196.48 1676.91,621.31 1929.27,24.37 1587.84,13.43 1532.03,12.18 964.64,6.31 397.26,12.44 341.45,13.59 42.66,22.63 0,23.92 \"\n  })));\n};\n\nexport default __webpack_public_path__ + \"static/media/quad-line.e47a29cb.svg\";\nexport { SvgComponent as ReactComponent };","import React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport { ReactComponent as DualLine } from \"./dual-line.svg\";\nimport { ReactComponent as QuadLine } from \"./quad-line.svg\";\n\nconst k1Animation = keyframes`\n  0% {\n    transform: translate3d(0, 0, 0) rotate(180deg);\n  }\n  48% {\n    transform: translate3d(0, 145px, 0) rotate(180deg);\n  }\n  52% {\n    transform: translate3d(0, 145px, 0) rotate(90deg);\n  }\n  96% {\n    transform: translate3d(145px, 145px, 0) rotate(90deg);\n  }\n  100% {\n    transform: translate3d(145px, 145px, 0) rotate(0deg);\n  }\n`;\nconst k2Animation = keyframes`\n  0% {\n    transform: translate3d(0, 0, 0) rotate(270deg);\n  }\n  48% {\n    transform: translate3d(-145px, 0, 0) rotate(270deg);\n  }\n  52% {\n    transform: translate3d(-145px, 0, 0) rotate(180deg);\n  }\n  96% {\n    transform: translate3d(-145px, 145px, 0) rotate(180deg);\n  }\n  100% {\n    transform: translate3d(-145px, 145px, 0) rotate(90deg);\n  }\n`;\nconst k3Animation = keyframes`\n  0% {\n    transform: translate3d(0, 0, 0) rotate(0deg);\n  }\n  48% {\n    transform: translate3d(0, -145px, 0) rotate(0deg);\n  }\n  52% {\n    transform: translate3d(0, -145px, 0) rotate(-90deg);\n  }\n  96% {\n    transform: translate3d(-145px, -145px, 0) rotate(-90deg);\n  }\n  100% {\n    transform: translate3d(-145px, -145px, 0) rotate(-180deg);\n  }\n`;\nconst k4Animation = keyframes`\n  0% {\n    transform: translate3d(0, 0, 0) rotate(90deg);\n  }\n  48% {\n    transform: translate3d(145px, 0, 0) rotate(90deg);\n  }\n  52% {\n    transform: translate3d(145px, 0, 0) rotate(0deg);\n  }\n  96% {\n    transform: translate3d(145px, -145px, 0) rotate(0deg);\n  }\n  100% {\n    transform: translate3d(145px, -145px, 0) rotate(-90deg);\n  }\n`;\n\nconst StyleWrapper = styled.div`\n  width: 200px;\n  height: 200px;\n  position: relative;\n  margin: 32px auto;\n\n  svg {\n    width: 20%;\n    height: 20%;\n  }\n\n  .k1 {\n    position: absolute;\n    top: 8px;\n    left: 8px;\n    transform: rotate(180deg);\n    animation: ${k1Animation} 3s infinite linear;\n  }\n  .k2 {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    transform: rotate(270deg);\n    animation: ${k2Animation} 3s infinite linear;\n  }\n  .k3 {\n    position: absolute;\n    bottom: 8px;\n    right: 8px;\n    animation: ${k3Animation} 3s infinite linear;\n  }\n  .k4 {\n    position: absolute;\n    bottom: 8px;\n    left: 8px;\n    transform: rotate(90deg);\n    animation: ${k4Animation} 3s infinite linear;\n  }\n`;\n\nconst PageLoader = () => (\n  <StyleWrapper>\n    <DualLine className=\"k1\" />\n    <QuadLine className=\"k2\" />\n    <DualLine className=\"k3\" />\n    <QuadLine className=\"k4\" />\n  </StyleWrapper>\n);\n\nexport default PageLoader;\n","import PageLoader from \"./PageLoader\";\nexport default PageLoader;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport { TypographyStyles } from \"./Text\";\n\nexport const SelectWrapper = styled.div`\n  ${TypographyStyles};\n  position: relative;\n\n  select {\n    appearance: none;\n    display: block;\n    background: transparent;\n    width: 100%;\n    padding: 4px;\n    border-radius: 4px;\n    border: 1px solid ${({ theme }) => theme.colors.gray};\n    box-sizing: border-box;\n    outline: none;\n  }\n  &:after {\n    content: \"\";\n    display: block;\n    border-right: 1px solid ${props => props.theme.colors.black};\n    border-bottom: 1px solid ${props => props.theme.colors.black};\n    transform: rotate(45deg);\n    width: 8px;\n    height: 8px;\n    position: absolute;\n    top: 8px;\n    right: 8px;\n  }\n`;\n\nconst Select = ({ children, ...props }) => (\n  <SelectWrapper>\n    <select {...props}>{children}</select>\n  </SelectWrapper>\n);\n\nSelect.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport default Select;\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport BlockListItem from \"./BlockListItem\";\n\n/**\n * An overall wrapper for the sidebar\n */\nexport const StyleWrapper = styled.div`\n  width: 175px;\n  display: block;\n  flex-shrink: 0;\n  background: ${props => props.theme.colors.grayDarker};\n  box-shadow: 0 0 2px 2px ${props => props.theme.colors.black};\n  position: relative;\n`;\n\n/**\n * An individual, possibly selectable, item that appreas in the sidebar.\n *\n * @param {Boolean} hasAction indicates that the item is actionable. Adds a hover state\n * @param {Boolean} isActive indicates that the item is active.\n */\nexport const Item = styled(BlockListItem)`\n  display: flex;\n  align-items: center;\n  cursor: ${props => (props.hasAction ? \"pointer\" : \"default\")};\n  transition: 0.3s background;\n  position: relative;\n\n  &:after {\n    content: \"\";\n    display: block;\n    position: absolute;\n    height: 100%;\n    width: ${props => (props.isActive ? 8 : 0)}px;\n    background: ${props => props.theme.colors.silver};\n    top: 0;\n    right: 0;\n    transition: 0.3s width;\n  }\n  ${props =>\n    props.hasAction\n      ? css`\n          &:hover {\n            background: ${props.theme.colors.black};\n          }\n        `\n      : null};\n\n  > * {\n    margin: 0 4px;\n  }\n`;\n\n/**\n * A heading that can appear above a group of ListItems.\n */\nconst Heading = styled(BlockListItem)`\n  padding: 16px 8px 4px;\n  font-weight: bold;\n  font-size: 12px;\n  white-space: initial;\n`;\n\n/**\n * The sidebar displayed when editing/creating a new design\n */\nconst Sidebar = ({ children, ...props }) => (\n  <StyleWrapper {...props}>\n    {children({\n      components: {\n        Item,\n        Heading\n      }\n    })}\n  </StyleWrapper>\n);\n\nSidebar.propTypes = {\n  children: PropTypes.func.isRequired\n};\n\nexport default Sidebar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\n\nconst sizes = {\n  xs: 4,\n  sm: 8,\n  md: 16,\n  lg: 32,\n  xl: 64\n};\n\nexport const StyledSpacer = styled.div`\n  margin-top: ${props => (props.top ? sizes[props.top] : 0)}px;\n  margin-bottom: ${props => (props.bottom ? sizes[props.bottom] : 0)}px;\n  margin-left: ${props => (props.left ? sizes[props.left] : 0)}px;\n  margin-right: ${props => (props.right ? sizes[props.right] : 0)}px;\n`;\n\nconst Spacer = props => <StyledSpacer {...props} />;\n\nSpacer.propTypes = {\n  bottom: PropTypes.oneOf(Object.keys(sizes)),\n  left: PropTypes.oneOf(Object.keys(sizes)),\n  right: PropTypes.oneOf(Object.keys(sizes)),\n  top: PropTypes.oneOf(Object.keys(sizes))\n};\n\nexport default Spacer;\n","import styled from \"styled-components\";\n\nconst Tile = styled.div`\n  background: ${props => props.theme.colors.white};\n  border: 1px solid ${props => props.theme.colors.gray};\n  border-radius: 4px;\n`;\n\nexport default Tile;\n","import styled from \"styled-components\";\nimport { TypographyStyles } from \"./Text\";\n\n/**\n * A button that behaves like regular text but provides the user with indication\n * that it is clickable.\n */\nconst TextButton = styled.button`\n  ${TypographyStyles};\n  border: 0;\n  outline: 0;\n  background: transparent;\n  box-shadow: none;\n  cursor: pointer;\n  color: ${props => props.theme.colors.blue};\n  padding: 0;\n  margin: 0;\n\n  &:hover {\n    text-decoration: underline;\n  }\n\n  &[disabled] {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\nexport default TextButton;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport BodyPortal from \"./utilities/BodyPortal\";\nimport Text from \"./Text\";\nimport Icon from \"./Icon\";\n\nexport const fadeIn = keyframes`\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n`;\n\nexport const fadeOut = keyframes`\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n`;\n\n/**\n * A style wrapper that creates the tooltip UI.\n * @param {Boolean} removing If true, the tooltip will begin to fade out\n * @param {Number} top The top position of the target element for this to be positioned near\n * @param {Number} left The left position of the target element for this to be positioned near\n * @param {Number} fadeSpeed The speed at which the tooltip should fade in or out (seconds)\n */\nexport const StyleWrapper = styled.div`\n  position: absolute;\n  background: ${props => props.theme.colors.white};\n  padding: 4px;\n  border: 1px solid ${props => props.theme.colors.silver};\n  border-radius: 2px;\n  box-shadow: 0px 2px 2px -1px ${props => props.theme.colors.gray};\n  top: ${props => props.top}px;\n  left: ${props => props.left}px;\n  transform: translateY(calc(-100% - 10px)) translateX(-6px);\n  opacity: ${props => (props.removing ? 0 : 1)};\n  animation: ${props => (props.removing ? fadeOut : fadeIn)}\n    ${props => props.fadeSpeed}s;\n  z-index: 200;\n\n  &:before {\n    content: \"\";\n    display: block;\n    width: 12px;\n    height: 12px;\n    background: ${props => props.theme.colors.white};\n    border: 1px solid ${props => props.theme.colors.silver};\n    border-left: 0px;\n    border-top: 0px;\n    position: absolute;\n    top: calc(100% - 6px);\n    left: 5px;\n    transform: rotate(45deg);\n    border-bottom-right-radius: 2px;\n  }\n`;\n\nexport const TooltipIcon = styled(Icon)`\n  border: 1px solid ${props => props.theme.colors.gray};\n  color: gray;\n  border-radius: 50%;\n  width: 12px !important;\n  height: 12px;\n  display: inline-block;\n  padding: 1px;\n  box-sizing: border-box;\n  transform: translateY(-3px);\n  cursor: help;\n`;\n\nconst TooltipText = styled(Text)`\n  position: relative;\n`;\n\n/**\n * A component that displays a small info icon. When hovering over the icon, a tooltip will appear\n * floating above that icon, containing the provided content.\n */\nclass Tooltip extends React.Component {\n  static defaultProps = {\n    fadeSpeedMs: 250\n  };\n  static propTypes = {\n    /**\n     * The speed of the fade animation in milliseconds.\n     */\n    fadeSpeedMs: PropTypes.number.isRequired,\n\n    /**\n     * The content to be displayed in the tooltip\n     */\n    children: PropTypes.node.isRequired\n  };\n  state = {\n    /**\n     * Indicates if the tooltip should be rendered to the dom.\n     * @type {Boolean}\n     */\n    renderTooltip: false,\n    /**\n     * Indicates that we are about to remove the tooltip from the dom. Allows for the tooltip to\n     * fade out before being removed.\n     * @type {Boolean}\n     */\n    removingTooltip: false,\n    /**\n     * The top position of the info icon, used for targeting the tooltip.\n     */\n    top: null,\n    /**\n     * The left position of the info icon, used for targeting the tooltip.\n     */\n    left: null\n  };\n\n  /**\n   * Clean up any pending timeouts when unmounting.\n   */\n  componentWillUnmount() {\n    window.clearTimeout(this.fadeTimer);\n  }\n\n  /**\n   * The stored fade out timer. Allows for cancellation.\n   */\n  fadeTimer = null;\n\n  /**\n   * Displays the tooltip when the info icon is hovered over.\n   * @param  {Object} event The mouseenter event from the DOM\n   */\n  handleMouseEnter = event => {\n    window.clearTimeout(this.fadeTimer);\n    const targetBounds = event.target.getBoundingClientRect();\n    this.setState({\n      renderTooltip: true,\n      removingTooltip: false,\n      top: targetBounds.y,\n      left: targetBounds.x\n    });\n  };\n\n  /**\n   * Removes the tooltip when the info icon is no longer hovered over.\n   */\n  handleMouseLeave = () => {\n    this.setState({\n      removingTooltip: true\n    });\n    this.fadeTimer = window.setTimeout(() => {\n      this.setState({\n        removingTooltip: false,\n        renderTooltip: false\n      });\n    }, this.props.fadeSpeedMs);\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <TooltipIcon\n          icon=\"info\"\n          onMouseEnter={this.handleMouseEnter}\n          onMouseLeave={this.handleMouseLeave}\n        />\n        {this.state.renderTooltip && (\n          <BodyPortal>\n            <StyleWrapper\n              className=\"testing_tooltip\"\n              top={this.state.top}\n              left={this.state.left}\n              isVisible={this.state.displayTooltip}\n              fadeSpeed={this.props.fadeSpeedMs / 1000}\n              removing={this.state.removingTooltip}\n            >\n              <TooltipText>{this.props.children}</TooltipText>\n            </StyleWrapper>\n          </BodyPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Tooltip;\n","import * as colors from \"./colors\";\nimport * as media from \"./media\";\nimport * as patterns from \"./patterns\";\nimport A from \"./A\";\nimport Alert from \"./Alert\";\nimport BlockListItem from \"./BlockListItem\";\nimport Button from \"./Button\";\nimport Dropdown from \"./Dropdown\";\nimport Error from \"./Error\";\nimport FillToBottom from \"./FillToBottom\";\nimport H1 from \"./H1\";\nimport H2 from \"./H2\";\nimport H3 from \"./H3\";\nimport Icon from \"./Icon\";\nimport Input from \"./Input\";\nimport Label from \"./Label\";\nimport Loading from \"./Loading\";\nimport Modal from \"./Modal\";\nimport ModalClose from \"./ModalClose\";\nimport ModalConfirm from \"./ModalConfirm\";\nimport ModalPrompt from \"./ModalPrompt\";\nimport P from \"./P\";\nimport PageLoader from \"./PageLoader\";\nimport Select from \"./Select\";\nimport Sidebar from \"./Sidebar\";\nimport Spacer from \"./Spacer\";\nimport Text from \"./Text\";\nimport TextButton from \"./TextButton\";\nimport Tile from \"./Tile\";\nimport Tooltip from \"./Tooltip\";\n\nconst Theme = { colors, media, patterns };\nexport default Theme;\n\nexport {\n  A,\n  Alert,\n  BlockListItem,\n  Button,\n  Dropdown,\n  Error,\n  FillToBottom,\n  H1,\n  H2,\n  H3,\n  Icon,\n  Input,\n  Label,\n  Loading,\n  Modal,\n  ModalClose,\n  ModalConfirm,\n  ModalPrompt,\n  P,\n  PageLoader,\n  Select,\n  Sidebar,\n  Spacer,\n  Text,\n  TextButton,\n  Tile,\n  Tooltip\n};\n","/**\n * Activates a new account. When registering a new account, an email\n * is sent to the user with a link to confirm their email address,\n * activating their account.\n * @param  {String} userId The ID of the user\n * @param  {String} activationCode The activation code included in\n * the email confirmation email\n * @return {Promise}\n */\nexport default async function activateAccount(userId, activationCode) {\n  const bodyFormData = new FormData();\n  bodyFormData.append(\"uid\", userId);\n  bodyFormData.append(\"actcode\", activationCode);\n\n  // Make the request\n  const response = await this.axiosInstance.post(\"/activate.php\", bodyFormData);\n\n  if (!response.data || !response.data.activated) {\n    let message;\n    if (response.data && response.data.message) {\n      message = response.data.message;\n    } else {\n      message = \"Could not activate the account\";\n    }\n    return Promise.reject(message);\n  }\n\n  return response;\n}\n","import { error, success } from \"../../theme/Alert\";\n\n/**\n * Changes the email address for the user's account\n * @param  {String}  userId The user's id\n * @param  {String}  newEmail The user's new email address\n * @return {Promise}\n */\nexport default async function changeEmail(userId, newEmail) {\n  // Build the form data\n  const bodyFormData = new FormData();\n  bodyFormData.append(\"id\", userId);\n  bodyFormData.append(\"email\", newEmail);\n\n  // Make the request\n  const response = await this.axiosInstance.post(\n    \"/change_email.php\",\n    bodyFormData\n  );\n\n  if (!response.data || !response.data.changed) {\n    const message = response.data\n      ? response.data.message\n      : \"Could not change the email address.\";\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  response.data.email = newEmail;\n  success(\"Your email address has been saved.\");\n  return response;\n}\n","import { error, success } from \"../../theme/Alert\";\n\n/**\n * Changes the user's password\n * @param  {Onbject}  data Must contain string values: username, currentPassword,\n * newPassword, and confirmNewPassword\n * @return {Promise}\n */\nexport default async function changePassword(data) {\n  const { username, currentPassword, newPassword, confirmNewPassword } = data;\n  // Build the form data\n  const bodyFormData = new FormData();\n  bodyFormData.append(\"username\", username);\n  bodyFormData.append(\"oldpassword\", currentPassword);\n  bodyFormData.append(\"password2\", confirmNewPassword);\n  bodyFormData.append(\"password\", newPassword);\n\n  // Make the request\n  const response = await this.axiosInstance.post(\n    \"/changepassword.php\",\n    bodyFormData\n  );\n\n  if (!response.data || !response.data.changed) {\n    const message = response.data\n      ? response.data.message\n      : \"Could not change the password.\";\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  success(\"Your password has been changed.\");\n  return response;\n}\n","/**\n * Check if the user is already logged in based on session data.\n * @return {Promise}\n */\nexport default async function checkLoginStatus() {\n  // Get the user data from session storage\n  const sessionData = localStorage.getItem(\"user\");\n  let parsedSessionData;\n  try {\n    parsedSessionData = JSON.parse(sessionData);\n  } catch {\n    parsedSessionData = false;\n  }\n\n  // If we had no user data, reject.\n  if (!parsedSessionData) {\n    return new Promise((resolve, reject) =>\n      reject({\n        data: \"No session data was found. The user is not logged in.\"\n      })\n    );\n  }\n\n  // Build the form data\n  const bodyFormData = new FormData();\n  Object.keys(parsedSessionData).forEach(key =>\n    bodyFormData.append(key, parsedSessionData[key])\n  );\n  bodyFormData.append(\"update_login\", true);\n\n  // Make the request\n  const response = await this.axiosInstance.post(\"/index.php\", bodyFormData);\n\n  // If the response has no data or indicates that the user is not logged in, reject.\n  if (!response.data || !response.data.logged_in) {\n    return new Promise((resolve, reject) => reject(response));\n  }\n\n  // Store the user data in session storage\n  localStorage.setItem(\"user\", JSON.stringify(response.data));\n\n  // Return the response\n  return response;\n}\n","import { error } from \"../../theme/Alert\";\n\n/**\n * Sends a request to register a new KitePaint account.\n * @param  {Object}  data Must contain `{username, email, password, password2}`\n * @return {Promise}\n */\nexport default async function createAccount(data) {\n  // Build the form data\n  const bodyFormData = new FormData();\n  Object.keys(data).forEach(key => bodyFormData.append(key, data[key]));\n\n  // Make the request\n  const response = await this.axiosInstance.post(\"/register.php\", bodyFormData);\n\n  // If there's no data, or if the data returns with registered as false, reject.\n  if (!response.data || !response.data.registered) {\n    const message = response.data\n      ? response.data.message\n      : \"The registration request was unsuccessful\";\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n  return response;\n}\n","import { error, success } from \"../../theme/Alert\";\n\n/**\n * Creates a new design based on the provided data.\n * @param  {Design}  design An unsaved design model\n * @return {Promise} Resolves with an object that contains an id property of the new design.\n */\nexport default async function createDesign(design) {\n  const defaults = {\n    status: 0,\n    new: 1\n  };\n  const data = Object.assign(\n    defaults,\n    design.getProperties(\"name\", \"product\", \"user\", \"variations\", \"status\")\n  );\n\n  // Stringify the variations since that's what the API handles for now.\n  data.variations = JSON.stringify(data.variations);\n  const bodyFormData = new FormData();\n  Object.keys(data).forEach(key => bodyFormData.append(key, data[key]));\n\n  const response = await this.axiosInstance.post(\"/designs.php\", bodyFormData);\n\n  // The server should respond with valid: true and with the id of the newly created design.\n  if (!response.data || !response.data.id || !response.data.valid) {\n    const message = response.data\n      ? response.data.message\n      : \"The design could not be saved\";\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  success(\"The design has been saved\");\n  return response;\n}\n","import { error, success } from \"../../theme/Alert\";\n\n/**\n * Triggers deletion of the specified account\n * @param  {String}  id       The account's ID\n * @param  {String}  password The account's password\n * @return {Promise}\n */\nexport default async function deleteAccount(id, password) {\n  // Build the form data\n  const bodyFormData = new FormData();\n  bodyFormData.append(\"id\", id);\n  bodyFormData.append(\"password\", password);\n\n  // Make the request\n  const response = await this.axiosInstance.post(\n    \"/delete_account.php\",\n    bodyFormData\n  );\n\n  if (!response.data || !response.data.changed) {\n    const message = response.data\n      ? response.data.message\n      : \"Could not delete account.\";\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  success(\"Your account has been deleted.\");\n  return response;\n}\n","import { error, success } from \"../../theme/Alert\";\n\n/**\n * Deletes the design with the specified ID.\n * @param  {String}  designId\n * @return {Promise}\n */\nexport default async function deleteDesign(designId) {\n  const data = {\n    delete: true,\n    id: designId\n  };\n  const bodyFormData = new FormData();\n  Object.keys(data).forEach(key => bodyFormData.append(key, data[key]));\n\n  const response = await this.axiosInstance.post(\"/designs.php\", bodyFormData);\n\n  // The server should respond with valid: true and with the id of the newly created design.\n  if (!response.data || !response.data.valid) {\n    const message = response.data\n      ? response.data.message\n      : \"The design could not be deleted\";\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  success(\"The design has been deleted.\");\n  return response;\n}\n","import PropTypes from \"prop-types\";\nimport { createModel, computed } from \"manikin-model\";\n\n/**\n * A manufacturer is a company that manufactures kites and owns one or more products.\n */\nconst Manufacturer = createModel(\"Manufacturer\", {\n  id: null,\n  name: null,\n  logo: null,\n  website: null,\n\n  // Raw manufacturer JSON\n  json: computed(function() {\n    return this.getProperties(\"id\", \"name\", \"logo\", \"website\");\n  })\n});\n\nManufacturer.propTypes = {\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  logo: PropTypes.string.isRequired,\n  website: PropTypes.string,\n  json: PropTypes.shape({\n    id: PropTypes.string,\n    name: PropTypes.string,\n    logo: PropTypes.string,\n    website: PropTypes.string\n  })\n};\n\nexport default Manufacturer;\n\n/**\n * A mock manufacturer used for testing\n * @type {Object}\n */\nconst getMockManufacturer = (overrides = {}) =>\n  new Manufacturer(\n    Object.assign(\n      {\n        id: \"manufacturer-1\",\n        name: \"Krazy Kites\",\n        logo: \"abc.jpg\",\n        website: \"http://krazykites.com\"\n      },\n      overrides\n    )\n  );\nexport { getMockManufacturer };\n","import PropTypes from \"prop-types\";\n\n/**\n * Status can be applied to any model to indicate it's public visibility.\n */\nexport const statusProp = PropTypes.oneOf([\"0\", \"1\", \"2\"]);\nconst Status = {\n  \"0\": \"Private\",\n  \"1\": \"Unlisted\",\n  \"2\": \"Public\",\n  PRIVATE: \"0\",\n  UNLISTED: \"1\",\n  PUBLIC: \"2\"\n};\nexport default Status;\n","import PropTypes from \"prop-types\";\nimport { createModel, computed } from \"manikin-model\";\nimport { getMockManufacturer } from \"./Manufacturer\";\nimport Status, { statusProp } from \"./Status\";\n\n/**\n * A product is a kite that can be customized to create a design.\n */\nconst Product = createModel(\"Product\", {\n  id: null,\n  embed: null,\n  name: null,\n  notes: null,\n  manufacturer: null,\n  status: null,\n  url: null,\n  colors: null,\n  variations: null,\n\n  // Raw manufacturer JSON\n  json: computed(function() {\n    return this.getProperties(\n      \"id\",\n      \"embed\",\n      \"name\",\n      \"notes\",\n      \"manufacturer\",\n      \"status\",\n      \"url\",\n      \"colors\",\n      \"variations\"\n    );\n  })\n});\nProduct.propTypes = {\n  id: PropTypes.string.isRequired,\n  embed: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  notes: PropTypes.arrayOf(PropTypes.string),\n  manufacturer: PropTypes.string.isRequired,\n  status: statusProp.isRequired,\n  url: PropTypes.string,\n  colors: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      color: PropTypes.string.isRequired\n    })\n  ),\n  variations: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string,\n      name: PropTypes.string.isRequired,\n      svg: PropTypes.string.isRequired\n    })\n  ),\n\n  json: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    embed: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    notes: PropTypes.arrayOf(PropTypes.string),\n    manufacturer: PropTypes.string.isRequired,\n    status: statusProp.isRequired,\n    url: PropTypes.string,\n    colors: PropTypes.arrayOf(\n      PropTypes.shape({\n        name: PropTypes.string.isRequired,\n        color: PropTypes.string.isRequired\n      })\n    ),\n    variations: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string,\n        name: PropTypes.string.isRequired,\n        svg: PropTypes.string.isRequired\n      })\n    )\n  })\n};\n\nexport default Product;\n\n/**\n * A mock product used for testing\n * @type {Object}\n */\nconst getMockProduct = (overrides = {}) =>\n  new Product(\n    Object.assign(\n      {\n        id: \"product-1\",\n        embed: \"krazykites.com\",\n        name: \"Krazy Kite\",\n        manufacturer: getMockManufacturer().get(\"id\"),\n        url: \"http://krazykites.com/krazy-kite\",\n        colors: [\n          {\n            name: \"red\",\n            color: \"#ff0000\"\n          },\n          {\n            name: \"black\",\n            color: \"#000000\"\n          }\n        ],\n        variations: [\n          {\n            id: \"1\",\n            name: \"Standard\",\n            svg: \"<div>Kool Kite</div>\"\n          }\n        ],\n        status: Status.PUBLIC\n      },\n      overrides\n    )\n  );\n\nexport { getMockProduct };\n","import PropTypes from \"prop-types\";\nimport { createModel, computed } from \"manikin-model\";\nimport moment from \"moment\";\nimport { getMockProduct } from \"./Product\";\nimport Status, { statusProp } from \"./Status\";\n\nconst Design = createModel(\"Design\", {\n  active: null,\n  id: null,\n  images: null,\n  created: null,\n  updated: null,\n  name: null,\n  product: null,\n  user: null,\n  variations: null,\n  productStatus: null,\n  status: null,\n\n  // The last updated date as a DateTime object\n  updatedDate: computed(function() {\n    const updated = this.get(\"updated\");\n    return moment(updated, \"MM/DD/YYYY\").valueOf();\n  }),\n\n  // Is this design available publicly?\n  isPublic: computed(function() {\n    return (\n      this.get(\"status\") === Status.PUBLIC &&\n      this.get(\"productStatus\") === Status.PUBLIC\n    );\n  }),\n\n  // Is this design private, meaning only the owner can view it?\n  isPrivate: computed(function() {\n    return (\n      this.get(\"status\") === Status.PRIVATE ||\n      this.get(\"productStatus\") === Status.PRIVATE\n    );\n  }),\n\n  // Is this design based on a private product?\n  isPrivateProduct: computed(function() {\n    return this.get(\"productStatus\") === Status.PRIVATE;\n  }),\n\n  // Either the design status or the product status; whichever is more restrictive.\n  currentStatus: computed(function() {\n    return this.get(\"status\") > this.get(\"productStatus\")\n      ? this.get(\"productStatus\")\n      : this.get(\"status\");\n  }),\n\n  // Serialized JSON\n  json: computed(function() {\n    return this.getProperties(\n      \"id\",\n      \"created\",\n      \"updated\",\n      \"name\",\n      \"product\",\n      \"user\",\n      \"variations\",\n      \"productStatus\",\n      \"status\"\n    );\n  })\n});\n\nDesign.propTypes = {\n  active: PropTypes.string,\n  id: PropTypes.string,\n  images: PropTypes.string,\n  // A string representing the created date\n  created: PropTypes.string,\n  // A string representing the updated date\n  updated: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  // The ID of the cooresponding product\n  product: PropTypes.string.isRequired,\n  // The ID of the user that created the design\n  user: PropTypes.string,\n  variations: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n      svg: PropTypes.string.isRequired,\n      primary: PropTypes.bool.isRequired\n    })\n  ),\n  // The status of the cooresponding product\n  productStatus: statusProp,\n  // The status of the design\n  status: statusProp.isRequired,\n  updatedDate: PropTypes.instanceOf(Date),\n  isPublic: PropTypes.bool.isRequired,\n  json: PropTypes.object.isRequired\n};\n\nexport default Design;\n\n/**\n * A mock design used for testing\n * @type {Object}\n */\nconst getMockDesign = (overrides = {}) =>\n  new Design(\n    Object.assign(\n      {\n        id: \"design-1\",\n        created: \"01/01/2018\",\n        updated: \"01/02/2018\",\n        name: \"picasso\",\n        product: getMockProduct().id,\n        variations: [\n          {\n            id: \"1\",\n            name: \"Standard\",\n            svg: \"<div>picasso standard</div>\",\n            primary: true\n          }\n        ],\n        status: Status.PRIVATE,\n        productStatus: Status.PUBLIC\n      },\n      overrides\n    )\n  );\nexport { getMockDesign };\n","import Design from \"../../models/Design\";\nimport { error } from \"../../theme/Alert\";\n\n/**\n * Retrieves the design with the specified id\n * @param  {String}  id\n * @param {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n * requests will not be made within 10 minutes.\n * @return {Promise} resolves with the retrieved design\n */\nexport default async function getDesign(id, useCache = true) {\n  if (useCache) {\n    const cache = await this._cacheable(\"getDesign\", id, {});\n    if (!cache.continue) {\n      return cache;\n    }\n  }\n  const response = await this.axiosInstance.get(\"/designs.php\", {\n    params: {\n      id\n    }\n  });\n\n  // Handle invalid responses\n  if (!response.data || !response.data.length) {\n    const message = response.data\n      ? response.data.message\n      : `The request for design ${id} was unsuccessful`;\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  response.data = response.data[0];\n\n  if (response.data.active === \"0\") {\n    const message = `Design ${id} has been deleted.`;\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  response.data.variations = JSON.parse(response.data.variations);\n  response.data = new Design(response.data);\n  return response;\n}\n","import Qs from \"qs\";\nimport Design from \"../../models/Design\";\nimport { error } from \"../../theme/Alert\";\n\n/**\n * Get saved designs.\n * @param  {Object}  [filter={}] A list of filters. See filterDefaults as an example.\n * @param {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n * requests will not be made within 10 minutes.\n * @return {Promise}\n */\nexport default async function getDesigns(filter = {}, useCache = true) {\n  // Define the default filters and merge them with the user provided filters\n  const filterDefaults = {\n    userId: null,\n    publicOnly: true,\n    limit: 50\n  };\n  const filterWithDefaults = Object.assign({}, filterDefaults, filter);\n\n  // Build the request data to be sent to the server as query params\n  const requestData = {\n    filter: {\n      active: 1\n    },\n    order: [\"id\", \"DESC\"]\n  };\n  if (filterWithDefaults.limit) {\n    requestData.limit = filterWithDefaults.limit;\n  }\n  if (filterWithDefaults.publicOnly) {\n    requestData.filter.status = 2;\n  }\n  if (filterWithDefaults.userId) {\n    requestData.filter.user = filterWithDefaults.userId;\n  }\n\n  // Convert the request data to query params using Qs. This is done because providing nested\n  // parms to Axios's params config prop doesn't work correctly.\n  const requestString = Qs.stringify(requestData);\n\n  // Look for cached values if useCache is true\n  if (useCache) {\n    const cache = await this._cacheable(\"getDesign\", requestString);\n    if (!cache.continue) {\n      return cache;\n    }\n  }\n\n  // Make the request\n  const response = await this.axiosInstance.get(\n    `/designs.php?${requestString}`\n  );\n\n  // Handle invalid responses\n  if (!response.data) {\n    const message = response.data\n      ? response.data.message\n      : \"The request for designs was unsuccessful\";\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  response.data = response.data.map(design => {\n    design.variations = JSON.parse(design.variations);\n    return new Design(design);\n  });\n\n  return response;\n}\n","import Manufacturer from \"../../models/Manufacturer\";\n// import { error } from \"../../theme/Alert\";\n\n/**\n * Get all manufacturers.\n * @param  {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n * requests will not be made within 10 minutes.\n * @return {Promise} { data: Manufacturer[] }\n */\nexport default async function getManufacturers(useCache = true) {\n  // Look for cached values if useCache is true\n  if (useCache) {\n    const cache = await this._cacheable(\"getManufacturers\");\n    if (!cache.continue) {\n      return cache;\n    }\n  }\n\n  // // Make the request\n  // const response = await this.axiosInstance.get(`/manufacturers.php`, {\n  //   params: {\n  //     activated: 1\n  //   }\n  // });\n\n  // // Handle invalid responses\n  // if (!response.data) {\n  //   const message = response.data\n  //     ? response.data.message\n  //     : \"The request for manufacturers was unsuccessful\";\n  //   error(message);\n  //   return new Promise((resolve, reject) => reject(message));\n  // }\n\n  const response = {\n    data: [\n      // {\n      //   id: \"1\",\n      //   name: \"Revolution\",\n      //   logo: \"revolution.png\",\n      //   website: \"http://revkites.com\"\n      // },\n      // {\n      //   id: \"3\",\n      //   name: \"WattyWorks\",\n      //   logo: \"wattyworks.jpg\",\n      //   website: \"http://watty.us\"\n      // },\n      // {\n      //   id: \"4\",\n      //   name: \"3 Wind\",\n      //   logo: \"3wind.jpg\",\n      //   website: \"\"\n      // },\n      // {\n      //   id: \"5\",\n      //   name: \"Kite Forge\",\n      //   logo: \"kiteforge-onblack.png\",\n      //   website: \"http://kiteforge.com\"\n      // },\n      {\n        id: \"6\",\n        name: \"Flying Smiles Kites\",\n        logo: \"compassRoseRough.png\",\n        website: \"http://flyingsmileskites.com\"\n      }\n    ]\n  };\n\n  response.data = response.data.map(\n    manufacturer => new Manufacturer(manufacturer)\n  );\n\n  return response;\n}\n","import Product from \"../../models/Product\";\n// import { error } from \"../../theme/Alert\";\n\n/**\n * Get all products.\n * @param  {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n * requests will not be made within 10 minutes.\n * @return {Promise}\n */\nexport default async function getProducts(useCache = true) {\n  // Look for cached values if useCache is true\n  if (useCache) {\n    const cache = await this._cacheable(\"getProducts\");\n    if (!cache.continue) {\n      return cache;\n    }\n  }\n\n  // Make the request\n  // const response = await this.axiosInstance.get(`/products.php`);\n\n  // // Handle invalid responses\n  // if (!response.data) {\n  //   const message = response.data\n  //     ? response.data.message\n  //     : \"The request for products was unsuccessful\";\n  //   error(message);\n  //   return new Promise((resolve, reject) => reject(message));\n  // }\n\n  const cr100pct = `<?xml version=\"1.0\" encoding=\"utf-8\"?>\\r\\n<!-- Generator: Adobe Illustrator 21.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\\r\\n<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\r\\n\\t viewBox=\"0 0 1741.8 587.4\" style=\"enable-background:new 0 0 1741.8 587.4;\" xml:space=\"preserve\">\n    <polygon\n    class=\"leading-edge\"\n    points=\"798,39.2 1203.9,42.1 1549,41 1604.8,42.2 1903.6,51.4 1946.2,52.8 1963.2,12.5 1572.9,2.1 1205.6,0 702.1,0.1 372.2,5 0,13.9 17,54.1 358.4,43.5 414.2,42.3 \"\n    id=\"polygon25\"\n    transform=\"matrix(0.9,0,0,0.9,0.48832246,0.52052154)\" />\n    <path\n    id=\"vert1\" class=\"panel vert1\" data-id=\"vert1\" data-autofill=\"vert1\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 51.978516,48.113281 c -12.20471,0.358779 -24.297254,0.723634 -36.189454,1.097657 l 226.607418,537.451172 0.19922,-0.084 28.85742,-17.30468 z\" />\n <path\n    id=\"vert5\" class=\"panel vert5\" data-id=\"vert5\" data-autofill=\"vert5\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 363.18359,41.287109 c -11.93714,0.184311 -23.73188,0.37628 -35.42968,0.572266 L 521.20117,419.50391 548.5293,403.11523 Z\" />\n <path\n    id=\"vert4\" class=\"panel vert4\" data-id=\"vert4\" data-autofill=\"vert4\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 284.64844,42.613281 c -12.55283,0.231372 -24.95482,0.471809 -37.22852,0.716797 l 200.30469,420.236332 29.21875,-17.52149 z\" />\n <path\n    id=\"vert3\" class=\"panel vert3\" data-id=\"vert3\" data-autofill=\"vert3\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 206.76562,44.179688 c -12.39727,0.269265 -24.63844,0.546779 -36.74804,0.830078 l 205.38867,461.925784 29.30273,-17.57227 z\" />\n <path\n    id=\"vert6\" class=\"panel vert6\" data-id=\"vert6\" data-autofill=\"vert6\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 440.18945,40.203125 c -13.05153,0.166749 -25.95653,0.34148 -38.73633,0.521484 L 592.79102,376.57227 621.88477,359.125 Z\" />\n <path\n    id=\"vert2\" class=\"panel vert2\" data-id=\"vert2\" data-autofill=\"vert2\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 130.75391,45.964844 c -12.2834,0.31054 -24.41549,0.629977 -36.400394,0.955078 L 305.7793,548.6875 335.1582,531.07031 Z\" />\n <path\n    id=\"vert7\" class=\"panel vert7\" data-id=\"vert7\" data-autofill=\"vert7\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 519.26367,39.292969 c -13.41131,0.137924 -26.69741,0.28041 -39.83594,0.43164 l 185.40039,293.648441 29.09376,-17.44727 z\" />\n <path\n    id=\"vert8\" class=\"panel vert8\" data-id=\"vert8\" data-autofill=\"vert8\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 605.2168,38.515625 c -13.86689,0.108417 -27.59136,0.223794 -41.18164,0.345703 l 175.24414,249.865232 25.55273,-15.32422 3.0957,-2.17187 -59.07031,-84.94141 z\" />\n <path\n    id=\"horiz1\" class=\"panel horiz1\" data-id=\"horiz1\" data-autofill=\"horiz1\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 748.0214,243.2832 -72.498,43.69532 18.1094,28.68359 73.7929,-44.47461 z m -101.5527,61.20508 -113.4394,68.36914 15.5,30.25781 116.0507,-69.94335 z m -140.7363,84.82031 -114.7051,69.13086 13.8867,31.23047 116.3184,-70.10351 z m -143.97659,86.77344 -103.25,62.22656 13.30078,31.58399 103.83594,-62.58008 z m -132.27929,79.7207 -0.26758,0.16211 13.30273,31.55274 0.26953,-0.16211 z\" />\n <path\n    id=\"horiz2\" class=\"panel horiz2\" data-id=\"horiz2\" data-autofill=\"horiz2\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 678.22845,201.83203 -108.75,65.54297 16.7929,29.4746 111.4786,-67.18554 z m -137.8067,83.05468 -109.1035,65.75586 14.6621,30.76172 111.2344,-67.04101 z m -138.291,83.34571 -108.2578,65.24609 13.3067,31.57813 109.6132,-66.0625 z m -137.6054,82.93359 -63.5977,38.33008 13.3125,31.57422 63.5898,-38.32422 z\" />\n <path\n    id=\"horiz3\" class=\"panel horiz3\" data-id=\"horiz3\" data-autofill=\"horiz3\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 667.05066,126.73439 -67.1484,40.47069 18.1094,28.6836 68.4433,-41.25 z m -96.20109,57.98046 -102.2071,61.59961 15.4981,30.25586 104.81829,-63.17188 z m -129.504,78.05078 -108.4785,65.37891 13.8848,31.22851 110.0937,-66.35156 z m -137.75,83.02149 -100.83003,60.76953 13.29883,31.58007 101.416,-61.12109 z m -129.91206,78.29492 -0.26758,0.16211 13.3125,31.57422 0.26758,-0.16211 z\" />\n <path\n    id=\"horiz4\" class=\"panel horiz4\" data-id=\"horiz4\" data-autofill=\"horiz4\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 626.95106,69.072279 -0.2891,0.17383 19.5215,27.83203 0.1719,-0.10352 z m -29.4043,17.72266 -97.4766,58.748031 16.793,29.47657 100.2031,-60.39257 z m -126.5332,76.259751 -100.2969,60.44727 14.6621,30.76172 102.4278,-61.73243 z m -129.4824,78.03711 -102.6543,61.86719 13.3066,31.58008 104.0098,-62.68555 z m -132.002,79.55469 -63.62498,38.3457 13.3125,31.57617 63.61718,-38.34179 z\" />\n <path\n    id=\"horiz5\" class=\"panel horiz5\" data-id=\"horiz5\" data-autofill=\"horiz5\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 605.42176,38.113289 c -21.6471,0.16873 -42.842,0.36106 -63.8183,0.5625 l -16.5528,9.97657 18.1094,28.68164 63.0937,-38.02539 z m -109.4238,28.04883 -91.8594,55.361331 15.5,30.25585 94.4688,-56.935541 z m -119.1543,71.812501 -101.3691,61.09374 13.8867,31.22852 102.9804,-62.06641 z m -130.64063,78.73437 -98.41016,59.31054 13.29883,31.58204 98.99609,-59.66407 z m -127.54297,76.86914 -0.26953,0.16211 13.3125,31.57422 0.26953,-0.16211 z\" />\n <path\n    id=\"horiz6\" class=\"panel horiz6\" data-id=\"horiz6\" data-autofill=\"horiz6\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 468.6777,39.455099 c -22.7745,0.26832 -45.1667,0.55757 -67.1348,0.86523 l -0.3379,0.20312 c 12.2646,-0.17218 24.6294,-0.34011 37.1446,-0.5 l 7.5117,13.1836 z m -68.666,1.78906 -91.48834,55.13867 14.6621,30.759771 93.61914,-56.423831 z m -120.6739,72.728511 -97.04688,58.48827 13.30469,31.57813 98.40235,-59.30664 z m -126.39649,76.17577 -63.654287,38.36329 13.312497,31.57421 63.64648,-38.35937 z\" />\n <path\n    id=\"horiz7\" class=\"panel horiz7\" data-id=\"horiz7\" data-autofill=\"horiz7\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 331.23046,41.398449 c -23.0336,0.38232 -45.5883,0.78846 -67.7188,1.21484 l -45.4277,27.37891 13.8847,31.228511 z m -142.42,46.23633 -95.988237,57.851551 13.298827,31.58203 96.57621,-58.20507 z m -125.175737,75.441391 -0.26758,0.16211 13.3125,31.57422 0.26758,-0.16211 z\" />\n <path\n    id=\"horiz8\" class=\"panel horiz8\" data-id=\"horiz8\" data-autofill=\"horiz8\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 190.93156,44.123059 c -23.32031,0.52242 -46.12537,1.06845 -68.42578,1.64062 l -0.36328,0.21875 c 2.80628,-0.07225 5.54108,-0.1474 8.36328,-0.21875 l 11.68555,27.73438 z M 99.537033,59.607429 35.855392,97.988289 49.167893,129.56056 112.84172,91.185559 Z\" />\n <path\n    id=\"centerPanel\" class=\"panel centerPanel\" data-id=\"centerPanel\" data-autofill=\"centerPanel\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 870.71278,37.387128 c -28.3433,0 -104.9838,0.17807 -264.62461,1.59082 l 161.99471,232.945312 114.4108,-68.76914 4.4806,0.0475 115.37762,69.35098 161.9948,-232.947072 c -144.0583,-1.27486 -219.49222,-1.5383 -253.87572,-1.57852 l -26.2266,-0.14941 v -0.46934 c 0,0 -4.0821,-0.0211 -13.5298,-0.0211 z\" />\n <path\n    id=\"vert1-9\" class=\"panel vert1-9\" data-id=\"vert1-9\" data-autofill=\"vert1-9\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"M 51.97856,48.11328 C 39.77385,48.47206 27.6813,48.83691 15.7891,49.21093 l 226.60742,537.45118 0.19922,-0.084 28.85742,-17.30468 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"vert5-2\" class=\"panel vert5-2\" data-id=\"vert5-2\" data-autofill=\"vert5-2\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 363.18366,41.2871 c -11.93717,0.18432 -23.73191,0.37628 -35.42971,0.57227 l 193.44721,377.64454 27.3282,-16.38868 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"vert4-2\" class=\"panel vert4-2\" data-id=\"vert4-2\" data-autofill=\"vert4-2\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 284.64848,42.61328 c -12.55283,0.23137 -24.95482,0.47181 -37.22852,0.71679 l 200.3047,420.23634 29.2187,-17.52149 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"vert3-3\" class=\"panel vert3-3\" data-id=\"vert3-3\" data-autofill=\"vert3-3\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 206.76566,44.17968 c -12.39727,0.26927 -24.63844,0.54678 -36.74804,0.83008 l 205.38864,461.92579 29.3028,-17.57227 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"vert6-9\" class=\"panel vert6-9\" data-id=\"vert6-9\" data-autofill=\"vert6-9\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 440.18946,40.20312 c -13.0515,0.16675 -25.9565,0.34148 -38.7363,0.52148 l 191.3379,335.84767 29.0937,-17.44727 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"vert2-8\" class=\"panel vert2-8\" data-id=\"vert2-8\" data-autofill=\"vert2-8\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 130.75395,45.96484 c -12.2834,0.31054 -24.41549,0.62998 -36.40039,0.95508 l 211.42578,501.76758 29.3789,-17.61719 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"vert7-9\" class=\"panel vert7-9\" data-id=\"vert7-9\" data-autofill=\"vert7-9\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 519.26366,39.29296 c -13.4113,0.13793 -26.6974,0.28041 -39.8359,0.43164 l 185.4004,293.64845 29.0938,-17.44727 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"vert8-3\" class=\"panel vert8-3\" data-id=\"vert8-3\" data-autofill=\"vert8-3\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 605.21686,38.51562 c -13.8669,0.10842 -27.5914,0.22379 -41.1817,0.3457 l 175.2442,249.86524 25.5527,-15.32422 3.0957,-2.17187 -59.0703,-84.94141 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"horiz1-1\" class=\"panel horiz1-1\" data-id=\"horiz1-1\" data-autofill=\"horiz1-1\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 748.02146,243.2832 -72.498,43.69532 18.1094,28.68359 73.7929,-44.47461 z m -101.5527,61.20508 -113.4394,68.36914 15.5,30.25781 116.0507,-69.94335 z m -140.7363,84.82031 -114.7051,69.13086 13.8867,31.23047 116.3184,-70.10351 z m -143.97661,86.77344 -103.25,62.22656 13.30078,31.58399 103.83593,-62.58008 z m -132.27929,79.7207 -0.26758,0.16211 13.30273,31.55274 0.26953,-0.16211 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"horiz2-9\" class=\"panel horiz2-9\" data-id=\"horiz2-9\" data-autofill=\"horiz2-9\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 678.22846,201.83203 -108.75,65.54297 16.7929,29.4746 111.4786,-67.18554 z m -137.8067,83.05468 -109.1035,65.75586 14.6621,30.76172 111.2344,-67.04101 z m -138.291,83.34571 -108.25777,65.24609 13.3067,31.57813 109.61317,-66.0625 z m -137.60537,82.93359 -63.5977,38.33008 13.3125,31.57422 63.5898,-38.32422 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"horiz3-1\" class=\"panel horiz3-1\" data-id=\"horiz3-1\" data-autofill=\"horiz3-1\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 667.05066,126.73439 -67.1484,40.47069 18.1094,28.6836 68.4433,-41.25 z m -96.2011,57.98046 -102.2071,61.59961 15.4981,30.25586 104.8183,-63.17188 z m -129.504,78.05078 -108.47845,65.37891 13.8848,31.22851 110.09365,-66.35156 z m -137.74995,83.02149 -100.83003,60.76953 13.29883,31.58007 101.416,-61.12109 z m -129.91206,78.29492 -0.26758,0.16211 13.3125,31.57422 0.26758,-0.16211 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"horiz4-3\" class=\"panel horiz4-3\" data-id=\"horiz4-3\" data-autofill=\"horiz4-3\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 626.95106,69.07227 -0.2891,0.17383 19.5215,27.83203 0.1719,-0.10352 z m -29.4043,17.72266 -97.4766,58.74804 16.793,29.47657 100.2031,-60.39257 z m -126.5332,76.25976 -100.2969,60.44727 14.6621,30.76172 102.4278,-61.73243 z m -129.48236,78.03711 -102.6543,61.86719 13.3066,31.58008 104.0098,-62.68555 z m -132.002,79.55469 -63.62498,38.3457 13.3125,31.57617 63.61718,-38.34179 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"horiz5-7\" class=\"panel horiz5-7\" data-id=\"horiz5-7\" data-autofill=\"horiz5-7\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 605.42176,38.11328 c -21.6471,0.16873 -42.842,0.36106 -63.8183,0.5625 l -16.5528,9.97657 18.1094,28.68164 63.0937,-38.02539 z m -109.4238,28.04883 -91.8594,55.36134 15.5,30.25585 94.4688,-56.93555 z m -119.1543,71.81251 -101.36906,61.09374 13.8867,31.22852 102.98036,-62.06641 z m -130.64059,78.73437 -98.41016,59.31054 13.29883,31.58204 98.99609,-59.66407 z m -127.54297,76.86914 -0.26953,0.16211 13.3125,31.57422 0.26953,-0.16211 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"horiz6-5\" class=\"panel horiz6-5\" data-id=\"horiz6-5\" data-autofill=\"horiz6-5\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 468.67776,39.45509 c -22.7745,0.26832 -45.1667,0.55757 -67.1348,0.86523 l -0.3379,0.20312 c 12.2646,-0.17218 24.6294,-0.34011 37.1446,-0.5 l 7.5117,13.1836 z m -68.666,1.78906 -91.48836,55.13867 14.6621,30.75978 93.61916,-56.42384 z m -120.67392,72.72852 -97.04688,58.48827 13.30469,31.57813 98.40235,-59.30664 z m -126.39649,76.17577 -63.65429,38.36329 13.3125,31.57421 63.64648,-38.35937 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"horiz7-5\" class=\"panel horiz7-5\" data-id=\"horiz7-5\" data-autofill=\"horiz7-5\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 331.2305,41.39844 c -23.0336,0.38232 -45.5883,0.78846 -67.7188,1.21484 l -45.4277,27.37891 13.8847,31.22852 z m -142.42,46.23633 -95.98824,57.85156 13.29883,31.58203 96.57621,-58.20507 z m -125.17574,75.4414 -0.26758,0.16211 13.3125,31.57422 0.26758,-0.16211 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n <path\n    id=\"horiz8-9\" class=\"panel horiz8-9\" data-id=\"horiz8-9\" data-autofill=\"horiz8-9\" ng-click=\"color_panel('all', $event)\" fill=\"#FFFFFF\" stroke=\"#000000\"\n    \n    d=\"m 190.9316,44.12305 c -23.32031,0.52242 -46.12537,1.06845 -68.42578,1.64062 l -0.36328,0.21875 c 2.80628,-0.0722 5.54108,-0.1474 8.36328,-0.21875 l 11.68555,27.73438 z m -91.39453,15.48437 -63.68164,38.38086 13.3125,31.57228 63.67383,-38.37501 z\"\n    transform=\"matrix(-1,0,0,1,1768.5841,0.11311)\" />\n    </svg>`;\n\n  const response = {\n    data: [\n      {\n        id: \"27\",\n        name: \"Compass Rose\",\n        manufacturer: \"6\",\n        url: \"\",\n        colors:\n          '[{\"name\":\"White\",\"color\":\"#ffffff\",\"$$hashKey\":\"018\"},{\"name\":\"Light Gray\",\"color\":\"#cdcdcd\",\"$$hashKey\":\"01E\"},{\"name\":\"Dark Gray\",\"color\":\"#818181\",\"$$hashKey\":\"01G\"},{\"name\":\"Black\",\"color\":\"#000000\",\"$$hashKey\":\"01I\"},{\"name\":\"Yellow\",\"color\":\"#FFFF00\",\"$$hashKey\":\"01K\"},{\"name\":\"Lime\",\"color\":\"#C9FF00\",\"$$hashKey\":\"01M\"},{\"name\":\"Mint\",\"color\":\"#65CF8B\",\"$$hashKey\":\"01O\"},{\"name\":\"Green\",\"color\":\"#00933D\",\"$$hashKey\":\"01Q\"},{\"name\":\"Dark Blue\",\"color\":\"#1F3593\",\"$$hashKey\":\"01S\"},{\"name\":\"Mid Blue\",\"color\":\"#0072C0\",\"$$hashKey\":\"01U\"},{\"name\":\"Light Blue\",\"color\":\"#00AFF1\",\"$$hashKey\":\"01W\"},{\"name\":\"Teal\",\"color\":\"#00AFB2\",\"$$hashKey\":\"01Y\"},{\"name\":\"Plum\",\"color\":\"#590368\",\"$$hashKey\":\"020\"},{\"name\":\"Purple\",\"color\":\"#AC2293\",\"$$hashKey\":\"022\"},{\"name\":\"Lavender\",\"color\":\"#A266DF\",\"$$hashKey\":\"024\"},{\"name\":\"Rubine Red\",\"color\":\"#FF0268\",\"$$hashKey\":\"026\"},{\"name\":\"Red\",\"color\":\"#FF0000\",\"$$hashKey\":\"028\"},{\"name\":\"Orange\",\"color\":\"#FF9A00\",\"$$hashKey\":\"02A\"},{\"name\":\"Gold\",\"color\":\"#FFD000\",\"$$hashKey\":\"02C\"}]',\n        variations: [\n          {\n            id: \"27\",\n            name: \"100%\",\n            svg: cr100pct,\n            sortIndex: 0\n          }\n        ],\n        notes: '[\"\"]',\n        status: \"2\",\n        embed: \"watty.us,www.watty.us\"\n      }\n    ]\n  };\n\n  response.data = response.data.map(product => {\n    product.colors = JSON.parse(product.colors);\n    product.notes = JSON.parse(product.notes).filter(note => !!note);\n    return new Product(product);\n  });\n\n  return response;\n}\n","import PropTypes from \"prop-types\";\nimport { createModel, computed } from \"manikin-model\";\n\n/**\n * A user is an individual user account. It contains limited details that are available publically.\n */\nconst User = createModel(\"User\", {\n  username: null,\n  loginid: null,\n\n  json: computed(function() {\n    return this.getProperties(\"username\", \"loginid\");\n  })\n});\n\nUser.propTypes = {\n  username: PropTypes.string.isRequired,\n  loginid: PropTypes.string.isRequired,\n  json: PropTypes.shape({\n    username: PropTypes.string.isRequired,\n    loginid: PropTypes.string.isRequired\n  })\n};\n\nexport default User;\n\n/**\n * A mock user used for testing.\n */\nconst getMockUser = (overrides = {}) =>\n  new User(\n    Object.assign(\n      {\n        username: \"FlyFucker\",\n        loginid: \"abc\"\n      },\n      overrides\n    )\n  );\n\nexport { getMockUser };\n","import Qs from \"qs\";\nimport User from \"../../models/User\";\nimport { error } from \"../../theme/Alert\";\n\n/**\n * Retrieves a user by ID\n * @param  {String}  id\n * @return {Promise} Resolves with the retrieved User\n */\nexport default async function getUser(id, useCache = true) {\n  // Build the request data to be sent to the server as query params\n  const requestData = {\n    filter: {\n      loginid: id\n    },\n    return: [\"username\", \"loginid\"]\n  };\n\n  // Convert the request data to query params using Qs. This is done because providing nested\n  // parms to Axios's params config prop doesn't work correctly.\n  const requestString = Qs.stringify(requestData);\n\n  if (useCache) {\n    const cache = await this._cacheable(\"getUser\", requestString, {});\n    if (!cache.continue) {\n      return cache;\n    }\n  }\n\n  // Make the request\n  const response = await this.axiosInstance.get(`/users.php?${requestString}`);\n\n  // Handle invalid responses\n  if (!response.data || !response.data.length) {\n    const message = response.data\n      ? response.data.message\n      : `The request for user ${id} was unsuccessful`;\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  response.data = new User(response.data[0]);\n\n  return response;\n}\n","/**\n * Log in to a KitePaint account.\n * @param  {String}  username\n * @param  {String}  password\n * @return {Promise}\n */\nexport default async function logIn(username, password) {\n  // Build the form data\n  const bodyFormData = new FormData();\n  bodyFormData.append(\"username\", username);\n  bodyFormData.append(\"password\", password);\n\n  // Make the request\n  const response = await this.axiosInstance.post(\"/index.php\", bodyFormData);\n\n  // If the response has no data or indicates that the user is not logged in, reject.\n  if (!response.data || !response.data.logged_in) {\n    return new Promise((resolve, reject) =>\n      reject(\n        response.data\n          ? response.data.message\n          : \"The log in request was unsuccessful\"\n      )\n    );\n  }\n\n  // Store the user data in session storage\n  localStorage.setItem(\"user\", JSON.stringify(response.data));\n\n  // Return the response\n  return response;\n}\n","import { success } from \"../../theme/Alert\";\n\n/**\n * Logs out the user and destroys their session.\n * @return {Promise}\n */\nexport default async function logOut() {\n  await this.axiosInstance.post(\"/logout.php\");\n  success(\"You have been logged out.\");\n  localStorage.removeItem(\"user\");\n}\n","import { error } from \"../../theme/Alert\";\n\n/**\n * Sends a request to reset a user's password.\n * @param  {String} username The username of the user to reset the password for.\n * @param  {String} email The email address that is on the user's account.\n * @return {Promise}\n */\nexport default async function resetPassword(username, email) {\n  // Build the form data\n  const bodyFormData = new FormData();\n  bodyFormData.append(\"username\", username);\n  bodyFormData.append(\"email\", email);\n\n  // Make the request\n  const response = await this.axiosInstance.post(\n    \"/lostpassword.php\",\n    bodyFormData\n  );\n  // If there's no data, or if the data returns with reset as false, reject.\n  if (!response.data || !response.data.reset) {\n    const message = response.data\n      ? response.data.message\n      : \"The reset password request was unsuccessful.\";\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n  return response;\n}\n","import { error, success } from \"../../theme/Alert\";\n\n/**\n * Update an existing design\n * @param  {Design}  design\n * @return {Promise}\n */\nexport default async function updateDesign(design) {\n  const data = design.get(\"json\");\n  if (data.variations) {\n    // Stringify the variations since that's what the API handles for now.\n    data.variations = JSON.stringify(data.variations);\n  }\n\n  const bodyFormData = new FormData();\n  Object.keys(data).forEach(key => bodyFormData.append(key, data[key]));\n\n  const response = await this.axiosInstance.post(\"/designs.php\", bodyFormData);\n\n  // The server should respond with valid: true.\n  if (!response.data || !response.data.valid) {\n    const message = response.data\n      ? response.data.message\n      : \"The design could not be updated\";\n    error(message);\n    return new Promise((resolve, reject) => reject(message));\n  }\n\n  success(\"The design has been saved\");\n  return {\n    data: design\n  };\n}\n","import axios from \"axios\";\nimport activateAccount from \"./kitePaint/activateAccount\";\nimport changeEmail from \"./kitePaint/changeEmail\";\nimport changePassword from \"./kitePaint/changePassword\";\nimport checkLoginStatus from \"./kitePaint/checkLoginStatus\";\nimport createAccount from \"./kitePaint/createAccount\";\nimport createDesign from \"./kitePaint/createDesign\";\nimport deleteAccount from \"./kitePaint/deleteAccount\";\nimport deleteDesign from \"./kitePaint/deleteDesign\";\nimport getDesign from \"./kitePaint/getDesign\";\nimport getDesigns from \"./kitePaint/getDesigns\";\nimport getManufacturers from \"./kitePaint/getManufacturers\";\nimport getProducts from \"./kitePaint/getProducts\";\nimport getUser from \"./kitePaint/getUser\";\nimport logIn from \"./kitePaint/logIn\";\nimport logOut from \"./kitePaint/logOut\";\nimport resetPassword from \"./kitePaint/resetPassword\";\nimport updateDesign from \"./kitePaint/updateDesign\";\n\n/**\n * Determine the correct domain to communicate with based on the current applicaiton domain.\n * @return {String}\n */\nexport function _getApiDomain(currentDomain = window.location.hostname) {\n  const apiDomains = {\n    \"beta.kitepaint.com\": \"https://api.beta.kitepaint.com/php\",\n    \"kitepaint.com\": \"https://api.kitepaint.com/php\",\n    default: \"https://api.beta.kitepaint.com/php\"\n  };\n  return apiDomains[currentDomain] || apiDomains.default;\n}\n\n/**\n * A class the provides methods for interacting with the KitePaint REST API\n */\nexport class KitePaintApi {\n  constructor() {\n    this.config = {\n      baseURL: this.baseUrl,\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    };\n\n    this.axiosInstance = axios.create(this.config);\n  }\n\n  /**\n   * The base url for all API requests\n   * @type {String}\n   */\n  baseUrl = _getApiDomain();\n\n  /**\n   * The axios configuration.\n   * @type {Object}\n   */\n  config = {};\n\n  /**\n   * The axios instance.\n   * @type {Axios}\n   */\n  axiosInstance = null;\n\n  /**\n   * A cache of request details. Each cacheable API should have a section in _cache that contains\n   * an array of cache entries. Each cache entry should have a cacheTime and a value.\n   */\n  _cache = {};\n\n  /**\n   * Make a request cacheable by calling _cacheable before making the request.\n   * _cacheable caches requests, not responses. It is expected that the cached data already exists\n   * in the Redux store. _cacheable just prevents making excessive API calls for data that we\n   * already have.\n   *\n   * @param  {String} name The name of the request being made\n   * @param  {String} [identifier=\"cache\"] Some identifier to compare to future requests.\n   * @param  {*}  [defaultData=[]] The data to return with if the request is cached.\n   * @return {Promise} Resolves with the defaultData if cached, or { continue: true } if not cached.\n   */\n  _cacheable(name, identifier = \"cache\", defaultData = []) {\n    // Retrieve the relevant cache entry\n    if (!this._cache[name]) {\n      this._cache[name] = [];\n    }\n    const relevantCacheGroup = this._cache[name];\n    let relevantIndex;\n    const relevantCache = relevantCacheGroup.find((cache, index) => {\n      if (cache.value === identifier) {\n        relevantIndex = index;\n        return true;\n      }\n      return false;\n    });\n\n    // Evaluat the cache\n    if (relevantCache) {\n      const cacheDuration = 10 * 60 * 1000; // 10 minutes\n      const currentTime = new Date().getTime();\n\n      if (relevantCache.cacheTime + cacheDuration >= currentTime) {\n        // Cache is not expired, so resolve.\n        return Promise.resolve({\n          data: defaultData\n        });\n      } else {\n        // Remove expired cache\n        relevantCacheGroup.splice(relevantIndex, 1);\n      }\n    }\n\n    // Allow the requst to be made, but store a record in cache.\n    relevantCacheGroup.push({\n      cacheTime: new Date().getTime(),\n      value: identifier\n    });\n\n    return Promise.resolve({ continue: true });\n  }\n\n  /**\n   * Activates a new account. When registering a new account, an email\n   * is sent to the user with a link to confirm their email address,\n   * activating their account.\n   * @param  {String} userId The ID of the user\n   * @param  {String} activationCode The activation code included in\n   * the email confirmation email\n   * @return {Promise}\n   */\n  activateAccount(userId, activationCode) {\n    return activateAccount.call(this, userId, activationCode);\n  }\n\n  /**\n   * Check if the user is already logged in based on session data.\n   * @return {Promise}\n   */\n  checkLoginStatus() {\n    return checkLoginStatus.call(this);\n  }\n\n  /**\n   * Log in to a KitePaint account.\n   * @param  {String}  username\n   * @param  {String}  password\n   * @return {Promise}\n   */\n  logIn(username, password) {\n    return logIn.call(this, username, password);\n  }\n\n  /**\n   * Logs out the user and destroys their session.\n   * @return {Promise}\n   */\n  logOut() {\n    return logOut.call(this);\n  }\n\n  /**\n   * Sends a request to register a new KitePaint account.\n   * @param  {Object}  data Must contain `{username, email, password, password2}`\n   * @return {Promise}\n   */\n  createAccount(data) {\n    return createAccount.call(this, data);\n  }\n\n  /**\n   * Sends a request to reset a user's password.\n   * @param  {String} username The username of the user to reset the password for.\n   * @param  {String} email The email address that is on the user's account.\n   * @return {Promise}\n   */\n  resetPassword(username, email) {\n    return resetPassword.call(this, username, email);\n  }\n\n  /**\n   * Changes the email address for the user's account\n   * @param  {String}  userId The user's id\n   * @param  {String}  newEmail The user's new email address\n   * @return {Promise}\n   */\n  changeEmail(userId, newEmail) {\n    return changeEmail.call(this, userId, newEmail);\n  }\n\n  /**\n   * Changes the user's password\n   * @param  {Onbject}  data Must contain string values: username, currentPassword,\n   * newPassword, and confirmNewPassword\n   * @return {Promise}\n   */\n  changePassword(data) {\n    return changePassword.call(this, data);\n  }\n\n  /**\n   * Triggers deletion of the specified account\n   * @param  {String}  id       The account's ID\n   * @param  {String}  password The account's password\n   * @return {Promise}\n   */\n  deleteAccount(id, password) {\n    return deleteAccount.call(this, id, password);\n  }\n\n  /**\n   * A cache for getUser requests to prevent making the same request repeatedlu.\n   * @private\n   */\n  _getUserCache = [];\n\n  /**\n   * Retrieves a user by ID\n   * @param  {String}  id\n   * @return {Promise} Resolves with the retrieved user\n   */\n  getUser(id, useCache = true) {\n    return getUser.call(this, id, useCache);\n  }\n\n  /**\n   * A cache for getDesigns requests to prevent making the same request repeatedly.\n   * @type {Array}\n   * @private\n   */\n  _getDesignsCache = [];\n\n  /**\n   * Get saved designs.\n   * @param  {Object}  [filter={}] A list of filters. See filterDefaults as an example.\n   * @param {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n   * requests will not be made within 10 minutes.\n   * @return {Promise}\n   */\n  getDesigns(filter = {}, useCache = true) {\n    return getDesigns.call(this, filter, useCache);\n  }\n\n  /**\n   * Retrieves the design with the specified id\n   * @param  {String}  id\n   * @param {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n   * requests will not be made within 10 minutes.\n   * @return {Promise} resolves with the retrieved design\n   */\n  getDesign(id, useCache = true) {\n    return getDesign.call(this, id, useCache);\n  }\n\n  /**\n   * A cache for getProducts to prevent making the same request repeatedly.\n   * @type {Array}\n   * @private\n   */\n  _getProductsCache = [];\n\n  /**\n   * Get all products.\n   * @param  {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n   * requests will not be made within 10 minutes.\n   * @return {Promise}\n   */\n  getProducts(useCache = true) {\n    return getProducts.call(this, useCache);\n  }\n\n  /**\n   * A cache for getManufacturers to prevent making the same request repeatedly.\n   * @type {Array}\n   * @private\n   */\n  _getManufacturersCache = [];\n\n  /**\n   * Get all manufacturers.\n   * @param  {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n   * requests will not be made within 10 minutes.\n   * @return {Promise}\n   */\n  getManufacturers(useCache = true) {\n    return getManufacturers.call(this, useCache);\n  }\n\n  /**\n   * Creates a new design based on the provided data.\n   * @param  {Object}  designData Should contain name, user, product, and variations\n   * @return {Promise} Resolves with an object that contains an id property of the new design.\n   */\n  createDesign(designData) {\n    return createDesign.call(this, designData);\n  }\n\n  /**\n   * Update an existing design\n   * @param  {Object}  designData\n   * @return {Promise}\n   */\n  updateDesign(designData) {\n    return updateDesign.call(this, designData);\n  }\n\n  /**\n   * Deletes the design with the specified ID.\n   * @param  {String}  designId\n   * @return {Promise}\n   */\n  deleteDesign(designId) {\n    return deleteDesign.call(this, designId);\n  }\n}\n\nexport default new KitePaintApi();\n","import { createAction } from \"redux-actions\";\n\n/**\n * Create a dispatchable action that runs an async process.\n * Reducers can be tied to the REQUESTED, RECEIVED, or FAILED actions on the returned asyncAction.\n * @param  {String} actionType The name of the action\n * @param  {Function} request The async process to run\n * @return {Function} A dispatchable action\n */\nexport default function createAsyncAction(actionType, request) {\n  const ACTION_REQUESTED = createAction(`${actionType}.REQUESTED`);\n  const ACTION_RECEIVED = createAction(`${actionType}.RECEIVED`);\n  const ACTION_FAILED = createAction(`${actionType}.FAILED`);\n\n  function asyncAction(...args) {\n    return dispatch => {\n      dispatch(asyncAction.REQUESTED());\n\n      const promise = request(...args);\n      promise.then(payload => {\n        dispatch(asyncAction.RECEIVED(payload));\n      });\n      promise.catch(payload => {\n        dispatch(asyncAction.FAILED(payload));\n      });\n      return promise;\n    };\n  }\n\n  asyncAction.REQUESTED = ACTION_REQUESTED;\n  asyncAction.RECEIVED = ACTION_RECEIVED;\n  asyncAction.FAILED = ACTION_FAILED;\n\n  return asyncAction;\n}\n","import { createAction } from \"redux-actions\";\nimport KitePaintApi from \"../api/KitePaintApi\";\nimport createAsyncAction from \"./createAsyncAction\";\n\n/**\n * Check if the user is already logged in.\n */\nexport const CHECK_LOGIN = createAsyncAction(\"CHECK_LOGIN\", () => {\n  return KitePaintApi.checkLoginStatus();\n});\n\n/**\n * Log in to a KitePaint account.\n * @param {String} username\n * @param {String} password\n */\nexport const LOG_IN = createAsyncAction(\"LOG_IN\", (username, password) => {\n  return KitePaintApi.logIn(username, password);\n});\n\n/**\n * Log out the current user.\n */\nexport const LOG_OUT = createAsyncAction(\"LOG_OUT\", () => {\n  return KitePaintApi.logOut();\n});\n\n/**\n * Register for a new KitePaint account.\n * @param {Object} data Must contain {username, email, password, password2}\n */\nexport const CREATE_ACCOUNT = createAsyncAction(\"CREATE_ACCOUNT\", data => {\n  return KitePaintApi.createAccount(data);\n});\n\n/**\n * Reset a user's password.\n * @param {String} username\n * @param {String} email\n */\nexport const RESET_PASSWORD = createAsyncAction(\n  \"RESET_PASSWORD\",\n  (username, email) => {\n    return KitePaintApi.resetPassword(username, email);\n  }\n);\n\n/**\n * Changes the email address for the user's account\n * @param  {String}  userId The user's id\n * @param  {String}  email The user's new email address\n * @return {Promise}\n */\nexport const CHANGE_EMAIL = createAsyncAction(\n  \"CHANGE_EMAIL\",\n  (userId, email) => {\n    return KitePaintApi.changeEmail(userId, email);\n  }\n);\n\n/**\n * Changes the user's password\n * @param  {Onbject}  data Must contain string values: username, currentPassword,\n * newPassword, and confirmNewPassword\n * @return {Promise}\n */\nexport const CHANGE_PASSWORD = createAsyncAction(\"CHANGE_PASSWORD\", data => {\n  return KitePaintApi.changePassword(data);\n});\n\n/**\n * Triggers deletion of the specified account\n * @param  {String}  id       The account's ID\n * @param  {String}  password The account's password\n * @return {Promise}\n */\nexport const DELETE_ACCOUNT = createAsyncAction(\n  \"DELETE_ACCOUNT\",\n  (id, password) => {\n    return KitePaintApi.deleteAccount(id, password);\n  }\n);\n\n/**\n * Set the isRecognizedUser local storage variable.\n * This indicates if the user is recognized as someone who has a registered account.\n * @param {Boolean} newValue\n */\nexport const SET_RECOGNIZED_USER = createAction(\n  \"SET_RECOGNIZED_USER\",\n  newValue => {\n    localStorage.setItem(\"isRecognizedUser\", newValue);\n    return newValue;\n  }\n);\n\n/**\n * Retrieves designs from the KitePaintApi\n * @param {Object} [filters={}]\n * @param {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n * requests will not be made within 10 minutes.\n */\nexport const GET_DESIGNS = createAsyncAction(\n  \"GET_DESIGNS\",\n  (filters, useCache) => {\n    return KitePaintApi.getDesigns(filters, useCache);\n  }\n);\n\n/**\n * Retrieves a design with the given ID.\n * @param {String} id\n */\nexport const GET_DESIGN = createAsyncAction(\"GET_DESIGN\", id => {\n  return KitePaintApi.getDesign(id);\n});\n\n/**\n * Retrieves designs from the KitePaintApi\n * @param {Object} [filters={}]\n * @param {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n * requests will not be made within 10 minutes.\n */\nexport const GET_PRODUCTS = createAsyncAction(\"GET_PRODUCTS\", useCache => {\n  return KitePaintApi.getProducts(useCache);\n});\n\n/**\n * Retrieves designs from the KitePaintApi\n * @param {Object} [filters={}]\n * @param {Boolean} [useCache=true] If true, the request will be cached, and subsequent duplicate\n * requests will not be made within 10 minutes.\n */\nexport const GET_MANUFACTURERS = createAsyncAction(\n  \"GET_MANUFACTURERS\",\n  useCache => {\n    return KitePaintApi.getManufacturers(useCache);\n  }\n);\n\n/**\n * Retrieves a user by ID\n * @param {String} userId\n */\nexport const GET_USER = createAsyncAction(\"GET_USER\", userId => {\n  return KitePaintApi.getUser(userId);\n});\n\n/**\n * Triggers the creation of a new design based on the provided data.\n * @param {Object} designData\n */\nexport const CREATE_DESIGN = createAsyncAction(\"CREATE_DESIGN\", designData => {\n  return KitePaintApi.createDesign(designData);\n});\n\n/**\n * Triggers the update of an existing design using the provided data.\n * @param {Object} designData\n */\nexport const UPDATE_DESIGN = createAsyncAction(\"UPDATE_DESIGN\", designData => {\n  return KitePaintApi.updateDesign(designData);\n});\n\n/**\n * Triggers the deletion of a design. Resolves with the ID of the deleted design.\n * @param {String} designId\n */\nexport const DELETE_DESIGN = createAsyncAction(\"DELETE_DESIGN\", designId => {\n  return KitePaintApi.deleteDesign(designId).then(() => ({\n    data: {\n      id: designId\n    }\n  }));\n});\n","import { handleActions } from \"redux-actions\";\nimport { fromJS } from \"immutable\";\nimport {\n  SET_RECOGNIZED_USER,\n  LOG_IN,\n  CHECK_LOGIN,\n  LOG_OUT,\n  CHANGE_EMAIL,\n  DELETE_ACCOUNT\n} from \"../actions\";\n\nexport const defaultState = fromJS({\n  actcode: null,\n  firstName: null,\n  id: null,\n  isCheckingLogin: true,\n  isLoggedIn: false,\n  isLoggingIn: false,\n  isRecognizedUser: localStorage.getItem(\"isRecognizedUser\") === \"true\",\n  lastName: null,\n  username: null\n});\n\n/**\n * The reducer managing data about the user.\n */\nexport default handleActions(\n  {\n    [SET_RECOGNIZED_USER]: (state, action) => {\n      const isRecognizedUser = action.payload;\n      return state.set(\"isRecognizedUser\", isRecognizedUser);\n    },\n    [CHECK_LOGIN.REQUESTED]: state => {\n      return state.set(\"isCheckingLogin\", true);\n    },\n    [CHECK_LOGIN.RECEIVED]: (state, action) => {\n      const { data } = action.payload;\n      return state.merge({\n        actcode: data.actcode,\n        email: data.email,\n        firstName: data.first_name,\n        id: data.user_id,\n        isLoggedIn: data.logged_in,\n        isCheckingLogin: false,\n        lastName: data.last_name,\n        username: data.username\n      });\n    },\n    [CHECK_LOGIN.FAILED]: state => {\n      return state.set(\"isCheckingLogin\", false);\n    },\n    [LOG_IN.REQUESTED]: state => {\n      return state.set(\"isLoggingIn\", true);\n    },\n    [LOG_IN.RECEIVED]: (state, action) => {\n      const { data } = action.payload;\n      return state.merge({\n        actcode: data.actcode,\n        email: data.email,\n        firstName: data.first_name,\n        id: data.user_id,\n        isLoggedIn: data.logged_in,\n        isLoggingIn: false,\n        lastName: data.last_name,\n        username: data.username\n      });\n    },\n    [LOG_IN.FAILED]: state => {\n      return state.set(\"isLoggingIn\", false);\n    },\n    [LOG_OUT.RECEIVED]: state => {\n      return state.merge({\n        actcode: null,\n        email: null,\n        firstName: null,\n        id: null,\n        isLoggedIn: false,\n        lastName: null,\n        username: null\n      });\n    },\n    [CHANGE_EMAIL.RECEIVED]: (state, action) => {\n      return state.set(\"email\", action.payload.data.email);\n    },\n    [DELETE_ACCOUNT.RECEIVED]: state => {\n      return state.merge({\n        actcode: null,\n        email: null,\n        firstName: null,\n        id: null,\n        isLoggedIn: false,\n        lastName: null,\n        username: null\n      });\n    }\n  },\n  defaultState\n);\n\n/**\n * Get all the user data.\n * @param  {Map} state\n * @return {Object} The user data\n */\nexport const getUser = state => {\n  const user = state.get(\"user\");\n  return {\n    email: user.get(\"email\"),\n    id: user.get(\"id\"),\n    isLoggedIn: user.get(\"isLoggedIn\"),\n    isLoggingIn: user.get(\"isLoggingIn\"),\n    username: user.get(\"username\")\n  };\n};\n\n/**\n * Retrieves the isRecognizedUser variable. This indicates if the user is recognized as someone\n * who has a registered account.\n * @param  {Map} state\n * @return {Boolean}\n */\nexport const getUserRecognition = state =>\n  state.getIn([\"user\", \"isRecognizedUser\"]);\n\n/**\n * Indicates if we are currently checking the user's login.\n * @param  {Map} state\n * @return {Boolean}\n */\nexport const getCheckingLogin = state =>\n  state.getIn([\"user\", \"isCheckingLogin\"]);\n","import { getQueryParams } from \"../utils\";\n\n// Determines if the application is currently embedded\nfunction inIframe() {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n}\n\nconst queryParams = getQueryParams();\n\nexport const isEmbedded = inIframe();\nexport const externalCss = isEmbedded ? queryParams[\"css-url\"] : null;\nexport const defaultBackground = isEmbedded ? queryParams.background : null;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport { getUser, getUserRecognition } from \"../redux/modules/user\";\nimport { SET_RECOGNIZED_USER, LOG_OUT } from \"../redux/actions\";\n\n/**\n * Provides information and actions about/for the current user.\n */\nexport class UserContainer extends React.Component {\n  static propTypes = {\n    /**\n     * A function that renders content\n     */\n    children: PropTypes.func.isRequired,\n    /**\n     * Is the current user recognized as one with an account? Provided by redux.\n     */\n    isRecognizedUser: PropTypes.bool,\n    /**\n     * Details about the current user. Provided by redux.\n     */\n    user: PropTypes.shape({\n      email: PropTypes.string,\n      id: PropTypes.string,\n      isLoggedIn: PropTypes.bool,\n      isLoggingIn: PropTypes.bool,\n      username: PropTypes.string\n    }),\n    /**\n     * A function called to log out the current user. Provided by Redux.\n     */\n    onLogOut: PropTypes.func.isRequired,\n    /**\n     * A function called to indicate if the user is recognized or not. Provided by Redux.\n     */\n    onSetRecognition: PropTypes.func.isRequired,\n    /** Called when this component triggers a redirect. Mostly used for testing */\n    onRedirect: PropTypes.func\n  };\n\n  static defaultProps = {\n    onRedirect: () => {}\n  };\n\n  state = {\n    // When true, a <Redirect> element should be rendered to redirect to the home page.\n    redirect: false\n  };\n\n  /**\n   * Toggles the variable in state and in local storage\n   */\n  toggleRecognition = () => {\n    const { isRecognizedUser } = this.props;\n    this.props.onSetRecognition(!isRecognizedUser);\n  };\n\n  /** Sets isRecognizedUser to the given value */\n  setRecognition = value => this.props.onSetRecognition(value);\n\n  // Handle when the user requests to log out\n  handleLogOut = () => {\n    return this.props.onLogOut().then(() => {\n      // Turn on the redirect\n      this.setState(\n        {\n          redirect: true\n        },\n\n        // Turn the redirect back off\n        () =>\n          this.setState({\n            redirect: false\n          })\n      );\n    });\n  };\n\n  buildRedirect = () => {\n    this.props.onRedirect();\n    return <Redirect to=\"/\" />;\n  };\n\n  render() {\n    if (this.state.redirect) {\n      return this.buildRedirect();\n    }\n    const { email, id, isLoggedIn, isLoggingIn, username } = this.props.user;\n    return this.props.children({\n      actions: {\n        logOut: this.handleLogOut,\n        toggleRecognition: this.toggleRecognition,\n        setRecognition: this.setRecognition\n      },\n      props: {\n        email,\n        id,\n        isLoggedIn,\n        isLoggingIn,\n        isRecognizedUser: this.props.isRecognizedUser,\n        username\n      }\n    });\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: getUser(state),\n  isRecognizedUser: getUserRecognition(state)\n});\n\nconst mapDispatchToProps = {\n  onLogOut: LOG_OUT,\n  onSetRecognition: SET_RECOGNIZED_USER\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(UserContainer);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { isEmbedded } from \"../../constants/embed\";\nimport { A, P } from \"../../theme\";\n\nexport const StyleWrapper = styled.footer`\n  text-align: center;\n  border-top: 1px solid ${props => props.theme.colors.grayDark}\n  padding: 8px;\n  background: ${props => props.theme.colors.grayDarker}\n  position: relative;\n`;\n\n/**\n * The footer displayed at the bottom of every page.\n */\nconst Footer = props => (\n  <StyleWrapper {...props}>\n    <P isLight>\n      {isEmbedded ? (\n        <React.Fragment>\n          Powered by{\" \"}\n          <A href=\"https://kitepaint.com\" target=\"_blank\">\n            KitePaint\n          </A>\n        </React.Fragment>\n      ) : (\n        <React.Fragment>\n          &copy; {new Date().getFullYear()}{\" \"}\n          <A href=\"http://wattydev.com\" target=\"_blank\">\n            Spencer Watson\n          </A>\n        </React.Fragment>\n      )}\n    </P>\n  </StyleWrapper>\n);\n\nexport default Footer;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport UserContainer from \"../../containers/UserContainer\";\nimport { A, H2, Icon, Dropdown } from \"../../theme\";\nimport { TypographyStyles } from \"../../theme/Text\";\n\nexport const StyleWrapper = styled.header`\n  background: ${({ theme }) => theme.colors.silver};\n  height: 48px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  padding: 0 8px;\n  box-shadow: 0 0 1px ${({ theme }) => theme.colors.black};\n  position: relative;\n  box-sizing: border-box;\n  z-index: 3;\n\n  .left,\n  .right {\n    display: flex;\n    algin-items: center;\n    flex-grow: 1;\n  }\n  .right {\n    align-items: stretch;\n    justify-content: flex-end;\n    height: 100%;\n  }\n`;\n\nconst NavLink = styled.div`\n  ${TypographyStyles};\n  display: block;\n  color: ${props => props.theme.colors.black};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 40px;\n  text-align: center;\n  padding: 8px;\n  text-decoration: none;\n  background-image: linear-gradient(\n    180deg,\n    ${props => props.theme.colors.silver},\n    ${props => props.theme.colors.silver},\n    ${props => props.theme.colors.gray},\n    ${props => props.theme.colors.gray}\n  );\n  background-size: 400% 400%;\n  background-position: 50% 0%;\n  transition: 0.5s background-position;\n  cursor: pointer;\n  height: 100%;\n  box-sizing: border-box;\n\n  &:hover {\n    background-position: 50% 35%;\n  }\n  .dropdown-arrow {\n    margin-left: 4px;\n  }\n`;\n\n/**\n * The header at the top of the application.\n */\nconst Header = () => (\n  <StyleWrapper>\n    <div className=\"left\">\n      <H2>\n        <A as={Link} to=\"/\">\n          KitePaint\n        </A>\n      </H2>\n    </div>\n    <div className=\"right\">\n      <NavLink as={Link} to=\"/\">\n        <Icon icon=\"home\" />\n      </NavLink>\n      <NavLink as={Link} to=\"/about\">\n        About\n      </NavLink>\n      <NavLink as={Link} to=\"/create\">\n        Create\n      </NavLink>\n      <UserContainer>\n        {userData =>\n          userData.props.isLoggedIn ? (\n            <Dropdown\n              className=\"testing_account-dropdown\"\n              dropdownContent={accountDropdown => (\n                <React.Fragment>\n                  <accountDropdown.components.Item\n                    as={Link}\n                    to=\"/my-designs\"\n                    onClick={accountDropdown.actions.close}\n                  >\n                    My Designs\n                  </accountDropdown.components.Item>\n                  <accountDropdown.components.Item\n                    as={Link}\n                    to=\"/account\"\n                    onClick={accountDropdown.actions.close}\n                  >\n                    Manage Account\n                  </accountDropdown.components.Item>\n                  <accountDropdown.components.Spacer />\n                  <accountDropdown.components.Item\n                    onClick={userData.actions.logOut}\n                  >\n                    Sign Out\n                  </accountDropdown.components.Item>\n                </React.Fragment>\n              )}\n            >\n              {accountDropdown => (\n                <NavLink\n                  onClick={\n                    accountDropdown.props.isOpen\n                      ? accountDropdown.actions.close\n                      : accountDropdown.actions.open\n                  }\n                >\n                  {userData.props.username}\n                  <Icon className=\"dropdown-arrow\" icon=\"angle-down\" />\n                </NavLink>\n              )}\n            </Dropdown>\n          ) : (\n            <NavLink\n              onClick={() => userData.actions.setRecognition(true)}\n              as={Link}\n              to={{\n                pathname: \"/login\",\n                search: `?url=${encodeURIComponent(window.location.href)}`\n              }}\n            >\n              Log In\n            </NavLink>\n          )\n        }\n      </UserContainer>\n    </div>\n  </StyleWrapper>\n);\n\nexport default Header;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport { isEmbedded, externalCss } from \"../constants/embed\";\n\nconst EmbeddedCss = ({ _isEmbedded, _externalCss }) => {\n  if (!_isEmbedded || !_externalCss) {\n    return null;\n  }\n  return ReactDOM.createPortal(\n    <link rel=\"stylesheet\" type=\"text/css\" href={externalCss} />,\n    document.querySelector(\"head\")\n  );\n};\n\nEmbeddedCss.defaultProps = {\n  _isEmbedded: isEmbedded,\n  _externalCss: externalCss\n};\n\nEmbeddedCss.propTypes = {\n  _isEmbedded: PropTypes.bool,\n  _externalCss: PropTypes.string\n};\n\nexport default EmbeddedCss;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { getAssetUrl } from \"../utils\";\nimport { H1, P } from \"../theme\";\n\nexport const StyleWrapper = styled.div`\n  text-align: center;\n  min-height: calc(100vh - 50px);\n  background: url(${getAssetUrl(\"/errorBackground.jpg\")});\n  background-size: cover;\n  background-repeat: none;\n  position: relative;\n  padding-top: 10%;\n  box-sizing: border-box;\n  &:before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: ${props => props.theme.colors.white};\n    opacity: 0.6;\n  }\n\n  h1 {\n    display: block;\n    margin: 0 auto;\n    width: 100px;\n    height: 100px;\n    background: ${props => props.theme.colors.black};\n    color: ${props => props.theme.colors.silver};\n    border-radius: 50%;\n    line-height: 100px;\n    position: relative;\n    margin-bottom: 16px;\n  }\n\n  p {\n    position: relative;\n  }\n`;\n\nconst ErrorPage = ({ errorCode, errorMessage }) => (\n  <StyleWrapper>\n    <H1>{errorCode}</H1>\n    <P>{errorMessage}</P>\n  </StyleWrapper>\n);\n\nErrorPage.defaultProps = {\n  errorCode: 404,\n  errorMessage: \"Page not found\"\n};\n\nErrorPage.propTypes = {\n  errorCode: PropTypes.number.isRequired,\n  errorMessage: PropTypes.string.isRequired\n};\n\nexport default ErrorPage;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Route } from \"react-router-dom\";\nimport { isEmbedded } from \"../constants/embed\";\nimport ErrorPage from \"./ErrorPage\";\n\n/**\n * A route that cannot be accessed when embedding.\n */\nconst RestrictedRoute = ({ _isEmbedded, ...props }) => {\n  if (_isEmbedded) {\n    return (\n      <ErrorPage\n        errorCode={401}\n        errorMessage=\"Embedding of this page is not permitted.\"\n      />\n    );\n  }\n  return <Route {...props} />;\n};\n\nRestrictedRoute.defaultProps = {\n  _isEmbedded: isEmbedded\n};\n\nRestrictedRoute.propTypes = {\n  _isEmbedded: PropTypes.bool\n};\n\nexport default RestrictedRoute;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withRouter } from \"react-router-dom\";\n\n/**\n * Generates an object from a query parameter string\n * @param  {String} queryParams Something like foo=bar&bar=foo\n * @return {Object}\n */\nconst generateObjectFromQueryParams = queryParams => {\n  return queryParams.split(\"&\").reduce((accumulated, param) => {\n    const [key, value] = param.split(\"=\");\n    accumulated[key] = value;\n    return accumulated;\n  }, {});\n};\n\n/**\n * Provides redirection from old Angular URLs to new urls.\n */\nexport class LegacyRedirect extends React.Component {\n  static propTypes = {\n    /** The history object provided by react-router-dom */\n    history: PropTypes.shape({\n      push: PropTypes.func.isRequired,\n      location: PropTypes.shape({\n        hash: PropTypes.string\n      })\n    }).isRequired\n  };\n\n  constructor(props, ...rest) {\n    super(props, ...rest);\n    // Check for a path intended for the old Angular application\n    const legacyPath = props.history.location.hash.replace(\"#!/\", \"\");\n\n    // If no legacy path exists, we're done here.\n    if (!legacyPath) {\n      return;\n    }\n\n    // Define how the legacy paths map to the new paths\n    const redirectRules = [\n      {\n        from: \"about\",\n        to: \"/about\"\n      },\n      {\n        from: \"account\",\n        to: \"/my-designs\"\n      },\n      {\n        from: \"create\",\n        to: \"/create\"\n      },\n      {\n        from: \"activate?uid=:userId&actcode=:activationCode\",\n        to: \"/activate/:userId/:activationCode\"\n      },\n      {\n        from: \"edit/new?id=:productId\",\n        to: \"/create/:productId\"\n      },\n      {\n        from: \"designs\",\n        to: \"/designs\"\n      },\n      {\n        from: \"edit/saved?id=:designId\",\n        to: \"/edit/:designId\"\n      },\n      {\n        from: \"view?id=:designId\",\n        to: \"/view/:designId\"\n      }\n    ];\n\n    // redirectData will house the variables used in the path\n    let redirectData = {};\n\n    // Find the correct redirect rule\n    const relevantRedirectRule = redirectRules.find(rule => {\n      // If we have an exact match, use this rule\n      if (legacyPath === rule.from) {\n        return true;\n      }\n\n      // Separate the search (query parameters) from the rest of the path\n      const [path, search] = legacyPath.split(\"?\");\n      const [rulePath, ruleSearch] = rule.from.split(\"?\");\n\n      // If the base paths don't match, move on\n      if (path !== rulePath) {\n        return false;\n      }\n\n      // Generate Objects from the query parameters\n      const searchObject = generateObjectFromQueryParams(search);\n      const ruleSearchObject = generateObjectFromQueryParams(ruleSearch);\n\n      // If the query parameter keys don't match our rule, move on\n      if (\n        Object.keys(searchObject).join() !==\n        Object.keys(ruleSearchObject).join()\n      ) {\n        return false;\n      }\n\n      // Map the legacy path's query parameter values to the variables used in the path definition\n      // ?id=123 + ?id=:testId = { testId: 123 }\n      redirectData = Object.keys(ruleSearchObject).reduce(\n        (accumulated, key) => {\n          const variableName = ruleSearchObject[key].replace(\":\", \"\");\n          accumulated[variableName] = searchObject[key];\n          return accumulated;\n        },\n        {}\n      );\n      return true;\n    });\n\n    // If we have no relevant rule, redirect to an error page\n    if (!relevantRedirectRule) {\n      props.history.push(\"/error\");\n      return;\n    }\n\n    // Build the string for rediretion using the relevant rule and the redirectData\n    const redirectTo = Object.keys(redirectData).reduce((accumulated, key) => {\n      return accumulated.replace(`:${key}`, redirectData[key]);\n    }, relevantRedirectRule.to);\n\n    // Redirect\n    props.history.push(redirectTo);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default withRouter(LegacyRedirect);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { H1, Spacer, P } from \"../../theme\";\n\nconst StyleWrapper = styled.div`\n  max-width: 1280px;\n  padding: 16px;\n  margin: 0 auto;\n`;\n\nconst About = () => (\n  <StyleWrapper>\n    <H1>About</H1>\n    <Spacer bottom=\"md\" />\n    <P>\n      I started creating KitePaint.com in 2014 as a pet project to experiment\n      with full stack development. At the time, I built it using AngularJS, but\n      I started rebuilding the front end in React in 2018. This site is an\n      experiment and a learning experience. While I am experimenting with these\n      technologies, I figured that I might as well make something useful.\n    </P>\n    <Spacer bottom=\"sm\" />\n    <P>\n      I created a colorizer application for{\" \"}\n      <a href=\"http://revkites.com\" rel=\"noopener noreferrer\" target=\"_blank\">\n        Revolution Kites\n      </a>{\" \"}\n      some time ago that serves as the initial inspiration for this site. I\n      wanted to expand on what I had made for Revolution, but make it bigger,\n      more fun, and more accessable for more people. I wanted all kite\n      manufactuers to have the ability to get their own colorizers for a\n      reasonable price. I wanted to make the custom kite ordering process easier\n      for consumers. So, this site is the result. It is built around the concept\n      of saving and sharing custom kite designs.\n    </P>\n    <Spacer bottom=\"sm\" />\n    <P>\n      For more information, view the project on{\" \"}\n      <a\n        href=\"https://github.com/WattyRev/static.kitepaint\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        GitHub\n      </a>\n      .\n    </P>\n    <Spacer bottom=\"sm\" />\n    <P>\n      Thanks for checking out KitePaint.com!\n      <br />- Spencer &quot;Watty&quot; Watson\n    </P>\n  </StyleWrapper>\n);\n\nexport default About;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { makeCancelable } from \"../utils\";\nimport { getUser } from \"../redux/modules/user\";\nimport {\n  CHANGE_EMAIL,\n  CHANGE_PASSWORD,\n  DELETE_ACCOUNT\n} from \"../redux/actions\";\n\n/**\n * A container that gets and manages data for the Account page.Z\n */\nexport class AccountContainer extends React.Component {\n  static propTypes = {\n    /**\n     * A function that renders content\n     */\n    children: PropTypes.func.isRequired,\n    /**\n     * Details about the current user. Provided by redux.\n     */\n    user: PropTypes.shape({\n      email: PropTypes.string,\n      id: PropTypes.string,\n      isLoggedIn: PropTypes.bool,\n      isLoggingIn: PropTypes.bool,\n      username: PropTypes.string\n    }).isRequired,\n    /**\n     * Called when a change of password is requested. Provided by redux.\n     */\n    onEmailChange: PropTypes.func.isRequired,\n    /**\n     * Called when a change of email is requested. Provided by redux.\n     */\n    onPasswordChange: PropTypes.func.isRequired,\n    /**\n     * Called when account deletion is requested. Provided by redux.\n     */\n    onDeleteAccount: PropTypes.func.isRequired\n  };\n\n  state = {\n    /**\n     * The value for the confirm new password field.\n     * @type {String}\n     */\n    confirmNewPassword: \"\",\n    /**\n     * The value for the current password field.\n     * @type {String}\n     */\n    currentPassword: \"\",\n    /**\n     * An error message explaining an error that occurred while deleting the acount.\n     * @type {String}\n     */\n    deleteError: null,\n    /**\n     * Is the user currently editing the email?\n     * @type {Boolean}\n     */\n    editingEmail: false,\n    /**\n     * Is the user currently editing the password?\n     * @type {Boolean}\n     */\n    editingPassword: false,\n    /**\n     * The value for the email field.\n     * @type {String}\n     */\n    email: \"\",\n    /**\n     * An error message explaining an error that occurred while updating the email address.\n     * @type {String}\n     */\n    emailError: null,\n    /**\n     * The value of the new password field.\n     * @type {String}\n     */\n    newPassword: \"\",\n    /**\n     * An error message explaining an error that occurred while updating the password.\n     * @type {String}\n     */\n    passwordError: null\n  };\n\n  /**\n   * Toggles the value of editingEmail while resetting some other values.\n   */\n  handleToggleEditEmail = () => {\n    this.setState({\n      emailError: null,\n      editingEmail: !this.state.editingEmail,\n      email: this.props.user.email\n    });\n  };\n\n  /**\n   * Toggles the value of editingPassword while resetting some other values.\n   */\n  handleToggleEditPassword = () => {\n    this.setState({\n      editingPassword: !this.state.editingPassword,\n      confirmNewPassword: \"\",\n      currentPassword: \"\",\n      newPassword: \"\",\n      passwordError: null\n    });\n  };\n\n  /**\n   * Handles a change to the email input\n   * @param  {String} email The newly typed email\n   */\n  handleEmailChange = email => {\n    this.setState({\n      emailError: null,\n      email\n    });\n  };\n\n  /**\n   * Handles a change to the current password input\n   * @param  {String} currentPassword\n   */\n  handleCurrentPasswordChange = currentPassword => {\n    this.setState({\n      currentPassword,\n      passwordError: null\n    });\n  };\n\n  /**\n   * Handles a change to the new password input\n   * @param  {String} newPassword\n   */\n  handleNewPasswordChange = newPassword => {\n    this.setState({\n      newPassword,\n      passwordError: null\n    });\n  };\n\n  /**\n   * Handles a change to the confirm new password input\n   * @param  {String} confirmNewPassword\n   */\n  handleConfirmNewPasswordChange = confirmNewPassword => {\n    this.setState({\n      confirmNewPassword,\n      passwordError: null\n    });\n  };\n\n  /**\n   * Submits the user provided email to change the email on the current account\n   */\n  handleSubmitEmail = () => {\n    let request;\n    // If the email was not changed, don't do anything, but behave as if it was\n    // successful.\n    if (this.state.email === this.props.user.email) {\n      request = makeCancelable(Promise.resolve());\n    } else {\n      request = makeCancelable(\n        this.props.onEmailChange(this.props.user.id, this.state.email)\n      );\n    }\n    this._requests.push(request);\n    return request.promise\n      .then(() => {\n        this.setState({\n          editingEmail: false\n        });\n      })\n      .catch(message => {\n        this.setState({\n          emailError: message\n        });\n      });\n  };\n\n  /**\n   * Submits the new password information to update the password for the current account.\n   */\n  handleSubmitPassword = () => {\n    const request = makeCancelable(\n      this.props.onPasswordChange({\n        username: this.props.user.username,\n        currentPassword: this.state.currentPassword,\n        newPassword: this.state.newPassword,\n        confirmNewPassword: this.state.confirmNewPassword\n      })\n    );\n    this._requests.push(request);\n    return request.promise\n      .then(() => {\n        this.setState({\n          editingPassword: false\n        });\n      })\n      .catch(message => {\n        this.setState({\n          passwordError: message\n        });\n      });\n  };\n\n  /**\n   * Triggers deletion of the current account using the provided password.\n   * @param  {String} password\n   */\n  handleDeleteAccount = password => {\n    const request = makeCancelable(\n      this.props.onDeleteAccount(this.props.user.id, password)\n    );\n    this._requests.push(request);\n    return request.promise.catch(message => {\n      this.setState({\n        deleteError: message\n      });\n    });\n  };\n\n  /**\n   * An array of cancelable promises to be canceled when the component unmounts\n   * @type {Array}\n   */\n  _requests = [];\n\n  componentWillUnmount() {\n    this._requests.forEach(request => request.cancel());\n  }\n\n  render() {\n    return this.props.children({\n      actions: {\n        changeEmail: this.handleEmailChange,\n        changeCurrentPassword: this.handleCurrentPasswordChange,\n        changeNewPassword: this.handleNewPasswordChange,\n        changeConfirmNewPassword: this.handleConfirmNewPasswordChange,\n        toggleEditEmail: this.handleToggleEditEmail,\n        toggleEditPassword: this.handleToggleEditPassword,\n        submitEmail: this.handleSubmitEmail,\n        submitPassword: this.handleSubmitPassword,\n        deleteAccount: this.handleDeleteAccount\n      },\n      props: {\n        confirmNewPassword: this.state.confirmNewPassword,\n        currentPassword: this.state.currentPassword,\n        deleteError: this.state.deleteError,\n        editingEmail: this.state.editingEmail,\n        editingPassword: this.state.editingPassword,\n        email: this.state.editingEmail\n          ? this.state.email\n          : this.props.user.email,\n        emailError: this.state.emailError,\n        newPassword: this.state.newPassword,\n        passwordError: this.state.passwordError,\n        user: this.props.user\n      }\n    });\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: getUser(state)\n});\n\nconst mapDispatchToProps = {\n  onEmailChange: CHANGE_EMAIL,\n  onPasswordChange: CHANGE_PASSWORD,\n  onDeleteAccount: DELETE_ACCOUNT\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(AccountContainer);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport { A, Button, Error, Input, Label, P, Spacer } from \"../../theme\";\n\nexport const StyledForm = styled.form`\n  padding: 8px;\n`;\n\n/**\n * A form for changing the current user's email address.\n */\nconst ChangeEmail = ({\n  editing,\n  email,\n  error,\n  onChangeEmail,\n  onSubmit,\n  onToggleEdit\n}) => (\n  <StyledForm\n    onSubmit={e => {\n      e.preventDefault();\n      onSubmit();\n    }}\n  >\n    <Label htmlFor=\"email-input\">\n      Email Address (\n      <A onClick={onToggleEdit}>{editing ? \"Cancel\" : \"Change\"}</A>)\n    </Label>\n    <Input\n      id=\"email-input\"\n      type=\"email\"\n      readOnly={!editing}\n      required={editing}\n      value={email}\n      onChange={e => onChangeEmail(e.target.value)}\n    />\n    {error && (\n      <Spacer top=\"sm\">\n        <Error>\n          <P className=\"testing_error\">{error}</P>\n        </Error>\n      </Spacer>\n    )}\n    {editing && (\n      <Button type=\"submit\" isPrimary>\n        Save Email\n      </Button>\n    )}\n  </StyledForm>\n);\n\nChangeEmail.propTypes = {\n  /** Indicates if the user is in edit mode and can change the email address. */\n  editing: PropTypes.bool,\n  /** The current value for the email address */\n  email: PropTypes.string,\n  /** An error that impacts the form */\n  error: PropTypes.string,\n  /** Called when the user changes the email address. Given the new value as the first param. */\n  onChangeEmail: PropTypes.func.isRequired,\n  /** Called when the form is submitted */\n  onSubmit: PropTypes.func.isRequired,\n  /** Called when the user wishes to toggle the editing state */\n  onToggleEdit: PropTypes.func.isRequired\n};\n\nChangeEmail.defaultProps = {\n  editing: false,\n  email: null,\n  error: null\n};\n\nexport default ChangeEmail;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport {\n  A,\n  Button,\n  Error,\n  Input,\n  Label,\n  P,\n  Spacer,\n  Tooltip\n} from \"../../theme\";\n\nexport const StyledForm = styled.form`\n  padding: 8px;\n`;\n\n/**\n * A form for changing the user's password.\n */\nconst ChangePassword = ({\n  confirmNewPassword,\n  currentPassword,\n  editing,\n  error,\n  newPassword,\n  onChangeConfirmNewPassword,\n  onChangeCurrentPassword,\n  onChangeNewPassword,\n  onSubmit,\n  onToggleEdit\n}) => (\n  <StyledForm\n    className=\"form-group\"\n    onSubmit={e => {\n      e.preventDefault();\n      onSubmit();\n    }}\n  >\n    <Label>\n      Password (<A onClick={onToggleEdit}>{editing ? \"Cancel\" : \"Change\"}</A>)\n    </Label>\n    {editing ? (\n      <React.Fragment>\n        <Label htmlFor=\"current-password\">Current Password</Label>\n        <Input\n          id=\"current-password\"\n          type=\"password\"\n          value={currentPassword}\n          onChange={e => onChangeCurrentPassword(e.target.value)}\n          required\n        />\n        <Label htmlFor=\"new-password\">\n          New Password{\" \"}\n          <Tooltip>\n            Passwords may be between 6-15 characters.\n            <br />\n            They may include these characters: a-z, A-Z, 0-9, #, @, or *.\n          </Tooltip>\n        </Label>\n        <Input\n          id=\"new-password\"\n          type=\"password\"\n          value={newPassword}\n          onChange={e => onChangeNewPassword(e.target.value)}\n          required\n        />\n        <Label htmlFor=\"confirm-password\">Confirm New Password</Label>\n        <Input\n          id=\"confirm-password\"\n          type=\"password\"\n          value={confirmNewPassword}\n          onChange={e => onChangeConfirmNewPassword(e.target.value)}\n          required\n        />\n        {error && (\n          <Spacer top=\"sm\">\n            <Error>\n              <P className=\"testing_error\">{error}</P>\n            </Error>\n          </Spacer>\n        )}\n        <Button type=\"submit\" isPrimary>\n          Save Password\n        </Button>\n      </React.Fragment>\n    ) : (\n      <Input\n        className=\"testing_mask\"\n        type=\"password\"\n        readOnly\n        defaultValue=\"********\"\n      />\n    )}\n  </StyledForm>\n);\n\nChangePassword.propTypes = {\n  /** The confirmed new password */\n  confirmNewPassword: PropTypes.string,\n  /** The user's current password */\n  currentPassword: PropTypes.string,\n  /** Are we currently in edit mode? */\n  editing: PropTypes.bool,\n  /** An error message that impacts this form */\n  error: PropTypes.string,\n  /** The new password */\n  newPassword: PropTypes.string,\n  /** Called when the confirmNewPassword value changes. Is provided\n   the new value as the first param */\n  onChangeConfirmNewPassword: PropTypes.func.isRequired,\n  /** Called when the currentPassword value changes. Is provided the\n   new value as the first param */\n  onChangeCurrentPassword: PropTypes.func.isRequired,\n  /** Called when the newPassword value changes. Is provided the new\n   value as the first param */\n  onChangeNewPassword: PropTypes.func.isRequired,\n  /** Called when the form is submitted */\n  onSubmit: PropTypes.func.isRequired,\n  /** Called when the user wishes to toggle the edit state */\n  onToggleEdit: PropTypes.func.isRequired\n};\n\nexport default ChangePassword;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Redirect } from \"react-router-dom\";\nimport AccountContainer from \"../../containers/AccountContainer\";\nimport {\n  Button,\n  Error,\n  H1,\n  H2,\n  ModalPrompt,\n  P,\n  Spacer,\n  Tile\n} from \"../../theme\";\nimport ChangeEmail from \"./ChangeEmail\";\nimport ChangePassword from \"./ChangePassword\";\n\nconst StyleWrapper = styled.div`\n  max-width: 1280px;\n  padding: 16px;\n  margin: 0 auto;\n\n  .form-group {\n    padding: 8px;\n  }\n`;\n\n/**\n * A coordinating component that builds up the Account page.\n */\nconst Account = () => (\n  <StyleWrapper>\n    <AccountContainer>\n      {accountData => (\n        <React.Fragment>\n          {!accountData.props.user.id && <Redirect to=\"/\" />}\n          <H1>Account Settings - {accountData.props.user.username}</H1>\n          <Spacer top=\"md\" bottom=\"md\">\n            <Tile>\n              <ChangeEmail\n                editing={accountData.props.editingEmail}\n                email={accountData.props.email}\n                error={accountData.props.emailError}\n                onChangeEmail={accountData.actions.changeEmail}\n                onSubmit={accountData.actions.submitEmail}\n                onToggleEdit={accountData.actions.toggleEditEmail}\n              />\n              <ChangePassword\n                confirmNewPassword={accountData.props.confirmNewPassword}\n                currentPassword={accountData.props.currentPassword}\n                editing={accountData.props.editingPassword}\n                error={accountData.props.passwordError}\n                newPassword={accountData.props.newPassword}\n                onChangeConfirmNewPassword={\n                  accountData.actions.changeConfirmNewPassword\n                }\n                onChangeCurrentPassword={\n                  accountData.actions.changeCurrentPassword\n                }\n                onChangeNewPassword={accountData.actions.changeNewPassword}\n                onSubmit={accountData.actions.submitPassword}\n                onToggleEdit={accountData.actions.toggleEditPassword}\n              />\n              <div className=\"form-group\">\n                <H2>Delete Account</H2>\n                <Spacer bottom=\"sm\" />\n                <P>Deleting your account cannot be undone.</P>\n                {accountData.props.deleteError && (\n                  <Spacer top=\"sm\">\n                    <Error>\n                      <P>{accountData.props.deleteError}</P>\n                    </Error>\n                  </Spacer>\n                )}\n                <ModalPrompt\n                  message=\"Please enter your password to confirm deletion of your account.\"\n                  submitText=\"Delete Account\"\n                  cancelText=\"Cancel\"\n                  onSubmit={accountData.actions.deleteAccount}\n                  inputType=\"password\"\n                >\n                  {modal => (\n                    <Button onClick={modal.actions.open}>Delete Account</Button>\n                  )}\n                </ModalPrompt>\n              </div>\n            </Tile>\n          </Spacer>\n        </React.Fragment>\n      )}\n    </AccountContainer>\n  </StyleWrapper>\n);\n\nexport default Account;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport makeCancelable from \"../utils/makeCancelable\";\nimport KitePaintApi from \"../api/KitePaintApi\";\n\n/**\n * Triggers activation of the user account and surfaces relevant data.\n * @type {Object}\n */\nexport default class ActivateContainer extends React.Component {\n  static propTypes = {\n    /** A function that returns renderable content */\n    children: PropTypes.func.isRequired,\n    /** The ID of the user being activated */\n    userId: PropTypes.string.isRequired,\n    /** The activation code for the user */\n    activationCode: PropTypes.string.isRequired\n  };\n\n  state = {\n    /** Is the activation request still pending */\n    isPending: true,\n    /** An error regarding the activation */\n    error: \"\"\n  };\n\n  componentDidMount() {\n    const cancelable = makeCancelable(\n      KitePaintApi.activateAccount(this.props.userId, this.props.activationCode)\n    );\n    this._cancelablePromises.push(cancelable);\n\n    cancelable.promise\n      .then(() => {\n        this.setState({\n          isPending: false\n        });\n      })\n      .catch(response => {\n        if (response && response.isCanceled) {\n          return;\n        }\n        this.setState({\n          isPending: false,\n          error: response\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    this._cancelablePromises.forEach(cancelable => cancelable.cancel());\n  }\n\n  _cancelablePromises = [];\n\n  render() {\n    return this.props.children({\n      props: {\n        isPending: this.state.isPending,\n        error: this.state.error\n      }\n    });\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport ActivateContainer from \"../../containers/ActivateContainer\";\nimport { Spacer, H1, P, Loading, Error } from \"../../theme\";\n\nconst StyleWrapper = styled.div`\n  max-width: 1280px;\n  padding: 16px;\n  margin: 0 auto;\n`;\n\nconst Activate = ({ match }) => (\n  <StyleWrapper>\n    <H1>Account Activation</H1>\n    <Spacer bottom=\"md\" />\n    <ActivateContainer\n      userId={match.params.userId}\n      activationCode={match.params.activationCode}\n    >\n      {activation => {\n        if (activation.props.isPending) {\n          return <Loading />;\n        }\n\n        if (activation.props.error) {\n          return (\n            <React.Fragment>\n              <P>Account activation was unsucccessful.</P>\n              <Spacer bottom=\"sm\" />\n              <Error>\n                <P>{activation.props.error}</P>\n              </Error>\n            </React.Fragment>\n          );\n        }\n\n        return (\n          <P className=\"testing_success\">Your account has been activated!</P>\n        );\n      }}\n    </ActivateContainer>\n  </StyleWrapper>\n);\n\nActivate.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      userId: PropTypes.string.isRequired,\n      activationCode: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired\n};\n\nexport default Activate;\n","import { handleActions } from \"redux-actions\";\nimport { fromJS } from \"immutable\";\nimport Status from \"../../models/Status\";\nimport { GET_PRODUCTS } from \"../actions\";\n\nexport const defaultState = fromJS({});\n\n/**\n * The reducer managing retrieved products.\n */\nexport default handleActions(\n  {\n    [GET_PRODUCTS.RECEIVED]: (state, action) => {\n      const { data } = action.payload;\n      const productsById = data.reduce((accumulated, product) => {\n        accumulated[product.get(\"id\")] = product;\n        return accumulated;\n      }, {});\n      return state.merge(productsById);\n    }\n  },\n  defaultState\n);\n\n/**\n * Gets all the public products stored in redux\n * @param  {Map} state\n * @param {String} groupBy A value to group the products by\n * @return {Object} Arrays of products indexed by the grouping value\n */\nexport const getPublicProductsGrouped = (state, groupBy) => {\n  const products = state.get(\"products\");\n  return products\n    .filter(product => product.get(\"status\") === Status.PUBLIC)\n    .toList()\n    .groupBy(product => product.get(groupBy))\n    .toJS();\n};\n\n/**\n * Retrieve a stored product based on the provided id\n * @param  {Map} state\n * @param  {String} id\n * @return {Object} the product\n */\nexport const getProductById = (state, id) => {\n  const products = state.get(\"products\");\n  const product = products.get(id, null);\n  return product;\n};\n\n/**\n * Gets all products indexed by ID\n * @param  {Map} state\n * @return {Object}\n */\nexport const getProductsWithIndex = state => {\n  return state.get(\"products\").toJS();\n};\n","import { handleActions } from \"redux-actions\";\nimport { fromJS } from \"immutable\";\nimport { GET_MANUFACTURERS } from \"../actions\";\n\nexport const defaultState = fromJS({});\n\n/**\n * The reducer managing retrieved manufacturers.\n */\nexport default handleActions(\n  {\n    [GET_MANUFACTURERS.RECEIVED]: (state, action) => {\n      const { data } = action.payload;\n      const manufacturersById = data.reduce((accumulated, manufacturer) => {\n        accumulated[manufacturer.get(\"id\")] = manufacturer;\n        return accumulated;\n      }, {});\n      return state.merge(manufacturersById);\n    }\n  },\n  defaultState\n);\n\n/**\n * Gets all the manufacturers stored in redux\n * @param  {Map} state\n * @return {Object[]} an array of manufacturers\n */\nexport const getManufacturers = state => {\n  const manufacturers = state.get(\"manufacturers\");\n  return manufacturers\n    .sort((manA, manB) => {\n      const aName = manA.get(\"name\");\n      const bName = manB.get(\"name\");\n      if (aName > bName) {\n        return 1;\n      }\n      if (aName < bName) {\n        return -1;\n      }\n      return 0;\n    })\n    .toList()\n    .toJS();\n};\n\n/**\n * Retreives the stored manufacturer based on the provided product id\n * @param  {Map} state\n * @param  {String} productId\n * @return {Object} The manufacturer\n */\nexport const getManufacturerByProductId = (state, productId) => {\n  const product = state.getIn([\"products\", productId]);\n  if (!product) {\n    return null;\n  }\n\n  const manufacturerId = product.get(\"manufacturer\");\n  const manufacturer = state.getIn([\"manufacturers\", manufacturerId]);\n  return manufacturer || null;\n};\n\n/**\n * Gets the stored manufacturers indexed by idea\n * @param  {Map} state\n * @return {Object}\n */\nexport const getManufacturersWithIndex = state => {\n  return state.get(\"manufacturers\").toJS();\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { getPublicProductsGrouped } from \"../redux/modules/products\";\nimport { getManufacturers } from \"../redux/modules/manufacturers\";\nimport { GET_PRODUCTS, GET_MANUFACTURERS } from \"../redux/actions\";\nimport Product from \"../models/Product\";\nimport Manufacturer from \"../models/Manufacturer\";\nimport { makeCancelable } from \"../utils\";\n\n/**\n * Provides information and actions about/for Designs.\n */\nexport class ProductsContainer extends React.Component {\n  static propTypes = {\n    /**\n     * A function returning content to be rendered\n     */\n    children: PropTypes.func.isRequired,\n    /**\n     * The products indexed by manufacturer id.\n     */\n    products: PropTypes.objectOf(\n      PropTypes.arrayOf(PropTypes.instanceOf(Product)).isRequired\n    ).isRequired,\n    /**\n     * A list of manufacturers\n     */\n    manufacturers: PropTypes.arrayOf(PropTypes.instanceOf(Manufacturer))\n      .isRequired,\n    /**\n     * A function to trigger the retreival of the products. This should update the redux state,\n     * causing products to be provided through redux.\n     */\n    getProducts: PropTypes.func.isRequired,\n    /**\n     * A function to trigger the retreival of the manufacturers. This should update the redux state,\n     * causing manufacturers to be provided through redux.\n     */\n    getManufacturers: PropTypes.func.isRequired\n  };\n\n  state = {\n    isLoading: true\n  };\n\n  componentDidMount() {\n    const productRequest = makeCancelable(this.props.getProducts());\n    const manufacturerRequest = makeCancelable(this.props.getManufacturers());\n    this.cancelablePromises.push(productRequest);\n    this.cancelablePromises.push(manufacturerRequest);\n    Promise.all([productRequest.promise, manufacturerRequest.promise])\n      .then(() => {\n        this.setState({\n          isLoading: false\n        });\n      })\n      .catch(() => {\n        this.setState({\n          isLoading: false\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    this.cancelablePromises.forEach(cancelable => cancelable.cancel());\n  }\n\n  cancelablePromises = [];\n\n  render() {\n    return this.props.children({\n      props: {\n        isLoading: this.state.isLoading,\n        products: this.props.products || {},\n        manufacturers: this.props.manufacturers || []\n      }\n    });\n  }\n}\n\nconst mapStateToProps = state => ({\n  products: getPublicProductsGrouped(state, \"manufacturer\"),\n  manufacturers: getManufacturers(state)\n});\n\nconst mapDispatchToProps = {\n  getProducts: GET_PRODUCTS,\n  getManufacturers: GET_MANUFACTURERS\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProductsContainer);\n","import styled from \"styled-components\";\n\n/**\n * An element that displays an image to represent a manufacturer. Use this like an image tag.\n */\nconst ManufacturerLogo = styled.div`\n  background-image: url(${props => props.src});\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  display: block;\n  width: ${props => props.size || 70}px;\n  height: ${props => props.size || 70}px;\n  margin: ${props => (props.noMargin ? 0 : \"8px 8px 0 0\")};\n  border: 1px solid ${props => props.theme.colors.gray};\n  border-radius: 4px;\n  box-sizing: border-box;\n  background-color: ${props => props.theme.colors.white};\n`;\n\nexport default ManufacturerLogo;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport Manufacturer from \"../../models/Manufacturer\";\nimport { H3, A, P, Tile } from \"../../theme\";\nimport { getAssetUrl } from \"../../utils\";\nimport ManufacturerLogo from \"../ManufacturerLogo\";\n\n/**\n * A general wrapper for the showcase. Gives it the border and the light background\n */\nexport const StyleWrapper = styled(Tile)`\n  padding: 8px;\n`;\n\n/**\n * A wrapper for the layout of the heading\n */\nconst HeadingWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\n/**\n * Displays a showcase UI for the specified manufacturer.\n */\nconst ManufacturerShowcase = ({ manufacturer, children }) => (\n  <StyleWrapper>\n    <HeadingWrapper>\n      <ManufacturerLogo\n        src={getAssetUrl(`/logos/${manufacturer.get(\"logo\")}`)}\n      />\n      <div>\n        <H3>{manufacturer.get(\"name\")}</H3>\n        {manufacturer.get(\"website\") && (\n          <P className=\"testing_website\">\n            <A href={manufacturer.get(\"website\")} target=\"_blank\">\n              {manufacturer.get(\"website\")}\n            </A>\n          </P>\n        )}\n      </div>\n    </HeadingWrapper>\n    {children}\n  </StyleWrapper>\n);\n\nManufacturerShowcase.propTypes = {\n  /**\n   * The manufacturer being showcased\n   */\n  manufacturer: PropTypes.instanceOf(Manufacturer).isRequired,\n\n  /**\n   * Content to display within the showcase\n   */\n  children: PropTypes.node\n};\n\nexport default ManufacturerShowcase;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n/**\n * Displays a div containing the provided SVG content\n */\nconst Svg = ({ svg, ...props }) => (\n  <div {...props} dangerouslySetInnerHTML={{ __html: svg }} />\n);\n\nSvg.propTypes = {\n  /**\n   * The SVG to be displayed inside the div\n   */\n  svg: PropTypes.node.isRequired\n};\n\nexport default Svg;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport Product from \"../../models/Product\";\nimport { H3 } from \"../../theme\";\nimport Svg from \"../Svg\";\n\n/**\n * Provides styling for the showcase\n */\nexport const StyleWrapper = styled.div`\n  flex-basis: 500px;\n  margin: 8px;\n  flex-shrink: 1;\n  border: 1px solid ${props => props.theme.colors.gray};\n  border-radius: 4px;\n  ${props => props.theme.patterns.transparencyBackground};\n  cursor: pointer;\n  position: relative;\n  display: flex;\n  padding: 36px 8px 8px;\n  flex-wrap: wrap;\n  align-items: middle;\n  justify-content: space-around;\n\n  .product-heading {\n    background: ${props => props.theme.colors.white};\n    border-bottom: 1px solid ${props => props.theme.colors.gray};\n    text-align: center;\n    padding: 4px 0;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n  }\n  .preview {\n    width: 50%;\n    flex-grow: 1;\n    padding: 8px;\n    box-sizing: border-box;\n    transition: 0.6s transform;\n\n    &.count-2 {\n      width: 100%;\n    }\n    > svg {\n      height: 100%;\n      width: 100%;\n    }\n  }\n  &:hover {\n    .preview {\n      transform: translateY(-15px);\n    }\n  }\n`;\n\n/**\n * A preview of a specific product, which links to the create page for that product.\n */\nconst ProductShowcase = ({ product }) => (\n  <StyleWrapper as={Link} to={`/create/${product.get(\"id\")}`}>\n    <H3 className=\"product-heading\">{product.get(\"name\")}</H3>\n    {product.get(\"variations\").map(variation => (\n      <Svg\n        className={`preview count-${product.get(\"variations\").length}`}\n        key={variation.id}\n        svg={variation.svg}\n      />\n    ))}\n  </StyleWrapper>\n);\n\nProductShowcase.propTypes = {\n  /**\n   * The product being showcased\n   */\n  product: PropTypes.instanceOf(Product).isRequired\n};\n\nexport default ProductShowcase;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { H1, P, Spacer, PageLoader } from \"../../theme\";\nimport ProductsContainer from \"../../containers/ProductsContainer\";\nimport ManufacturerShowcase from \"./ManufacturerShowcase\";\nimport ProductShowcase from \"./ProductShowcase\";\n\n/**\n * General styling for the create page\n */\nconst StyleWrapper = styled.div`\n  margin: 0 auto;\n  max-width: 1280px;\n\n  .products-wrapper {\n    display: flex;\n    margin: 8px 0 24px;\n    justify-content: space-around;\n  }\n  .heading {\n    padding: 8px 16px;\n  }\n`;\n\n/**\n * A coordinating component that builds the /create page.\n */\nconst Create = () => (\n  <StyleWrapper>\n    <div className=\"heading\">\n      <H1>Create</H1>\n      <P>Select a kite that you want to design</P>\n    </div>\n    <ProductsContainer>\n      {productsData => (\n        <React.Fragment>\n          {productsData.props.isLoading ? (\n            <PageLoader />\n          ) : (\n            productsData.props.manufacturers.map(manufacturer => {\n              const products =\n                productsData.props.products[manufacturer.get(\"id\")];\n              if (!products || !products.length) {\n                return null;\n              }\n              return (\n                <Spacer key={manufacturer.get(\"id\")} bottom=\"md\">\n                  <ManufacturerShowcase manufacturer={manufacturer}>\n                    <div className=\"products-wrapper\">\n                      {products.map(product => (\n                        <ProductShowcase\n                          product={product}\n                          key={product.get(\"id\")}\n                        />\n                      ))}\n                    </div>\n                  </ManufacturerShowcase>\n                </Spacer>\n              );\n            })\n          )}\n        </React.Fragment>\n      )}\n    </ProductsContainer>\n  </StyleWrapper>\n);\n\nexport default Create;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { getProductById } from \"../redux/modules/products\";\nimport { getManufacturerByProductId } from \"../redux/modules/manufacturers\";\nimport { GET_PRODUCTS, GET_MANUFACTURERS } from \"../redux/actions\";\nimport Product from \"../models/Product\";\nimport Manufacturer from \"../models/Manufacturer\";\nimport { makeCancelable } from \"../utils\";\n\n/**\n * Provides information about a specific product.\n */\nexport class CreateNewContainer extends React.Component {\n  static propTypes = {\n    /**\n     * The ID of the product to get information about.\n     */\n    productId: PropTypes.string.isRequired,\n    /**\n     * The product. Provided by redux.\n     */\n    product: PropTypes.instanceOf(Product),\n    /**\n     * The manufactuer of the product. Provided by redux.\n     */\n    manufacturer: PropTypes.instanceOf(Manufacturer),\n    /**\n     * A function to request the product be fetched. Provided by redux.\n     */\n    onRequestProduct: PropTypes.func.isRequired,\n    /**\n     * A function to request the manufacturer of the product be fetched. Provided by redux.\n     */\n    onRequestManufacturer: PropTypes.func.isRequired,\n    /**\n     * A function that returns the content to be rendered.\n     */\n    children: PropTypes.func.isRequired\n  };\n\n  state = {\n    isLoading: true\n  };\n\n  componentDidMount() {\n    const productRequest = makeCancelable(this.props.onRequestProduct());\n    const manufacturerRequest = makeCancelable(\n      this.props.onRequestManufacturer()\n    );\n    this.cancelablePromises.push(productRequest);\n    this.cancelablePromises.push(manufacturerRequest);\n    Promise.all([productRequest.promise, manufacturerRequest.promise])\n      .then(() => {\n        this.setState({\n          isLoading: false\n        });\n      })\n      .catch(() => {\n        this.setState({\n          isLoading: false\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    this.cancelablePromises.forEach(cancelable => cancelable.cancel());\n  }\n\n  cancelablePromises = [];\n\n  render() {\n    return this.props.children({\n      props: {\n        isLoading: this.state.isLoading,\n        product: this.props.product,\n        manufacturer: this.props.manufacturer\n      }\n    });\n  }\n}\n\nconst mapStateToProps = (state, props) => ({\n  product: getProductById(state, props.productId),\n  manufacturer: getManufacturerByProductId(state, props.productId)\n});\n\nconst mapDispatchToProps = {\n  onRequestProduct: GET_PRODUCTS,\n  onRequestManufacturer: GET_MANUFACTURERS\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(CreateNewContainer);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { fromJS, Iterable } from \"immutable\";\nimport { connect } from \"react-redux\";\nimport { CREATE_DESIGN, UPDATE_DESIGN } from \"../redux/actions\";\nimport Design from \"../models/Design\";\nimport Product from \"../models/Product\";\nimport Status from \"../models/Status\";\nimport { isEmbedded, defaultBackground } from \"../constants/embed\";\nimport ErrorPage from \"../components/ErrorPage\";\nimport { softCompareStrings, makeCancelable, embedAllowed } from \"../utils\";\n\nconst appliedColorsShape = PropTypes.objectOf(\n  PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    color: PropTypes.string.isRequired\n  })\n);\n\nconst productAppliedColorsShape = PropTypes.objectOf(appliedColorsShape);\n\nexport { appliedColorsShape, productAppliedColorsShape };\n\n/**\n * Parses the variations from the provided design in order to determine what colors have been\n * applied.\n * @param {Design} design A design to parse the colors from\n * @param {Product} product The product that the design belongs to\n * @return {Object}\n */\nexport function generateAppliedColors(design, product) {\n  if (!design || !product) {\n    return {};\n  }\n  const colors = product.get(\"colors\");\n\n  // Loop through each variation to grab the colors per panel\n  return design.get(\"variations\").reduce((accumulated, variation) => {\n    const { svg, id } = variation;\n\n    // Render the variation's SVG\n    const render = new window.DOMParser().parseFromString(svg, \"text/xml\");\n\n    // Find all of the colorable elements\n    const panels = render.querySelectorAll(\"[data-id]\");\n\n    // Build an object mapping each panel to its color\n    const appliedColors = {};\n    for (let i = 0; i < panels.length; i++) {\n      const panel = panels[i];\n      const color = panel.getAttribute(\"fill\");\n      if (color) {\n        const colorMatch = colors.find(storedColor =>\n          softCompareStrings(storedColor.color, color)\n        );\n        const colorName = colorMatch ? colorMatch.name : color;\n        appliedColors[panel.getAttribute(\"data-id\")] = {\n          color,\n          name: colorName\n        };\n      }\n    }\n\n    accumulated[id] = appliedColors;\n    return accumulated;\n  }, {});\n}\n\n/**\n * Manages the overall state of the editor. And provides a means to save changes.\n */\nexport class EditorContainer extends React.Component {\n  static propTypes = {\n    /**\n     * The product being edited\n     */\n    product: PropTypes.instanceOf(Product).isRequired,\n    /**\n     * The default color (name) to be selected. Will default to the first color on the product\n     * otherwise.\n     */\n    defaultColor: PropTypes.string,\n    /**\n     * An existing design being edited.\n     */\n    design: PropTypes.instanceOf(Design),\n    /**\n     * The default variation (id) to be selected. Will default to the first variation on the\n     * product otherwise.\n     */\n    defaultVariation: PropTypes.string,\n    /**\n     * A function that renders content\n     */\n    children: PropTypes.func.isRequired,\n    /**\n     * A function called when we want to save the design. Provided by Redux.\n     */\n    onSave: PropTypes.func.isRequired,\n    /**\n     * A function called when we want to update a design. Provided by Redux.\n     */\n    onUpdate: PropTypes.func.isRequired\n  };\n\n  constructor(props, ...rest) {\n    super(props, ...rest);\n\n    // Use the first color, or the one specified\n    let currentColor = props.product.get(\"colors\")[0];\n    if (props.defaultColor) {\n      currentColor = props.product\n        .get(\"colors\")\n        .find(color => softCompareStrings(color.name, props.defaultColor));\n    }\n\n    // Use the primary variation or the one specified\n    let currentVariation = props.product.get(\"variations\")[0];\n\n    if (props.design) {\n      currentVariation = props.design\n        .get(\"variations\")\n        .find(variation => variation.primary);\n    }\n    if (props.defaultVariation) {\n      currentVariation = props.product\n        .get(\"variations\")\n        .find(variation => variation.id === props.defaultVariation);\n    }\n\n    const appliedColors = generateAppliedColors(\n      this.props.design,\n      this.props.product\n    );\n\n    this.state = {\n      background: defaultBackground || null,\n      hideOutlines: false,\n      /**\n       * The currently selected color.\n       * @type {Object}\n       */\n      currentColor,\n      /**\n       * The currently selected variation.\n       * @type {Object}\n       */\n      currentVariation,\n      /**\n       * The currently applied colors.\n       * Example\n       * {\n       *   \"variation-id\": {\n       *     p1: {\n       *       name: \"black\",\n       *       color: \"#000\"\n       *     }\n       *   }\n       * }\n       * @type {Object}\n       */\n      appliedColors,\n      appliedColorsHistory: [],\n      undoDepth: 0\n    };\n  }\n\n  /**\n   * Apply colors to the state and keep a record of the change in history.\n   * @param  {String[]} keys The series of keys that point to the value to\n   * change. Is provided to Immutable's setIn. If the array is empty, the value\n   * will be used to overwrite the entire appliedColors value.\n   * @param  {*} value The new value to set\n   * @private\n   */\n  _applyColors(keys, value) {\n    const MAX_HISTORY_LENGTH = 20;\n\n    // Determine the new value for appliedColors, and the current specific\n    // value that is being changed\n    let appliedColors;\n    let previousValue;\n    if (!keys.length) {\n      // If we have no keys, we are replacing the entire appliedColors object\n      appliedColors = value;\n      previousValue = this.state.appliedColors;\n    } else {\n      const currentAppliedColors = fromJS(this.state.appliedColors);\n      appliedColors = currentAppliedColors.setIn(keys, value).toJS();\n      if (currentAppliedColors.hasIn(keys)) {\n        previousValue = currentAppliedColors.getIn(keys, value);\n      }\n\n      // If the previousValue is immutable, convert it to JS.\n      if (Iterable.isIterable(previousValue)) {\n        previousValue = previousValue.toJS();\n      }\n    }\n\n    // Update the history\n\n    // If we have some undo depth, cut the undone steps out of the history since\n    // we are now branching forward with new changes.\n    const appliedColorsHistory = this.state.appliedColorsHistory.slice(\n      this.state.undoDepth\n    );\n    const historyEntry = {\n      keys,\n      value,\n      previousValue\n    };\n    // Add the new history entry to the beginning of the array\n    appliedColorsHistory.unshift(historyEntry);\n    // If we have too many items in the array, delete the oldest one\n    if (appliedColorsHistory.length > MAX_HISTORY_LENGTH) {\n      appliedColorsHistory.pop();\n    }\n\n    // Set state\n    this.setState({\n      appliedColors,\n      appliedColorsHistory,\n      undoDepth: 0\n    });\n  }\n\n  /**\n   * Undo the previous change based on undoDepth and appliedColorsHistory\n   */\n  handleUndo = () => {\n    let appliedColors;\n    const currentUndoDepth = this.state.undoDepth;\n\n    // Cannot undo if there are no more steps to undo\n    if (currentUndoDepth === this.state.appliedColorsHistory.length) {\n      return;\n    }\n    const stepToUndo = this.state.appliedColorsHistory[currentUndoDepth];\n    if (!stepToUndo.keys.length) {\n      appliedColors = stepToUndo.previousValue;\n    } else {\n      const currentAppliedColors = fromJS(this.state.appliedColors);\n      appliedColors = currentAppliedColors\n        .setIn(stepToUndo.keys, stepToUndo.previousValue)\n        .toJS();\n    }\n    this.setState({\n      appliedColors,\n      undoDepth: currentUndoDepth + 1\n    });\n  };\n\n  /**\n   * Redo the last undone change based on undoDepth and appliedColorsHistory\n   */\n  handleRedo = () => {\n    let appliedColors;\n    const currentUndoDepth = this.state.undoDepth;\n\n    // Cannot redo if there is nothing to redo\n    if (currentUndoDepth === 0) {\n      return;\n    }\n    const stepToRedo = this.state.appliedColorsHistory[currentUndoDepth - 1];\n    if (!stepToRedo.keys.length) {\n      appliedColors = stepToRedo.value;\n    } else {\n      const currentAppliedColors = fromJS(this.state.appliedColors);\n      appliedColors = currentAppliedColors\n        .setIn(stepToRedo.keys, stepToRedo.value)\n        .toJS();\n    }\n    this.setState({\n      appliedColors,\n      undoDepth: currentUndoDepth - 1\n    });\n  };\n\n  /*\n   * Cancels any pending promises before being unmounted.\n   */\n  componentWillUnmount() {\n    this.cancelablePromises.forEach(promise => promise.cancel());\n  }\n\n  /**\n   * An array of promises that may need to be cancelled when the component is unmounted\n   */\n  cancelablePromises = [];\n\n  /**\n   * Handles when a different color is selected by updating state.\n   * @param  {String} colorName The name of the newly selected color\n   */\n  handleColorSelection = colorName => {\n    const currentColor = this.props.product\n      .get(\"colors\")\n      .find(color => softCompareStrings(color.name, colorName));\n    this.setState({\n      currentColor\n    });\n  };\n\n  /**\n   * Handles when a different variation is selected by updating state.\n   * @param  {String} variationId The id of the newly selected variation\n   */\n  handleVariationSelection = variationId => {\n    const currentVariation = this.props.product\n      .get(\"variations\")\n      .find(variation => variation.id === variationId);\n    this.setState({\n      currentVariation\n    });\n  };\n\n  /**\n   * Set the color for the specified id on the current variation to the current color.\n   * @param  {String} id The ID of the panel, taken from data-id on the element.\n   */\n  handleColorApplied = id =>\n    this._applyColors(\n      [this.state.currentVariation.id, id],\n      this.state.currentColor\n    );\n\n  /**\n   * Generates the design variations based on the product variations and the applied colors.\n   * @return {Object[]} Each object contains name, primary, and svg.\n   */\n  generateDesignVariations = () => {\n    const appliedColors = this.state.appliedColors;\n    const productVariations = this.props.product.get(\"variations\");\n\n    // Build each variation\n    return productVariations.map((variation, index) => {\n      // Render the blank variation from the product in memory\n      const render = new window.DOMParser().parseFromString(\n        variation.svg,\n        \"text/xml\"\n      );\n      const colorMap = appliedColors[variation.id] || {};\n\n      // Apply each color to the rendered variation\n      Object.keys(colorMap).forEach(id => {\n        const color = colorMap[id].color;\n        const panel = render.querySelector(`[data-id=\"${id}\"]`);\n        if (!panel) {\n          return;\n        }\n        panel.setAttribute(\"fill\", color);\n      });\n\n      // Get the new SVG string from the render.\n      const svg = render.querySelector(\"svg\").outerHTML;\n\n      // Return the variation\n      return {\n        id: variation.id,\n        name: variation.name,\n        primary: !index,\n        svg\n      };\n    });\n  };\n\n  /** Clears all colors from the current variation */\n  handleReset = () => this._applyColors([this.state.currentVariation.id], {});\n\n  /**\n   * Handles save by parsing data and submitting a request to create a new design. Redirects to that\n   * design's edit page when successful.\n   * @param  {Object} data must contain name and user(id)\n   */\n  handleSave = data => {\n    const { name, user } = data;\n    const design = new Design({\n      name,\n      user,\n      product: this.props.product.get(\"id\"),\n      variations: this.generateDesignVariations(),\n      status: user === \"0\" ? Status.PUBLIC : Status.UNLISTED\n    });\n    const promise = makeCancelable(this.props.onSave(design));\n    promise.promise.then(response => {\n      const designId = response.data.id;\n      if (data.user === \"0\") {\n        // If the design was created anonymously, go to the view page\n        window.location.replace(`/view/${designId}`);\n      } else {\n        window.location.replace(`/edit/${designId}`);\n      }\n    });\n    this.cancelablePromises.push(promise);\n  };\n\n  /**\n   * Handles update by parsing data and submitting a request to update the design.\n   */\n  handleUpdate = () => {\n    const design = this.props.design.set(\n      \"variations\",\n      this.generateDesignVariations()\n    );\n    this.props.onUpdate(design);\n  };\n\n  /**\n   * Gets the applied colors for the current variation\n   */\n  getCurrentVariationColors = () => {\n    const currentVariationId = this.state.currentVariation.id;\n    return this.state.appliedColors[currentVariationId] || {};\n  };\n\n  /**\n   * Handles auto fill by merging the colors applied to the current variation on top of the colors\n   * applied to every other variation.\n   */\n  handleAutofill = () => {\n    const currentColors = this.getCurrentVariationColors();\n    const variations = this.props.product.get(\"variations\");\n    const appliedColors = variations.reduce((accumulated, variation) => {\n      accumulated[variation.id] = {\n        ...currentColors\n      };\n      return accumulated;\n    }, {});\n    this._applyColors([], appliedColors);\n  };\n\n  handleChangeBackground = value => this.setState({ background: value });\n\n  handleToggleHideOutlines = () =>\n    this.setState({ hideOutlines: !this.state.hideOutlines });\n\n  render() {\n    if (\n      isEmbedded &&\n      this.props.product &&\n      !embedAllowed(this.props.product.get(\"embed\").split(\",\"))\n    ) {\n      return (\n        <ErrorPage\n          errorCode={401}\n          errorMessage=\"Embedding of this page is not permitted.\"\n        />\n      );\n    }\n    const data = {\n      actions: {\n        applyColor: this.handleColorApplied,\n        autofill: this.handleAutofill,\n        changeBackground: this.handleChangeBackground,\n        redo: this.handleRedo,\n        reset: this.handleReset,\n        save: this.handleSave,\n        selectColor: this.handleColorSelection,\n        selectVariation: this.handleVariationSelection,\n        toggleHideOutlines: this.handleToggleHideOutlines,\n        undo: this.handleUndo,\n        update: this.handleUpdate\n      },\n      props: {\n        appliedColors: this.state.appliedColors,\n        background: this.state.background,\n        canRedo: this.state.undoDepth !== 0,\n        canUndo:\n          this.state.undoDepth !== this.state.appliedColorsHistory.length,\n        currentColor: this.state.currentColor,\n        currentVariation: this.state.currentVariation,\n        currentVariationColors: this.getCurrentVariationColors(),\n        hideOutlines: this.state.hideOutlines\n      }\n    };\n    return this.props.children(data);\n  }\n}\n\nconst mapStateToProps = () => ({});\n\nconst mapDispatchToProps = {\n  onSave: CREATE_DESIGN,\n  onUpdate: UPDATE_DESIGN\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(EditorContainer);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport canvg from \"canvg\";\nimport Design from \"../models/Design\";\nimport {\n  Dropdown,\n  Modal,\n  Label,\n  Input,\n  P,\n  Icon,\n  Button,\n  ModalClose,\n  Spacer\n} from \"../theme\";\n\nconst StyleWrapper = styled.div`\n  max-width: 100%;\n  width: 500px;\n`;\n\n/**\n * The contents of the share modal\n */\nexport const Content = ({ design, onClose, onDownloadSvg, onDownloadPng }) => {\n  return (\n    <StyleWrapper>\n      <ModalClose onClick={onClose} />\n      {design && (\n        <React.Fragment>\n          <Label className=\"testing_share-content\">Public URL</Label>\n          {design.get(\"isPrivate\") ? (\n            <P>\n              This design is set to Private. It must be Unlisted or Public in\n              order to share the URL.\n            </P>\n          ) : (\n            <Input\n              className=\"testing_public-url\"\n              readOnly\n              value={`${window.location.origin}/view/${design.get(\"id\")}`}\n            />\n          )}\n          <Spacer top=\"md\" />\n          <Label>Download image files</Label>\n          <Dropdown\n            dropdownContent={dropdownData => (\n              <React.Fragment>\n                <dropdownData.components.Item\n                  onClick={() => {\n                    onDownloadSvg();\n                    dropdownData.actions.close();\n                  }}\n                >\n                  SVG files\n                </dropdownData.components.Item>\n                <dropdownData.components.Item\n                  onClick={() => {\n                    onDownloadPng();\n                    dropdownData.actions.close();\n                  }}\n                >\n                  PNG files\n                </dropdownData.components.Item>\n              </React.Fragment>\n            )}\n          >\n            {dropdownData => (\n              <Button isPrimary onClick={dropdownData.actions.open}>\n                Download <Icon icon=\"angle-down\" />\n              </Button>\n            )}\n          </Dropdown>\n        </React.Fragment>\n      )}\n      {!design && <P>You must save this design before it can be shared.</P>}\n    </StyleWrapper>\n  );\n};\n\nContent.propTypes = {\n  /** The design being shared, if any */\n  design: PropTypes.instanceOf(Design),\n  /** Called when the user clicks the close button */\n  onClose: PropTypes.func.isRequired,\n  /** Called when the user clicks the download button */\n  onDownloadSvg: PropTypes.func.isRequired,\n  onDownloadPng: PropTypes.func.isRequired\n};\n\n/**\n * A modal for sharing a design.\n *\n * Example:\n * ```\n * <ShareModal design={someDesign}>\n *   {modal => (<Button onClick={modal.acitons.open}>Share</Button>)}\n * </ShareModal>\n * ```\n */\nclass ShareModal extends React.Component {\n  static propTypes = {\n    /** A function that returns renderable content */\n    children: PropTypes.func.isRequired,\n    /** A design to be shared. */\n    design: PropTypes.instanceOf(Design)\n  };\n\n  state = {\n    // Indicates if the modal is currently open\n    isOpen: false\n  };\n\n  handleOpen = () => this.setState({ isOpen: true });\n\n  handleClose = () => this.setState({ isOpen: false });\n\n  /** Downloads the design variations as SVG files */\n  handleDownloadSvg = () => {\n    this.props.design.get(\"variations\").forEach(variation => {\n      const element = document.createElement(\"a\");\n      element.setAttribute(\n        \"href\",\n        \"data:text/plain;charset=utf-8,\" + encodeURIComponent(variation.svg)\n      );\n      element.setAttribute(\n        \"download\",\n        `${this.props.design.get(\"name\")} - ${variation.name}.svg`\n      );\n\n      element.style.display = \"none\";\n      document.body.appendChild(element);\n\n      element.click();\n\n      document.body.removeChild(element);\n    });\n  };\n\n  /** Downloads the design variations as PNG files */\n  handleDownloadPng = () => {\n    this.props.design.get(\"variations\").forEach(variation => {\n      const canvas = document.createElement(\"canvas\");\n      canvas.setAttribute(\"id\", \"image-download-canvas\");\n      canvas.setAttribute(\"width\", \"1000px\");\n      canvas.setAttribute(\"height\", \"600px\");\n      document.body.appendChild(canvas);\n      canvg(canvas, variation.svg);\n      const dataUrl = canvas.toDataURL(\"image/png\");\n      const element = document.createElement(\"a\");\n      element.setAttribute(\"href\", dataUrl);\n      element.setAttribute(\n        \"download\",\n        `${this.props.design.get(\"name\")} - ${variation.name}.png`\n      );\n\n      element.style.display = \"none\";\n      document.body.appendChild(element);\n\n      element.click();\n\n      document.body.removeChild(element);\n      document.body.removeChild(canvas);\n    });\n  };\n\n  render() {\n    return (\n      <Modal\n        isOpen={this.state.isOpen}\n        modalContent={\n          <Content\n            design={this.props.design}\n            onClose={this.handleClose}\n            onDownloadSvg={this.handleDownloadSvg}\n            onDownloadPng={this.handleDownloadPng}\n          />\n        }\n        onBackdropClick={this.handleClose}\n      >\n        {this.props.children({\n          actions: {\n            open: this.handleOpen\n          }\n        })}\n      </Modal>\n    );\n  }\n}\n\nexport default ShareModal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport Design from \"../models/Design\";\nimport Status from \"../models/Status\";\nimport {\n  Modal,\n  ModalClose,\n  Label,\n  Input,\n  Button,\n  Select,\n  Tooltip\n} from \"../theme\";\n\nconst StyleWrapper = styled.form`\n  max-width: 100%;\n  width: 300px;\n  .submit-button {\n    float: right;\n  }\n`;\n\n/** The content of the Design Settings Modal */\nconst Content = ({\n  design,\n  onSubmit,\n  onCancel,\n  onChangeName,\n  onChangeStatus,\n  onChangePrimary,\n  isPending\n}) => {\n  if (!design) {\n    return null;\n  }\n\n  // The list of status options\n  const statusOptions = [\n    {\n      value: Status.PUBLIC,\n      label: Status[Status.PUBLIC],\n      disabled: design.get(\"productStatus\") < Status.PUBLIC\n    },\n    {\n      value: Status.UNLISTED,\n      label: Status[Status.UNLISTED],\n      disabled: design.get(\"productStatus\") < Status.UNLISTED\n    },\n    {\n      value: Status.PRIVATE,\n      label: Status[Status.PRIVATE],\n      disabled: false\n    }\n  ];\n  return (\n    <StyleWrapper\n      onSubmit={e => {\n        e.preventDefault();\n        onSubmit();\n      }}\n    >\n      <ModalClose onClick={onCancel} />\n      <Label>Design Name</Label>\n      <Input\n        className=\"input-name\"\n        value={design.get(\"name\")}\n        onChange={e => onChangeName(e.target.value)}\n        required\n      />\n      <Label>\n        Status{\" \"}\n        <Tooltip>\n          Private designs are only visible by you.\n          <br />\n          Unlisted designs are visible to anyone, but are not organically\n          discoverable.\n          <br />\n          Public designs are visible to anyone and are featured throughout\n          KitePaint.\n        </Tooltip>\n      </Label>\n      <Select\n        className=\"select-status\"\n        value={design.get(\"currentStatus\")}\n        onChange={e => onChangeStatus(e.target.value)}\n      >\n        {statusOptions.map(option => (\n          <option\n            key={option.value}\n            disabled={option.disabled}\n            value={option.value}\n          >\n            {option.label}\n          </option>\n        ))}\n      </Select>\n      <Label>\n        Primary Variation{\" \"}\n        <Tooltip>\n          The primary variation is the one that will be displayed in thumbnails\n          and will be selected by default in the editor or view pages for this\n          design.\n        </Tooltip>\n      </Label>\n      <Select\n        className=\"select-primary\"\n        value={design.get(\"variations\").find(variation => variation.primary).id}\n        onChange={e => onChangePrimary(e.target.value)}\n      >\n        {design.get(\"variations\").map(variation => (\n          <option key={variation.id} value={variation.id}>\n            {variation.name}\n          </option>\n        ))}\n      </Select>\n      <Button\n        className=\"submit-button\"\n        type=\"submit\"\n        isPrimary\n        disabled={isPending}\n      >\n        Save\n      </Button>\n    </StyleWrapper>\n  );\n};\n\nContent.propTypes = {\n  /** The design being modified */\n  design: PropTypes.instanceOf(Design),\n  /** Called when the form is submitted */\n  onSubmit: PropTypes.func.isRequired,\n  /** Called when the cancel button is pressed */\n  onCancel: PropTypes.func.isRequired,\n  /** Called when the name changes. Is provided with the new name as the first parameter */\n  onChangeName: PropTypes.func.isRequired,\n  /** Called when the status changes. Is provided with the new status as the first parameter */\n  onChangeStatus: PropTypes.func.isRequired,\n  /** Called when the primary variation changes. Is provided with the name of\n   the new primary variation */\n  onChangePrimary: PropTypes.func.isRequired,\n  /** Disables the button if true */\n  isPending: PropTypes.bool.isRequired\n};\n\nexport { Content };\n\n/** A stateful modal that allows for changing settings of a design like Status\n and name */\nclass DesignSettingsModal extends React.Component {\n  static propTypes = {\n    /** The design being modified */\n    design: PropTypes.instanceOf(Design),\n    /** Called when the form is submitted. Is provided an object with the id,\n     name, and status of the design */\n    onSubmit: PropTypes.func.isRequired,\n    /** A function that returns renderable content. This is usually used to\n     render a button that triggers the modal to open. */\n    children: PropTypes.func.isRequired\n  };\n\n  constructor(props, ...rest) {\n    super(props, ...rest);\n    this.state = {\n      /** Is the modal open? */\n      isOpen: false,\n      /** Are we processing the submission? */\n      isPending: false,\n      design: props.design\n    };\n  }\n\n  handleOpen = () => this.setState({ isOpen: true });\n  handleClose = () => this.setState({ isOpen: false });\n  handleChangeName = value =>\n    this.setState({\n      design: this.state.design.set(\"name\", value)\n    });\n  handleChangeStatus = value =>\n    this.setState({\n      design: this.state.design.set(\"status\", value)\n    });\n  handleChangePrimary = value => {\n    const variations = this.state.design.get(\"variations\").map(variation => {\n      if (variation.id === value) {\n        variation.primary = true;\n        return variation;\n      }\n      variation.primary = false;\n      return variation;\n    });\n    this.setState({\n      design: this.state.design.set(\"variations\", variations)\n    });\n  };\n\n  /** Handles submission by calling onSubmit with the relevant data and handling\n   the promise that it may return. */\n  handleSubmit = () => {\n    const request = this.props.onSubmit(this.state.design);\n    if (request && request.then) {\n      this.setState({ isPending: true });\n      request.then(() => {\n        this.setState({ isPending: false });\n        this.handleClose();\n      });\n      request.catch(() => {\n        this.setState({ isPending: false });\n        this.handleClose();\n      });\n    }\n    return request;\n  };\n\n  render() {\n    if (!this.props.design) {\n      return this.props.children({});\n    }\n    return (\n      <Modal\n        isOpen={this.state.isOpen}\n        onBackdropClick={this.handleClose}\n        modalContent={\n          <Content\n            design={this.state.design}\n            onCancel={this.handleClose}\n            onSubmit={this.handleSubmit}\n            onChangeName={this.handleChangeName}\n            onChangeStatus={this.handleChangeStatus}\n            onChangePrimary={this.handleChangePrimary}\n            isPending={this.state.isPending}\n          />\n        }\n      >\n        {this.props.children({\n          actions: {\n            open: this.handleOpen\n          }\n        })}\n      </Modal>\n    );\n  }\n}\n\nexport default DesignSettingsModal;\n","import { connect } from \"react-redux\";\nimport { UPDATE_DESIGN } from \"../redux/actions\";\nimport DesignSettingsModal from \"../components/DesignSettingsModal\";\n\nconst mapStateToProps = () => ({});\n\nconst mapDispatchToProps = {\n  onSubmit: UPDATE_DESIGN\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(DesignSettingsModal);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport Design from \"../../models/Design\";\nimport { Item as DropdownItem } from \"../../theme/Dropdown\";\nimport { P, Icon, ModalPrompt, Dropdown } from \"../../theme\";\nimport { getAppDimensions, getAssetUrl } from \"../../utils\";\nimport ShareModal from \"../ShareModal\";\nimport DesignSettingsModalContainer from \"../../containers/DesignSettingsModalContainer\";\n\nconst backgroundOptions = [\n  {\n    label: \"Default\",\n    value: null\n  },\n  {\n    label: \"Beach\",\n    value: getAssetUrl(\"/backgrounds/beach.jpg\")\n  },\n  {\n    label: \"Blue Sky\",\n    value: getAssetUrl(\"/backgrounds/blue-sky.jpg\")\n  },\n  {\n    label: \"Dark Sky\",\n    value: getAssetUrl(\"/backgrounds/dark-sky.jpg\")\n  },\n  {\n    label: \"Orange Sky\",\n    value: getAssetUrl(\"/backgrounds/orange-sky.jpg\")\n  },\n  {\n    label: \"Grass\",\n    value: getAssetUrl(\"/backgrounds/grass.jpg\")\n  },\n  {\n    label: \"Water\",\n    value: getAssetUrl(\"/backgrounds/water.jpg\")\n  }\n];\n\n/**\n * Overall styling for the toolbar\n */\nexport const StyleWrapper = styled.div`\n  background: ${props => props.theme.colors.grayDarker};\n  display: flex;\n  padding: 0 8px;\n  box-shadow: 0 0 2px 2px ${props => props.theme.colors.black};\n  position: relative;\n  z-index: 2;\n\n  .toolbar-item {\n    padding: 8px;\n    cursor: pointer;\n    transition: 0.4s background;\n    border-right: 1px solid ${props => props.theme.colors.grayDark};\n    white-space: nowrap;\n\n    &:first-of-type {\n      border-left: 1px solid ${props => props.theme.colors.grayDark};\n    }\n\n    &:hover {\n      background: ${props => props.theme.colors.black};\n    }\n    &[disabled] {\n      opacity: 0.5;\n      cursor: default;\n      background: none;\n    }\n  }\n`;\n\n/**\n * Provides the modals that can be accessed from the toolbar.\n * These need to be wrapped around the toolbar because if they are in a dropdown,\n * the modal will disappear when the dropdown auto closes.\n */\nexport const ModalWrapper = ({ children, design, onSave }) => (\n  <ModalPrompt\n    onSubmit={onSave}\n    message=\"To save your design, you must give it a name. What would you like to name your design?\"\n  >\n    {saveModal => (\n      <ShareModal design={design}>\n        {shareModal => (\n          <DesignSettingsModalContainer design={design}>\n            {designSettingsModal =>\n              children({\n                designSettingsModal,\n                saveModal,\n                shareModal\n              })\n            }\n          </DesignSettingsModalContainer>\n        )}\n      </ShareModal>\n    )}\n  </ModalPrompt>\n);\n\nModalWrapper.defaultProps = {\n  onSave: () => {}\n};\n\nModalWrapper.propTypes = {\n  children: PropTypes.func.isRequired,\n  design: PropTypes.instanceOf(Design),\n  onSave: PropTypes.func\n};\n\n/**\n * The toolbar displayed at the top of the editor to provide various actions.\n */\nclass Toolbar extends React.Component {\n  static propTypes = {\n    /** Should the undo button be disabled? */\n    undoDisabled: PropTypes.bool,\n    /** Should the redo button be disabled? */\n    redoDisabled: PropTypes.bool,\n    /** The design being edited */\n    design: PropTypes.instanceOf(Design),\n    /** Are outlines hidden? */\n    hideOutlines: PropTypes.bool,\n    /** Triggered when the save button is clicked */\n    onUpdate: PropTypes.func,\n    /** Triggered when the save as button is clicked */\n    onSave: PropTypes.func,\n    /** Triggered when the autofill button is clicked */\n    onAutofill: PropTypes.func,\n    /** Triggered when the reset button is clicked */\n    onReset: PropTypes.func,\n    /** Triggered when the hide outlines button is clicked */\n    onHideOutlines: PropTypes.func.isRequired,\n    /** Triggered when a background is selected. The background url is provided\n     as the first parameter */\n    onBackgroundChange: PropTypes.func.isRequired,\n    /** Triggered when the undo button is clicked. */\n    onUndo: PropTypes.func,\n    /** Triggered when the redo button is clicked. */\n    onRedo: PropTypes.func,\n    /** Should the settings button be visible? */\n    showSettings: PropTypes.bool\n  };\n\n  state = {\n    /** The number of items that are truncated due to the screen size */\n    truncationCount: 0\n  };\n\n  /** When the component mounts, take count of the items in the toolbar and\n   the position of their right edge so that we can evaluate for truncation, and\n   trigger truncation */\n  componentDidMount() {\n    if (!this.node) {\n      return;\n    }\n    this._indexActions();\n\n    // Determine the truncation count absed on the stored actionIndex\n    this._determineTruncationCount();\n\n    // Revise truncation when the window resizes.\n    window.addEventListener(\"resize\", this._determineTruncationCount);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this._determineTruncationCount);\n  }\n\n  /** A reference to the StyleWrapper element */\n  node = null;\n\n  /**\n   * An array of numbers where each number represents the right edge of a\n   * toolbar item.\n   */\n  actionIndex = [];\n\n  /** take count of the items in the toolbar and the position of their right\n   edge so that we can evaluate for truncation */\n  _indexActions = () => {\n    const actionIndex = [];\n\n    // Find all toolbar-items and push them into an array along with the x\n    // dimension of their right edge.\n    const items = this.node.querySelectorAll(\".toolbar-item\");\n    items.forEach(item => {\n      actionIndex.push(item.getBoundingClientRect().right);\n    });\n    this.actionIndex = actionIndex;\n  };\n\n  /** Sets truncationCount based on the window width and the stored right edge\n   position of each item in the toolbar */\n  _determineTruncationCount = () => {\n    const windowWidth = getAppDimensions().width;\n\n    // get the index of the first toolbar item that overflows the window\n    let truncationIndex;\n    this.actionIndex.find((actionEdge, index) => {\n      // Giving a 20px buffer\n      if (actionEdge > windowWidth - 20) {\n        truncationIndex = index;\n        return true;\n      }\n      return false;\n    });\n\n    if (!truncationIndex) {\n      // If there is no truncationIndex and no items are currently truncated\n      // just return\n      if (this.state.truncationCount === 0) {\n        return;\n      }\n\n      // If there is no truncation index, reset the truncationCount to 0\n      this.setState({\n        truncationCount: 0\n      });\n      return;\n    }\n\n    // Determine how many items should be truncated\n    const truncationCount = this.actionIndex.length - truncationIndex + 1;\n\n    // If we already have the right number of items truncated, return early\n    if (truncationCount === this.state.truncationCount) {\n      return;\n    }\n\n    // Update the truncationCount\n    this.setState({\n      truncationCount\n    });\n  };\n\n  render() {\n    return (\n      <ModalWrapper design={this.props.design} onSave={this.props.onSave}>\n        {dataWrapper => {\n          const actions = [];\n\n          // Save\n          if (this.props.onUpdate) {\n            actions.push({\n              name: \"save\",\n              content: (\n                <P\n                  className=\"testing_update toolbar-item\"\n                  isLight\n                  onClick={this.props.onUpdate}\n                >\n                  <Icon icon=\"save\" />\n                  <span className=\"label\"> Save</span>\n                </P>\n              ),\n              truncatedContent: (\n                <DropdownItem onClick={this.props.onUpdate}>\n                  <Icon icon=\"share\" />\n                  <span className=\"label\"> Share</span>\n                </DropdownItem>\n              )\n            });\n          }\n\n          // Save As\n          if (this.props.onSave) {\n            actions.push({\n              name: \"save-as\",\n              content: (\n                <P\n                  className=\"testing_save toolbar-item\"\n                  isLight\n                  // onClick={dataWrapper.saveModal.actions.open}\n                >\n                  <Icon icon=\"save\" />\n                  <span className=\"label\">\n                    {\" \"}\n                    {this.props.onUpdate ? \"Save As\" : \"Save\"}\n                  </span>\n                </P>\n              )\n            });\n          }\n\n          // Share\n          actions.push({\n            name: \"share\",\n            content: (\n              <P\n                className=\"toolbar-item\"\n                isLight\n                onClick={dataWrapper.shareModal.actions.open}\n              >\n                <Icon icon=\"share\" />\n                <span className=\"label\"> Share</span>\n              </P>\n            ),\n            truncatedContent: (\n              <DropdownItem onClick={dataWrapper.shareModal.actions.open}>\n                <Icon icon=\"share\" />\n                <span className=\"label\"> Share</span>\n              </DropdownItem>\n            )\n          });\n\n          // Undo\n          if (this.props.onUndo) {\n            actions.push({\n              name: \"undo\",\n              content: (\n                <P\n                  className=\"toolbar-item\"\n                  disabled={this.props.undoDisabled}\n                  isLight\n                  onClick={this.props.onUndo}\n                >\n                  <Icon icon=\"undo\" />\n                  <span className=\"label\"> Undo</span>\n                </P>\n              ),\n              truncatedContent: (\n                <DropdownItem\n                  disabled={this.props.undoDisabled}\n                  onClick={this.props.onUndo}\n                >\n                  <Icon icon=\"undo\" />\n                  <span className=\"label\"> Undo</span>\n                </DropdownItem>\n              )\n            });\n          }\n\n          // Redo\n          if (this.props.onRedo) {\n            actions.push({\n              name: \"redo\",\n              content: (\n                <P\n                  className=\"toolbar-item\"\n                  disabled={this.props.redoDisabled}\n                  isLight\n                  onClick={this.props.onRedo}\n                >\n                  <Icon icon=\"redo\" />\n                  <span className=\"label\"> Redo</span>\n                </P>\n              ),\n              truncatedContent: (\n                <DropdownItem\n                  disabled={this.props.redoDisabled}\n                  onClick={this.props.onRedo}\n                >\n                  <Icon icon=\"redo\" />\n                  <span className=\"label\"> Redo</span>\n                </DropdownItem>\n              )\n            });\n          }\n\n          // Background\n          actions.push({\n            name: \"background\",\n            content: (\n              <Dropdown\n                dropdownContent={dropdown => (\n                  <React.Fragment>\n                    {backgroundOptions.map(option => (\n                      <dropdown.components.Item\n                        key={option.value}\n                        onClick={() =>\n                          this.props.onBackgroundChange(option.value)\n                        }\n                      >\n                        {option.label}\n                      </dropdown.components.Item>\n                    ))}\n                  </React.Fragment>\n                )}\n              >\n                {dropdown => (\n                  <P\n                    className=\"toolbar-item\"\n                    isLight\n                    onClick={\n                      dropdown.props.isOpen\n                        ? dropdown.actions.close\n                        : dropdown.actions.open\n                    }\n                  >\n                    <Icon icon=\"image\" />\n                    <span className=\"label\"> Background</span>\n                  </P>\n                )}\n              </Dropdown>\n            ),\n            truncatedContent: (\n              <Dropdown\n                dropdownContent={dropdown => (\n                  <React.Fragment>\n                    {backgroundOptions.map(option => (\n                      <dropdown.components.Item\n                        key={option.value}\n                        onClick={() =>\n                          this.props.onBackgroundChange(option.value)\n                        }\n                      >\n                        {option.label}\n                      </dropdown.components.Item>\n                    ))}\n                  </React.Fragment>\n                )}\n              >\n                {dropdown => (\n                  <DropdownItem\n                    onClick={\n                      dropdown.props.isOpen\n                        ? dropdown.actions.close\n                        : dropdown.actions.open\n                    }\n                  >\n                    <Icon icon=\"image\" />\n                    <span className=\"label\"> Background</span>\n                  </DropdownItem>\n                )}\n              </Dropdown>\n            )\n          });\n\n          // Hide Outlines\n          actions.push({\n            name: \"hide-outlines\",\n            content: (\n              <P\n                className=\"toolbar-item\"\n                isLight\n                onClick={this.props.onHideOutlines}\n              >\n                <Icon icon={this.props.hideOutlines ? \"eye\" : \"eye-slash\"} />\n                <span className=\"label\">\n                  {\" \"}\n                  {this.props.hideOutlines ? \"Show\" : \"Hide\"} Outlines\n                </span>\n              </P>\n            ),\n            truncatedContent: (\n              <DropdownItem onClick={this.props.onHideOutlines}>\n                <Icon icon={this.props.hideOutlines ? \"eye\" : \"eye-slash\"} />\n                <span className=\"label\">\n                  {\" \"}\n                  {this.props.hideOutlines ? \"Show\" : \"Hide\"} Outlines\n                </span>\n              </DropdownItem>\n            )\n          });\n\n          // Autofill\n          if (this.props.onAutofill) {\n            actions.push({\n              name: \"autofill\",\n              content: (\n                <P\n                  className=\"testing_autofill toolbar-item\"\n                  isLight\n                  onClick={this.props.onAutofill}\n                >\n                  <Icon icon=\"magic\" />\n                  <span className=\"label\"> Autofill</span>\n                </P>\n              ),\n              truncatedContent: (\n                <DropdownItem onClick={this.props.onAutofill}>\n                  <Icon icon=\"magic\" />\n                  <span className=\"label\"> Autofill</span>\n                </DropdownItem>\n              )\n            });\n          }\n\n          // Reset\n          if (this.props.onReset) {\n            actions.push({\n              name: \"reset\",\n              content: (\n                <P\n                  className=\"testing_reset toolbar-item\"\n                  isLight\n                  onClick={this.props.onReset}\n                >\n                  <Icon icon=\"eraser\" />\n                  <span className=\"label\"> Reset</span>\n                </P>\n              ),\n              truncatedContent: (\n                <DropdownItem onClick={this.props.onReset}>\n                  <Icon icon=\"eraser\" />\n                  <span className=\"label\"> Reset</span>\n                </DropdownItem>\n              )\n            });\n          }\n\n          // Design Settings\n          if (this.props.design && this.props.showSettings) {\n            actions.push({\n              name: \"settings\",\n              content: (\n                <P\n                  className=\"toolbar-item\"\n                  isLight\n                  onClick={dataWrapper.designSettingsModal.actions.open}\n                >\n                  <Icon icon=\"cog\" />\n                  <span className=\"label\"> Settings</span>\n                </P>\n              ),\n              truncatedContent: (\n                <DropdownItem\n                  onClick={dataWrapper.designSettingsModal.actions.open}\n                >\n                  <Icon icon=\"cog\" />\n                  <span className=\"label\"> Settings</span>\n                </DropdownItem>\n              )\n            });\n          }\n\n          const nonTruncatedActions = actions.slice(\n            0,\n            actions.length - this.state.truncationCount\n          );\n          const truncatedActions = actions.slice(\n            actions.length - this.state.truncationCount\n          );\n          return (\n            <StyleWrapper ref={node => (this.node = node)}>\n              {nonTruncatedActions.map(action => (\n                <React.Fragment key={action.name}>\n                  {action.content}\n                </React.Fragment>\n              ))}\n              {!!truncatedActions.length && (\n                <Dropdown\n                  className=\"testing_truncation-dropdown\"\n                  dropdownContent={() =>\n                    truncatedActions.map(action => (\n                      <React.Fragment key={action.name}>\n                        {action.truncatedContent}\n                      </React.Fragment>\n                    ))\n                  }\n                >\n                  {dropdown => (\n                    <P\n                      className=\"toolbar-item\"\n                      isLight\n                      onClick={\n                        dropdown.props.isOpen\n                          ? dropdown.actions.close\n                          : dropdown.actions.open\n                      }\n                    >\n                      <Icon icon=\"ellipsis-h\" />\n                    </P>\n                  )}\n                </Dropdown>\n              )}\n            </StyleWrapper>\n          );\n        }}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default Toolbar;\n","import styled from \"styled-components\";\n\n/**\n * Creates a circle that represents a color on the color palette.\n *\n * Provide a color prop to set the color.\n */\nconst ColorTile = styled.div`\n  display: block;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background-color: ${props => props.color || \"#ffffff\"};\n  border: 1px solid ${props => props.theme.colors.gray};\n`;\n\nexport default ColorTile;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { css } from \"styled-components\";\nimport { appliedColorsShape } from \"../../containers/EditorContainer\";\n\nconst StyledDiv = styled.div`\n  ${props =>\n    props.hideOutlines\n      ? css`\n          svg * {\n            stroke-width: 0;\n          }\n        `\n      : null};\n`;\n\n/**\n * Renders the provided SVG and uses the colorMap to apply a fill color to verious elements\n */\nclass ColorableSvg extends React.Component {\n  static propTypes = {\n    svg: PropTypes.string.isRequired,\n    colorMap: appliedColorsShape.isRequired,\n    hideOutlines: PropTypes.bool\n  };\n\n  componentDidMount() {\n    this.applyColors();\n  }\n\n  componentDidUpdate() {\n    this.applyColors();\n  }\n\n  /**\n   * The colors that were originally used for each panel.\n   */\n  originalColors = {};\n\n  /**\n   * A DOM reference to the div containing the SVG\n   */\n  node = null;\n\n  /**\n   * Applies the colorMap to the rendered SVG\n   */\n  applyColors = () => {\n    const { colorMap } = this.props;\n    this.node.querySelectorAll(`[data-id]`).forEach(panel => {\n      const panelId = panel.getAttribute(\"data-id\");\n\n      // Build up a list of original colors if we haven't already, so that we\n      // know what to fall back to when the colorMap is empty.\n      if (!this.originalColors[panelId]) {\n        this.originalColors[panelId] = panel.getAttribute(\"fill\");\n      }\n      const color = colorMap[panelId]\n        ? colorMap[panelId].color\n        : this.originalColors[panelId];\n      panel.setAttribute(\"fill\", color);\n    });\n  };\n\n  render() {\n    return (\n      <StyledDiv\n        hideOutlines={this.props.hideOutlines}\n        ref={node => (this.node = node)}\n        dangerouslySetInnerHTML={{ __html: this.props.svg }}\n      />\n    );\n  }\n}\n\nexport default ColorableSvg;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport Manufacturer from \"../../models/Manufacturer\";\nimport Product from \"../../models/Product\";\nimport Design from \"../../models/Design\";\nimport { productAppliedColorsShape } from \"../../containers/EditorContainer\";\nimport { Icon, FillToBottom, Sidebar as SidebarUI } from \"../../theme\";\nimport { getAssetUrl } from \"../../utils\";\nimport ManufacturerLogo from \"../ManufacturerLogo\";\nimport ColorTile from \"./ColorTile\";\nimport ColorableSvg from \"./ColorableSvg\";\n\n/**\n * A styled preview of a variation's svg\n */\nconst VariationPreview = styled.div`\n  display: block;\n  width: 24px;\n  height: 24px;\n\n  svg {\n    margin-top: 50%;\n    transform: translateY(-50%);\n  }\n`;\n\nexport const StyledSidebar = styled(SidebarUI)`\n  width: 60px;\n\n  .color-tile,\n  .manufacturer-logo,\n  .variation-preview {\n    margin: 0 auto;\n  }\n\n  .color-label,\n  .variation-label,\n  .colors-heading,\n  .manufacturer-info,\n  .design-heading {\n    display: none;\n  }\n\n  ${props => props.theme.media.mediaMd} {\n    width: 175px;\n    .color-label,\n    .variation-label {\n      display: inline;\n    }\n    .colors-heading,\n    .manufacturer-info,\n    .design-heading {\n      display: block;\n    }\n    .color-tile,\n    .manufacturer-logo,\n    .variation-preview {\n      margin: 0;\n    }\n  }\n`;\n\n/**\n * The sidebar displayed when editing/creating a new design\n */\nconst Sidebar = ({\n  appliedColors,\n  manufacturer,\n  product,\n  design,\n  selectedVariation,\n  selectedColor,\n  onColorSelect,\n  onVariationSelect\n}) => (\n  <StyledSidebar>\n    {sidebar => (\n      <React.Fragment>\n        <sidebar.components.Item\n          className=\"testing_manufacturer\"\n          isLight\n          as={product.get(\"url\") || manufacturer.get(\"website\") ? \"a\" : \"div\"}\n          href={product.get(\"url\") || manufacturer.get(\"website\")}\n          target=\"_blank\"\n          hasAction={!!(product.get(\"url\") || manufacturer.get(\"website\"))}\n        >\n          <ManufacturerLogo\n            className=\"manufacturer-logo\"\n            size={32}\n            noMargin\n            src={getAssetUrl(`/logos/${manufacturer.get(\"logo\")}`)}\n          />\n          <div className=\"manufacturer-info\">\n            {product.get(\"name\")}\n            <br />\n            <small>by {manufacturer.get(\"name\")}</small>\n          </div>\n        </sidebar.components.Item>\n        {design && (\n          <sidebar.components.Heading\n            className=\"testing_design design-heading\"\n            isLight\n          >\n            {design.get(\"name\")}\n          </sidebar.components.Heading>\n        )}\n        {product.get(\"variations\").map(variation => (\n          <sidebar.components.Item\n            className=\"testing_variation\"\n            isLight\n            hasAction\n            isActive={variation.id === selectedVariation}\n            key={variation.id}\n            onClick={() => onVariationSelect(variation.id)}\n          >\n            <VariationPreview className=\"variation-preview\">\n              <ColorableSvg\n                svg={variation.svg}\n                colorMap={appliedColors[variation.id] || {}}\n              />\n            </VariationPreview>\n            <span className=\"variation-label\"> {variation.name}</span>\n          </sidebar.components.Item>\n        ))}\n        <sidebar.components.Heading isLight className=\"colors-heading\">\n          <Icon icon=\"palette\" /> Colors\n        </sidebar.components.Heading>\n        <FillToBottom offset={33} strict minHeight={300}>\n          {product.get(\"colors\").map(color => (\n            <sidebar.components.Item\n              className=\"testing_color\"\n              isLight\n              hasAction\n              key={color.name}\n              isActive={color.name === selectedColor}\n              onClick={() => onColorSelect(color.name)}\n            >\n              <ColorTile color={color.color} className=\"color-tile\" />\n              <span className=\"color-label\"> {color.name}</span>\n            </sidebar.components.Item>\n          ))}\n        </FillToBottom>\n      </React.Fragment>\n    )}\n  </StyledSidebar>\n);\n\nSidebar.propTypes = {\n  appliedColors: productAppliedColorsShape.isRequired,\n  /**\n   * The manufacturer that creates the product being edited.\n   */\n  manufacturer: PropTypes.instanceOf(Manufacturer).isRequired,\n  /**\n   * The produt that is being edited\n   */\n  product: PropTypes.instanceOf(Product).isRequired,\n  /**\n   * The pre-existing design that is being edited, if any\n   */\n  design: PropTypes.instanceOf(Design),\n  /**\n   * The name of the variation that is currently selected\n   */\n  selectedVariation: PropTypes.string.isRequired,\n  /**\n   * The name of the color that is currently selected\n   */\n  selectedColor: PropTypes.string.isRequired,\n  /**\n   * Called when a color is selected.\n   * Is provided with the color name as the first parameter.\n   */\n  onColorSelect: PropTypes.func.isRequired,\n  /**\n   * Called when a variation is selected.\n   * Is provided with the variation id as the first parameter.\n   */\n  onVariationSelect: PropTypes.func.isRequired\n};\n\nexport default Sidebar;\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport { appliedColorsShape } from \"../../containers/EditorContainer\";\nimport ColorableSvg from \"./ColorableSvg\";\n\nexport const StyleWrapper = styled.div`\n  flex-grow: 1;\n  ${props => props.theme.patterns.transparencyBackground};\n  padding: 16px;\n  ${props =>\n    props.background\n      ? css`\n          background: url(${props.background});\n          background-size: cover;\n          background-position: center;\n        `\n      : null};\n\n  > div {\n    min-height: 50vh;\n    width: 100%;\n    height: 100%;\n    position: relative;\n  }\n  svg {\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    max-width: 100%;\n    max-height: 100%;\n\n    *[data-id] {\n      cursor: ${props => (props.isReadOnly ? \"default\" : \"pointer\")};\n    }\n  }\n`;\n\n/**\n * Canvas is a UI component for the editing area. It displays a product and allows the user to click\n * on enabled panels.\n */\nclass Canvas extends React.Component {\n  static propTypes = {\n    background: PropTypes.string,\n    hideOutlines: PropTypes.bool,\n    /**\n     * The product SVG to be rendered and interacted with. Colorable elements (path, polygon, g)\n     * should be given a data-id attribute. That is used to indicate that the panel/group can be\n     * colored, and it is also used to indicate the coorelation between panels/groups in different\n     * variations (used for autofill).\n     *\n     * A panel/group may also have a data-whitelist property that contains a comma separated list of\n     * color names that may be used on that panel/group.\n     */\n    svg: PropTypes.string.isRequired,\n    /**\n     * Called when a colorable panel or group is clicked. Is provided with the data-id value as the\n     * first parameter.\n     */\n    onClick: PropTypes.func,\n    /**\n     * The currently selected color. This is needed to prevent triggering onClick when a panel/group\n     * with data-whitelist is clicked and the current color is not in that whitelist.\n     */\n    currentColor: PropTypes.string,\n    /**\n     * A map of colors currently applied to the svg\n     */\n    colorMap: appliedColorsShape,\n    /**\n     * Indicates that the canvas is read-only. Will not fire onClick events.\n     */\n    isReadOnly: PropTypes.bool\n  };\n  static defaultProps = {\n    onClick: () => {},\n    colorMap: {},\n    currentColor: \"\"\n  };\n\n  /**\n   * Handle click events by deciding if it is a relevant item that was clicked.\n   * @param  {Object} event The DOM click event\n   */\n  handleClick = event => {\n    // Checks if the the currentColor can be applied given the content or absence of a whitelist.\n    const checkWhitelist = whitelist => {\n      return (\n        !whitelist ||\n        !whitelist.length ||\n        whitelist.includes(this.props.currentColor.toLowerCase())\n      );\n    };\n\n    // Parses a string form the data-whitelist property into an array of lowercase,trimmed values\n    const processWhitelist = whitelistString => {\n      return whitelistString\n        .split(\",\")\n        .map(color => color.trim().toLowerCase())\n        .filter(color => !!color);\n    };\n\n    // Get the data-id attribute from the target.\n    const targetId = event.target.getAttribute(\"data-id\");\n    if (targetId) {\n      // Get the data-whitelist attribute which contains a comma separated list of color names that can\n      // be applied\n      const whitelistString = event.target.getAttribute(\"data-whitelist\") || \"\";\n      const whitelist = processWhitelist(whitelistString);\n\n      // If the whitelist is empty or it contains the current color, trigger onClick\n      if (checkWhitelist(whitelist)) {\n        this.props.onClick(targetId);\n        return;\n      }\n      return;\n    }\n\n    // If there is no parent element, return\n    if (!event.target.parentElement) {\n      return;\n    }\n\n    // If there was no id on the target, check the parent to see if it is colored as a group\n    const parentGroupId = event.target.parentElement.getAttribute(\"data-id\");\n\n    // If there's no group id, then there's nothing to color.\n    if (!parentGroupId) {\n      return;\n    }\n\n    // Get the whitelist of colors for the group\n    const whitelistString =\n      event.target.parentElement.getAttribute(\"data-whitelist\") || \"\";\n    const whitelist = processWhitelist(whitelistString);\n\n    // Call onClick if the current color is in the whitelist or if the whitelist is empty\n    if (checkWhitelist(whitelist)) {\n      this.props.onClick(parentGroupId);\n      return;\n    }\n  };\n\n  render() {\n    return (\n      <StyleWrapper\n        onClick={this.props.isReadOnly ? () => {} : this.handleClick}\n        isReadOnly={this.props.isReadOnly}\n        background={this.props.background}\n      >\n        <ColorableSvg\n          hideOutlines={this.props.hideOutlines}\n          svg={this.props.svg}\n          colorMap={this.props.colorMap}\n        />\n      </StyleWrapper>\n    );\n  }\n}\n\nexport default Canvas;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport { Icon, Modal, H3, P, ModalClose } from \"../../theme\";\n\nexport const StyleWrapper = styled.div`\n  position: fixed;\n  bottom: 50px;\n  right: 8px;\n  background: ${props => props.theme.colors.white};\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  text-align: center;\n  cursor: pointer;\n  line-height: 32px;\n  cursor: pointer;\n  transition: transform 0.3s;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n`;\n\n/**\n * Displays an info icon that opens a modal when clicked. The modal contains\n * the provided notes.\n */\nclass ProductNotes extends React.Component {\n  static propTypes = {\n    /** The notes to be displayed in the modal */\n    notes: PropTypes.arrayOf(PropTypes.string).isRequired\n  };\n\n  state = {\n    isOpen: false\n  };\n\n  handleOpen = () => this.setState({ isOpen: true });\n  handleClose = () => this.setState({ isOpen: false });\n\n  render() {\n    return (\n      <Modal\n        isOpen={this.state.isOpen}\n        onBackdropClick={this.handleClose}\n        modalContent={\n          <React.Fragment>\n            <ModalClose onClick={this.handleClose} />\n            <H3>Notes:</H3>\n            {this.props.notes.map(\n              (note, index) => note.trim() && <P key={note + index}>{note}</P>\n            )}\n          </React.Fragment>\n        }\n      >\n        <StyleWrapper onClick={this.handleOpen}>\n          <Icon icon=\"info\" />\n        </StyleWrapper>\n      </Modal>\n    );\n  }\n}\nexport default ProductNotes;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport CreateNewContainer from \"../../containers/CreateNewContainer\";\nimport EditorContainer from \"../../containers/EditorContainer\";\nimport UserContainer from \"../../containers/UserContainer\";\nimport { PageLoader } from \"../../theme\";\nimport Toolbar from \"../editor/Toolbar\";\nimport Sidebar from \"../editor/Sidebar\";\nimport Canvas from \"../editor/Canvas\";\nimport ProductNotes from \"../editor/ProductNotes\";\nimport ErrorPage from \"../ErrorPage\";\n\nconst PageLayout = styled.div`\n  display: flex;\n  justify-content: stretch;\n  position: relative;\n\n  .product-notes {\n    position: absolute;\n    background: rgba(0, 0, 0, 0.8);\n    bottom: 0;\n    right: 0;\n    padding: 8px;\n    max-width: calc(100% - 200px);\n  }\n`;\n\n/**\n * A coordinating component that builds the CreatNew page.\n * The CreateNew page is provided a productId from the router, and is intended to create a new\n * design based on that product.\n */\nconst CreateNew = ({ match }) => (\n  <CreateNewContainer productId={match.params.productId}>\n    {createNewData => {\n      if (createNewData.props.isLoading) {\n        return <PageLoader />;\n      }\n      if (!createNewData.props.product) {\n        return <ErrorPage />;\n      }\n      return (\n        <EditorContainer product={createNewData.props.product}>\n          {editorData => (\n            <React.Fragment>\n              <UserContainer>\n                {userData => (\n                  <Toolbar\n                    hideOutlines={editorData.props.hideOutlines}\n                    onAutofill={editorData.actions.autofill}\n                    onBackgroundChange={editorData.actions.changeBackground}\n                    onHideOutlines={editorData.actions.toggleHideOutlines}\n                    onSave={name => {\n                      editorData.actions.save({\n                        name,\n                        user: userData.props.isLoggedIn\n                          ? userData.props.id\n                          : \"0\"\n                      });\n                    }}\n                    onRedo={editorData.actions.redo}\n                    onReset={editorData.actions.reset}\n                    onUndo={editorData.actions.undo}\n                    redoDisabled={!editorData.props.canRedo}\n                    undoDisabled={!editorData.props.canUndo}\n                  />\n                )}\n              </UserContainer>\n              <PageLayout>\n                <Sidebar\n                  product={createNewData.props.product}\n                  manufacturer={createNewData.props.manufacturer}\n                  selectedVariation={editorData.props.currentVariation.id}\n                  selectedColor={editorData.props.currentColor.name}\n                  onColorSelect={editorData.actions.selectColor}\n                  onVariationSelect={editorData.actions.selectVariation}\n                  appliedColors={editorData.props.appliedColors}\n                />\n                <Canvas\n                  background={editorData.props.background}\n                  hideOutlines={editorData.props.hideOutlines}\n                  colorMap={editorData.props.currentVariationColors}\n                  svg={editorData.props.currentVariation.svg}\n                  onClick={editorData.actions.applyColor}\n                  currentColor={editorData.props.currentColor.name}\n                />\n                {createNewData.props.product.get(\"notes\") &&\n                  !!createNewData.props.product.get(\"notes\").length && (\n                    <ProductNotes\n                      notes={createNewData.props.product.get(\"notes\")}\n                    />\n                  )}\n              </PageLayout>\n            </React.Fragment>\n          )}\n        </EditorContainer>\n      );\n    }}\n  </CreateNewContainer>\n);\n\nCreateNew.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      productId: PropTypes.string.isRequired\n    })\n  })\n};\n\nexport default CreateNew;\n","import { handleActions } from \"redux-actions\";\nimport { fromJS } from \"immutable\";\nimport {\n  GET_DESIGNS,\n  GET_DESIGN,\n  DELETE_DESIGN,\n  UPDATE_DESIGN\n} from \"../actions\";\n\nexport const defaultState = fromJS({});\n\n/**\n * The reducer managing retrieved designs.\n */\nexport default handleActions(\n  {\n    [GET_DESIGNS.RECEIVED]: (state, action) => {\n      const { data } = action.payload;\n      const designsById = data.reduce((accumulated, design) => {\n        accumulated[design.get(\"id\")] = design;\n        return accumulated;\n      }, {});\n      return state.merge(designsById);\n    },\n    [GET_DESIGN.RECEIVED]: (state, action) => {\n      const { data } = action.payload;\n      if (!data || !data.get) {\n        return state;\n      }\n      return state.set(data.get(\"id\"), data);\n    },\n    [DELETE_DESIGN.RECEIVED]: (state, action) => {\n      const { data } = action.payload;\n      const deletedId = data.id;\n      return state.delete(deletedId);\n    },\n    [UPDATE_DESIGN.RECEIVED]: (state, action) => {\n      const { data } = action.payload;\n      if (!data || !data.get) {\n        return state;\n      }\n      const id = data.get(\"id\");\n      return state.set(id, data);\n    }\n  },\n  defaultState\n);\n\nconst sortNewestToOldest = (designA, designB) => {\n  const aId = designA.get(\"updatedDate\");\n  const bId = designB.get(\"updatedDate\");\n  if (aId > bId) {\n    return -1;\n  }\n  if (aId < bId) {\n    return 1;\n  }\n  return 0;\n};\n\n/**\n * Get the x most recent designs.\n * @param  {Map} state\n * @param {Number} count The number of designs to retrieve\n * @return {Design[]} an array of designs\n */\nexport const getRecentDesigns = (state, count) => {\n  const designs = state.get(\"designs\");\n  return designs\n    .filter(design => design.get(\"isPublic\"))\n    .sort(sortNewestToOldest)\n    .toList()\n    .toJS()\n    .slice(0, count);\n};\n\n/**\n * Get designs created by the specified user\n * @param  {Map} state\n * @param  {Object[]} userId The ID of the user\n * @return {Design[]}\n */\nexport const getDesignsByUser = (state, userId) => {\n  const designs = state.get(\"designs\");\n  return designs\n    .filter(design => design.get(\"user\") === userId)\n    .sort(sortNewestToOldest)\n    .toList()\n    .toJS();\n};\n\n/**\n * Get a design by ID\n * @param  {Map} state\n * @param  {String} id The ID of the design to retrieve\n * @return {Design} The design\n */\nexport const getDesignById = (state, id) => {\n  const design = state.getIn([\"designs\", id]);\n  return design || null;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { getRecentDesigns } from \"../redux/modules/designs\";\nimport { getProductsWithIndex } from \"../redux/modules/products\";\nimport { getManufacturersWithIndex } from \"../redux/modules/manufacturers\";\nimport { GET_DESIGNS, GET_PRODUCTS, GET_MANUFACTURERS } from \"../redux/actions\";\nimport Design from \"../models/Design\";\nimport Product from \"../models/Product\";\nimport Manufacturer from \"../models/Manufacturer\";\nimport { makeCancelable } from \"../utils\";\n\nconst PAGE_SIZE = 50;\n\n/**\n * Manages pagination for the DesignsContainer\n */\nexport class Counter extends React.Component {\n  static propTypes = {\n    children: PropTypes.func.isRequired\n  };\n\n  state = {\n    count: 0\n  };\n\n  /**\n   * Increment the count by the provided page size\n   * @param  {Number} pageSize\n   */\n  updateCount = pageSize => {\n    const count = this.state.count;\n    this.setState({\n      count: count + pageSize\n    });\n  };\n\n  render() {\n    return this.props.children({\n      actions: {\n        updateCount: this.updateCount\n      },\n      props: {\n        count: this.state.count\n      }\n    });\n  }\n}\n\nexport class Data extends React.Component {\n  static propTypes = {\n    /** Indicates how many items should be loaded for sake of pagination. Provided as a prop so it can be provided in mapDispatchToProps. */\n    loadedCount: PropTypes.number.isRequired,\n    /** Called after each request for designs to increase the\n     loadedCount. Is provided with the amount to increase the count\n     by as the first param.*/\n    onChangeLoadedCount: PropTypes.func.isRequired,\n    /**\n     * A function that triggers the retieval of the user's designs. Provided by Redux.\n     */\n    onFetchDesigns: PropTypes.func.isRequired,\n    /**\n     * A function that triggers the retrieval of products. Provided by Redux.\n     */\n    onFetchProducts: PropTypes.func.isRequired,\n    /**\n     * A function that triggers the retireval of manufacturers. Provided by Redux.\n     */\n    onFetchManufacturers: PropTypes.func.isRequired,\n    /**\n     * The designs created by the current user. Provided by Redux.\n     */\n    designs: PropTypes.arrayOf(PropTypes.instanceOf(Design)).isRequired,\n    /**\n     * All of the products, indexed by ID. Provided by Redux.\n     */\n    products: PropTypes.objectOf(PropTypes.instanceOf(Product)).isRequired,\n    /**\n     * All the manufacturers, indexed by ID. Provided by Redux.\n     */\n    manufacturers: PropTypes.objectOf(PropTypes.instanceOf(Manufacturer))\n      .isRequired,\n    /**\n     * A function that renders content.\n     */\n    children: PropTypes.func.isRequired\n  };\n\n  state = {\n    /**\n     *\n     * @type {Boolean}\n     */\n    isLoading: true,\n    hasMore: true\n  };\n\n  /**\n   * Fetches the designs. Fetches more designs each time it is\n   * called.\n   * Retrurns a Promise that is already cancelable.\n   *\n   * @param {Boolean} [setLoading=true] If true, will toggle isLoading on state.\n   * @return {Promise}\n   */\n  _fetchDesigns = (setLoading = true) => {\n    if (setLoading) {\n      this.setState({ isLoading: true });\n    }\n    const request = makeCancelable(\n      this.props.onFetchDesigns(\n        {\n          limit: `${this.props.loadedCount}, ${this.props.loadedCount +\n            PAGE_SIZE}`,\n          publicOnly: true\n        },\n        false // dont cache this request\n      )\n    );\n    request.promise\n      .then(response => {\n        // Get the number of items returned\n        const count = response.data.length;\n\n        this.setState({\n          // The API will return all of the items so far. If it\n          // returned fewer than the previous count + the page size,\n          // then there are no more items to retrieve.\n          hasMore: count >= this.props.loadedCount + PAGE_SIZE\n        });\n        this.props.onChangeLoadedCount(count);\n\n        if (setLoading) {\n          this.setState({\n            isLoading: false\n          });\n        }\n      })\n      .catch(() => {});\n    this.cancelablePromises.push(request);\n    return request.promise;\n  };\n\n  componentDidMount() {\n    // fetch designs, products, and manufacturers\n    const designRequest = this._fetchDesigns(false);\n    const productRequest = makeCancelable(this.props.onFetchProducts());\n    const manufacturerRequest = makeCancelable(\n      this.props.onFetchManufacturers()\n    );\n\n    this.cancelablePromises.push(productRequest);\n    this.cancelablePromises.push(manufacturerRequest);\n\n    Promise.all([\n      designRequest,\n      productRequest.promise,\n      manufacturerRequest.promise\n    ])\n      .then(() => {\n        this.setState({\n          isLoading: false\n        });\n      })\n      .catch(responses => {\n        if (responses[0].isCanceled) {\n          return;\n        }\n        this.setState({\n          isLoading: false\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    this.cancelablePromises.forEach(cancelable => cancelable.cancel());\n  }\n\n  cancelablePromises = [];\n\n  render() {\n    return this.props.children({\n      actions: {\n        loadMore: this._fetchDesigns\n      },\n      props: {\n        hasMore: this.state.hasMore,\n        isLoading: this.state.isLoading,\n        designs: this.props.designs,\n        products: this.props.products,\n        manufacturers: this.props.manufacturers\n      }\n    });\n  }\n}\n\nconst mapStateToProps = (state, props) => ({\n  designs: getRecentDesigns(state, props.loadedCount),\n  products: getProductsWithIndex(state),\n  manufacturers: getManufacturersWithIndex(state)\n});\n\nconst mapDispatchToProps = {\n  onFetchDesigns: GET_DESIGNS,\n  onFetchProducts: GET_PRODUCTS,\n  onFetchManufacturers: GET_MANUFACTURERS\n};\n\nconst DataConnected = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Data);\n\n/**\n * Retrieves and manages public designs with pagination\n */\nconst DesignsContainer = ({ children }) => (\n  <Counter>\n    {counter => (\n      <DataConnected\n        loadedCount={counter.props.count}\n        onChangeLoadedCount={counter.actions.updateCount}\n      >\n        {data => children(data)}\n      </DataConnected>\n    )}\n  </Counter>\n);\n\nDesignsContainer.propTypes = {\n  children: PropTypes.func.isRequired\n};\n\nexport default DesignsContainer;\n","import React from \"react\";\nimport DesignsContainer from \"../../containers/DesignsContainer\";\nimport { Button, Loading, Spacer, H1, P } from \"../../theme\";\nimport RecentDesigns from \"../RecentDesigns\";\n\nconst Designs = () => (\n  <Spacer top=\"md\" right=\"md\" left=\"md\" bottom=\"md\">\n    <React.Fragment>\n      <H1>Public Designs</H1>\n      <Spacer bottom=\"md\" />\n      <P>\n        Designs that were made by other KitePaint users and are set to public.\n      </P>\n      <DesignsContainer>\n        {designs => (\n          <React.Fragment>\n            {designs.props.isLoading && (\n              <Spacer top=\"md\" bottom=\"md\">\n                <Loading />\n              </Spacer>\n            )}\n            {/* <RecentDesigns\n              designs={designs.props.designs}\n              products={designs.props.products}\n              manufacturers={designs.props.manufacturers}\n              cta={\n                designs.props.hasMore && (\n                  <Button\n                    disabled={designs.props.isLoading}\n                    onClick={designs.actions.loadMore}\n                    isPrimary\n                    isBlock\n                  >\n                    Load More\n                  </Button>\n                )\n              }\n            /> */}\n          </React.Fragment>\n        )}\n      </DesignsContainer>\n    </React.Fragment>\n  </Spacer>\n);\n\nexport default Designs;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport Design from \"../models/Design\";\nimport Product from \"../models/Product\";\nimport Manufacturer from \"../models/Manufacturer\";\nimport { P } from \"../theme\";\nimport { getAssetUrl } from \"../utils\";\nimport Svg from \"./Svg\";\nimport ManufacturerLogo from \"./ManufacturerLogo\";\n\nconst StyleWrapper = styled.div`\n  padding: 16px;\n  > .designs {\n    display: flex;\n    justify-content: space-evenly;\n    flex-wrap: wrap;\n  }\n  .design-preview {\n    width:200px\n    height: 200px;\n    flex-shrink: 0;\n    margin: 8px;\n    border: 1px solid ${props => props.theme.colors.gray};\n    border-radius: 4px;\n    ${props => props.theme.patterns.transparencyBackground};\n\n    > svg {\n      position: relative;\n      top: 50%;\n      transform: translateY(-50%) rotate(45deg);\n    }\n  }\n  > .cta {\n    max-width: 400px;\n    margin: 0 auto;\n  }\n  .design-name {\n    position: absolute;\n    bottom: 10%;\n    left: 0;\n    padding: 4px;\n    background: rgba(0,0,0,.8);\n    transition: .5s transform;\n  }\n  .design-wrapper {\n    position: relative;\n    overflow: hidden;\n    cursor: pointer;\n  }\n  .logo {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n`;\n\n/**\n * The banner displaying the recently created public designs.\n */\nconst RecentDesigns = ({ designs, products, manufacturers, cta }) => {\n  if (!products || !manufacturers) {\n    return null;\n  }\n  return (\n    <StyleWrapper>\n      <div className=\"designs\">\n        {designs.map(design => {\n          const product = products[design.get(\"product\")];\n          const manufacturer = manufacturers[product.get(\"manufacturer\")];\n          return (\n            <Link\n              key={design.get(\"id\")}\n              className=\"design-wrapper\"\n              to={`/view/${design.get(\"id\")}`}\n            >\n              <Svg\n                className=\"design-preview\"\n                svg={\n                  design.get(\"variations\").find(variation => variation.primary)\n                    .svg\n                }\n              />\n              <P isLight className=\"design-name\">\n                {design.get(\"name\")}\n              </P>\n              <ManufacturerLogo\n                className=\"logo\"\n                src={getAssetUrl(`/logos/${manufacturer.get(\"logo\")}`)}\n                noMargin\n                size={45}\n              />\n            </Link>\n          );\n        })}\n      </div>\n      {cta && <div className=\"cta\">{cta}</div>}\n    </StyleWrapper>\n  );\n};\n\nRecentDesigns.propTypes = {\n  /**\n   * The designs to be displayed\n   */\n  designs: PropTypes.arrayOf(PropTypes.instanceOf(Design)).isRequired,\n  manufacturers: PropTypes.objectOf(PropTypes.instanceOf(Manufacturer))\n    .isRequired,\n  products: PropTypes.objectOf(PropTypes.instanceOf(Product)).isRequired,\n  cta: PropTypes.node\n};\n\nexport default RecentDesigns;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { getUser } from \"../redux/modules/user\";\nimport { getDesignById } from \"../redux/modules/designs\";\nimport { getProductById } from \"../redux/modules/products\";\nimport { getManufacturerByProductId } from \"../redux/modules/manufacturers\";\nimport { GET_DESIGN, GET_PRODUCTS, GET_MANUFACTURERS } from \"../redux/actions\";\nimport Design from \"../models/Design\";\nimport Product from \"../models/Product\";\nimport Manufacturer from \"../models/Manufacturer\";\nimport { makeCancelable } from \"../utils\";\n\n/**\n * Provides information about a specific product.\n */\nexport class EditContainer extends React.Component {\n  static propTypes = {\n    /**\n     * The ID of the design to get information about.\n     */\n    designId: PropTypes.string.isRequired,\n    /**\n     * The design being edited\n     */\n    design: PropTypes.instanceOf(Design),\n    /**\n     * The product. Provided by redux.\n     */\n    product: PropTypes.instanceOf(Product),\n    /**\n     * The manufactuer of the product. Provided by redux.\n     */\n    manufacturer: PropTypes.instanceOf(Manufacturer),\n    /**\n     * The currently logged in user\n     */\n    user: PropTypes.shape({\n      id: PropTypes.string\n    }),\n    /**\n     * A function to request the design be fetched. Provided by redux.\n     */\n    onRequestDesign: PropTypes.func.isRequired,\n    /**\n     * A function to request the product be fetched. Provided by redux.\n     */\n    onRequestProduct: PropTypes.func.isRequired,\n    /**\n     * A function to request the manufacturer of the product be fetched. Provided by redux.\n     */\n    onRequestManufacturer: PropTypes.func.isRequired,\n    /**\n     * A function that returns the content to be rendered.\n     */\n    children: PropTypes.func.isRequired\n  };\n\n  state = {\n    isLoading: true\n  };\n\n  componentDidMount() {\n    // Requesting data used on the edit page\n    const productRequest = makeCancelable(this.props.onRequestProduct());\n    const manufacturerRequest = makeCancelable(\n      this.props.onRequestManufacturer()\n    );\n    const designRequest = makeCancelable(\n      this.props.onRequestDesign(this.props.designId)\n    );\n    this.cancelablePromises.push(productRequest);\n    this.cancelablePromises.push(manufacturerRequest);\n    this.cancelablePromises.push(designRequest);\n    Promise.all([\n      productRequest.promise,\n      manufacturerRequest.promise,\n      designRequest.promise\n    ])\n      .then(() => {\n        this.setState({\n          isLoading: false\n        });\n      })\n      .catch(() => {\n        this.setState({\n          isLoading: false\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    this.cancelablePromises.forEach(cancelable => cancelable.cancel());\n  }\n\n  cancelablePromises = [];\n\n  render() {\n    // If the design was not made by the current user, don't provide it.\n    const userMatchesDesign =\n      this.props.design && this.props.design.get(\"user\") === this.props.user.id;\n    return this.props.children({\n      props: {\n        design: userMatchesDesign ? this.props.design : null,\n        isLoading: this.state.isLoading,\n        product: this.props.product,\n        manufacturer: this.props.manufacturer,\n        user: this.props.user\n      }\n    });\n  }\n}\n\nconst mapStateToProps = (state, props) => ({\n  user: getUser(state),\n  product: getProductById(state, props.design && props.design.get(\"product\")),\n  manufacturer: getManufacturerByProductId(\n    state,\n    props.design && props.design.get(\"product\")\n  )\n});\n\nconst mapDispatchToProps = {\n  onRequestDesign: GET_DESIGN,\n  onRequestProduct: GET_PRODUCTS,\n  onRequestManufacturer: GET_MANUFACTURERS\n};\n\nconst withoutDesign = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(EditContainer);\n\nexport default connect((state, props) => ({\n  design: getDesignById(state, props.designId)\n}))(withoutDesign);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport EditContainer from \"../../containers/EditContainer\";\nimport EditorContainer from \"../../containers/EditorContainer\";\nimport { PageLoader } from \"../../theme\";\nimport Toolbar from \"../editor/Toolbar\";\nimport Sidebar from \"../editor/Sidebar\";\nimport Canvas from \"../editor/Canvas\";\nimport ProductNotes from \"../editor/ProductNotes\";\nimport ErrorPage from \"../ErrorPage\";\n\nconst PageLayout = styled.div`\n  display: flex;\n  justify-content: stretch;\n  position: relative;\n\n  .product-notes {\n    position: absolute;\n    background: rgba(0, 0, 0, 0.8);\n    bottom: 0;\n    right: 0;\n    padding: 8px;\n    max-width: calc(100% - 200px);\n  }\n`;\n\n/**\n * A coordinating component that builds the CreatNew page.\n * The CreateNew page is provided a productId from the router, and is intended to create a new\n * design based on that product.\n */\nconst Edit = ({ match }) => (\n  <EditContainer designId={match.params.designId}>\n    {editData => {\n      if (editData.props.isLoading) {\n        return <PageLoader />;\n      }\n      if (!editData.props.design) {\n        return <ErrorPage />;\n      }\n      if (!editData.props.product) {\n        return (\n          <ErrorPage errorMessage=\"This product is no longer available.\" />\n        );\n      }\n      return (\n        <EditorContainer\n          design={editData.props.design}\n          product={editData.props.product}\n        >\n          {editorData => (\n            <React.Fragment>\n              <Toolbar\n                design={editData.props.design}\n                hideOutlines={editorData.props.hideOutlines}\n                onAutofill={editorData.actions.autofill}\n                onBackgroundChange={editorData.actions.changeBackground}\n                onHideOutlines={editorData.actions.toggleHideOutlines}\n                onRedo={editorData.actions.redo}\n                onReset={editorData.actions.reset}\n                onSave={name =>\n                  editorData.actions.save({\n                    name,\n                    user: editData.props.user.id\n                  })\n                }\n                onUndo={editorData.actions.undo}\n                onUpdate={editorData.actions.update}\n                redoDisabled={!editorData.props.canRedo}\n                showSettings\n                undoDisabled={!editorData.props.canUndo}\n              />\n              <PageLayout>\n                <Sidebar\n                  design={editData.props.design}\n                  product={editData.props.product}\n                  manufacturer={editData.props.manufacturer}\n                  selectedVariation={editorData.props.currentVariation.id}\n                  selectedColor={editorData.props.currentColor.name}\n                  onColorSelect={editorData.actions.selectColor}\n                  onVariationSelect={editorData.actions.selectVariation}\n                  appliedColors={editorData.props.appliedColors}\n                />\n                <Canvas\n                  hideOutlines={editorData.props.hideOutlines}\n                  background={editorData.props.background}\n                  colorMap={editorData.props.currentVariationColors}\n                  svg={editorData.props.currentVariation.svg}\n                  onClick={editorData.actions.applyColor}\n                  currentColor={editorData.props.currentColor.name}\n                />\n                {editData.props.product.get(\"notes\") &&\n                  !!editData.props.product.get(\"notes\").length && (\n                    <ProductNotes notes={editData.props.product.get(\"notes\")} />\n                  )}\n              </PageLayout>\n            </React.Fragment>\n          )}\n        </EditorContainer>\n      );\n    }}\n  </EditContainer>\n);\n\nEdit.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      designId: PropTypes.string.isRequired\n    })\n  })\n};\n\nexport default Edit;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport Design from \"../models/Design\";\nimport Product from \"../models/Product\";\nimport Manufacturer from \"../models/Manufacturer\";\nimport { getRecentDesigns } from \"../redux/modules/designs\";\nimport { getProductsWithIndex } from \"../redux/modules/products\";\nimport { getManufacturersWithIndex } from \"../redux/modules/manufacturers\";\nimport { GET_DESIGNS, GET_PRODUCTS, GET_MANUFACTURERS } from \"../redux/actions\";\nimport { makeCancelable } from \"../utils\";\n\n/**\n * Provides information and actions about/for Designs.\n */\nexport class RecentDesignsContainer extends React.Component {\n  static propTypes = {\n    /**\n     * A function returning content to be rendered\n     */\n    children: PropTypes.func.isRequired,\n    /**\n     * A list of designs\n     */\n    designs: PropTypes.arrayOf(PropTypes.instanceOf(Design)).isRequired,\n    /** The manufacturers indexed by id */\n    manufacturers: PropTypes.objectOf(PropTypes.instanceOf(Manufacturer))\n      .isRequired,\n    /** The products indexed by id */\n    products: PropTypes.objectOf(PropTypes.instanceOf(Product)).isRequired,\n    /**\n     * A function to trigger the retrieval of the designs. This should update the redux state,\n     * causing designs to be provided through redux.\n     */\n    getDesigns: PropTypes.func.isRequired,\n    /** A function to trigger the retrieval of all products */\n    getProducts: PropTypes.func.isRequired,\n    /** A funciton to trigger the retrieval of all manufacturers */\n    getManufacturers: PropTypes.func.isRequired\n  };\n\n  state = {\n    isLoading: true\n  };\n\n  componentDidMount() {\n    // Get the designs, but limit the request to 6 since we don't need to show many.\n    const designRequest = makeCancelable(\n      this.props.getDesigns({\n        limit: 6\n      })\n    );\n    const productsRequest = makeCancelable(this.props.getProducts());\n    const manufacturersRequest = makeCancelable(this.props.getManufacturers());\n    this.cancelablePromises.push(designRequest);\n    this.cancelablePromises.push(productsRequest);\n    this.cancelablePromises.push(manufacturersRequest);\n\n    Promise.all([\n      designRequest.promise,\n      productsRequest.promise,\n      manufacturersRequest.promise\n    ])\n      .then(() => this.setState({ isLoading: false }))\n      .catch(response => {\n        if (response && response.isCanceled) {\n          return;\n        }\n        this.setState({ isLoading: false });\n      });\n  }\n\n  componentWillUnmount() {\n    this.cancelablePromises.forEach(cancelable => cancelable.cancel());\n  }\n\n  cancelablePromises = [];\n\n  render() {\n    return this.props.children({\n      props: {\n        isLoading: this.state.isLoading,\n        designs: this.props.designs,\n        products: this.props.products,\n        manufacturers: this.props.manufacturers\n      }\n    });\n  }\n}\n\nconst mapStateToProps = state => ({\n  designs: getRecentDesigns(state, 6),\n  products: getProductsWithIndex(state),\n  manufacturers: getManufacturersWithIndex(state)\n});\n\nconst mapDispatchToProps = {\n  getDesigns: GET_DESIGNS,\n  getProducts: GET_PRODUCTS,\n  getManufacturers: GET_MANUFACTURERS\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(RecentDesignsContainer);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { A, P, Label, Input, Button, Error, Tooltip } from \"../theme\";\n\n/**\n * A from for logging in to KitePaint.\n */\nconst LogInForm = ({\n  id,\n  isDisabled,\n  errorMessage,\n  onPasswordChange,\n  onRegister,\n  onResetPassword,\n  onSubmit,\n  onUsernameChange,\n  password,\n  username\n}) => (\n  <form\n    id={id}\n    onSubmit={e => {\n      e.preventDefault();\n      onSubmit();\n    }}\n  >\n    {errorMessage && (\n      <Error className=\"testing_error-message\">\n        <P>{errorMessage}</P>\n      </Error>\n    )}\n    <Label htmlFor={`${id}-username`}>\n      Username{\" \"}\n      <Tooltip>\n        Usernames may be between 3-30 characters.\n        <br />\n        They may include these characters: a-z, A-Z, 0-9.\n      </Tooltip>\n    </Label>\n    <Input\n      id={`${id}-username`}\n      value={username}\n      disabled={isDisabled}\n      onChange={e => onUsernameChange(e.target.value)}\n    />\n    <Label htmlFor={`${id}-password`}>\n      Password{\" \"}\n      <Tooltip>\n        Passwords may be between 6-15 characters.\n        <br />\n        They may include these characters: a-z, A-Z, 0-9, #, @, or *.\n      </Tooltip>\n    </Label>\n    <Input\n      id={`${id}-password`}\n      type=\"password\"\n      value={password}\n      disabled={isDisabled}\n      onChange={e => onPasswordChange(e.target.value)}\n    />\n    <Button isPrimary isBlock type=\"submit\" disabled={isDisabled}>\n      Sign In\n    </Button>\n    <P>\n      <A className=\"testing_reset-password\" onClick={onResetPassword}>\n        Lost your password?\n      </A>\n    </P>\n    <P>\n      <A className=\"testing_register\" onClick={onRegister}>\n        Register\n      </A>\n    </P>\n  </form>\n);\n\nLogInForm.propTypes = {\n  /**\n   * An identifieng string used to differentiate this from other instances\n   */\n  id: PropTypes.string.isRequired,\n  /**\n   * Indicates if the form should be disabled.\n   */\n  isDisabled: PropTypes.bool,\n  /**\n   * An error message to be displayed at the top of the form.\n   */\n  errorMessage: PropTypes.string,\n  /**\n   * A function called when the password field changes. Is called with the new value as the first\n   * parameter\n   */\n  onPasswordChange: PropTypes.func.isRequired,\n  /**\n   * A function called when the link to the register form is clicked.\n   */\n  onRegister: PropTypes.func.isRequired,\n  /**\n   * A function called when the link to the reset password form is clicked.\n   */\n  onResetPassword: PropTypes.func.isRequired,\n  /**\n   * A function called when the form is submitted.\n   */\n  onSubmit: PropTypes.func.isRequired,\n  /**\n   * A function called when the username is changed. Is called with the new username as the first\n   * parameter.\n   */\n  onUsernameChange: PropTypes.func.isRequired,\n  /**\n   * The value for the password field.\n   */\n  password: PropTypes.string,\n  /**\n   * The value for the username field.\n   */\n  username: PropTypes.string\n};\n\nexport default LogInForm;\n","import React from \"react\";\nimport LogInForm from \"../components/LogInForm\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport makeCancelable from \"../utils/makeCancelable\";\nimport { LOG_IN } from \"../redux/actions\";\n\nexport class LogInFormContainer extends React.Component {\n  static propTypes = {\n    /**\n     * An identifieng string used to differentiate this from other instances\n     */\n    id: PropTypes.string.isRequired,\n    /**\n     * A function called when the log in form is submitted.\n     * Provided by redux.\n     */\n    onSubmit: PropTypes.func.isRequired,\n    /**\n     * A function called when the link to the register form is clicked.\n     */\n    onRegister: PropTypes.func.isRequired,\n    /** A function called when the use successfully logs in */\n    onLogin: PropTypes.func,\n    /**\n     * A function called when the link to the reset password form is clicked.\n     */\n    onResetPassword: PropTypes.func.isRequired\n  };\n  static defaultProps = {\n    onLogin: () => {}\n  };\n  state = {\n    /**\n     * The user-entered username value.\n     * @type {String}\n     */\n    username: \"\",\n    /**\n     * The displayed error message.\n     * @type {String}\n     */\n    errorMessage: null,\n    /**\n     * The user-entered password value.\n     * @type {String}\n     */\n    password: \"\",\n    /**\n     * Is the register request pending?\n     * @type {Boolean}\n     */\n    pendingRequest: false\n  };\n\n  /**\n   * Handles changes to the username field by storing it in state\n   * @param  {String} username The new username\n   */\n  handleUsernameChange = username => {\n    this.setState({\n      username,\n      errorMessage: null\n    });\n  };\n\n  /**\n   * Handles changes to the password field by storing it in state\n   * @param  {String} password The new password\n   */\n  handlePasswordChange = password => {\n    this.setState({\n      password,\n      errorMessage: null\n    });\n  };\n\n  /**\n   * Handles the log in form submission\n   */\n  handleSubmit = () => {\n    this.setState({\n      pendingRequest: true\n    });\n    const cancelablePromise = makeCancelable(\n      this.props.onSubmit(this.state.username, this.state.password)\n    );\n    const promise = cancelablePromise.promise\n      .then(() => {\n        this.setState({\n          pendingRequest: false\n        });\n        this.props.onLogin();\n      })\n      .catch(error => {\n        if (error.isCanceled) {\n          return;\n        }\n        this.setState({\n          pendingRequest: false,\n          errorMessage: error\n        });\n      });\n    this.pendingPromises.push(cancelablePromise);\n    return promise;\n  };\n\n  pendingPromises = [];\n\n  componentWillUnmount() {\n    this.pendingPromises.forEach(promise => promise.cancel());\n  }\n\n  render() {\n    return (\n      <LogInForm\n        id={this.props.id}\n        errorMessage={this.state.errorMessage}\n        username={this.state.username}\n        password={this.state.password}\n        isDisabled={this.state.pendingRequest}\n        onUsernameChange={this.handleUsernameChange}\n        onPasswordChange={this.handlePasswordChange}\n        onSubmit={this.handleSubmit}\n        onRegister={this.props.onRegister}\n        onResetPassword={this.props.onResetPassword}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = () => ({});\n\nconst mapDispatchToProps = {\n  onSubmit: LOG_IN\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LogInFormContainer);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { A, P, Label, Input, Button, Error, Tooltip } from \"../theme\";\nimport { getAssetUrl } from \"../utils\";\n\n/**\n * A form for registering an account for KitePaint.\n */\nconst RegisterForm = ({\n  email,\n  errorMessage,\n  id,\n  isDisabled,\n  onEmailChange,\n  onLogIn,\n  onPasswordChange,\n  onPasswordConfirmationChange,\n  onSubmit,\n  onUsernameChange,\n  password,\n  passwordConfirmation,\n  showSuccessMessage,\n  username\n}) => (\n  <form\n    id={id}\n    onSubmit={e => {\n      e.preventDefault();\n      onSubmit();\n    }}\n  >\n    {showSuccessMessage ? (\n      <React.Fragment>\n        <P className=\"testing_success-message\">\n          A confirmation email has been sent to {email}. After confirming your\n          email address, you main sign in.\n        </P>\n        <Button type=\"button\" isPrimary isBlock onClick={onLogIn}>\n          Sign In\n        </Button>\n      </React.Fragment>\n    ) : (\n      <React.Fragment>\n        {errorMessage && (\n          <Error>\n            <P>{errorMessage}</P>\n          </Error>\n        )}\n        <Label htmlFor={`${id}-username`}>\n          Username{\" \"}\n          <Tooltip>\n            Usernames may be between 3-30 characters.\n            <br />\n            They may include these characters: a-z, A-Z, 0-9.\n          </Tooltip>\n        </Label>\n        <Input\n          id={`${id}-username`}\n          value={username}\n          disabled={isDisabled}\n          onChange={e => onUsernameChange(e.target.value)}\n        />\n        <Label htmlFor={`${id}-email`}>Email Address</Label>\n        <Input\n          id={`${id}-email`}\n          type=\"email\"\n          value={email}\n          disabled={isDisabled}\n          onChange={e => onEmailChange(e.target.value)}\n        />\n        <Label htmlFor={`${id}-password`}>\n          Password{\" \"}\n          <Tooltip>\n            Passwords may be between 6-15 characters.\n            <br />\n            They may include these characters: a-z, A-Z, 0-9, #, @, or *.\n          </Tooltip>\n        </Label>\n        <Input\n          id={`${id}-password`}\n          type=\"password\"\n          value={password}\n          disabled={isDisabled}\n          onChange={e => onPasswordChange(e.target.value)}\n        />\n        <Label htmlFor={`${id}-password-2`}>Confirm Password</Label>\n        <Input\n          id={`${id}-password-2`}\n          type=\"password\"\n          value={passwordConfirmation}\n          disabled={isDisabled}\n          onChange={e => onPasswordConfirmationChange(e.target.value)}\n        />\n        <Button disabled={isDisabled} isPrimary isBlock type=\"submit\">\n          Sign Up\n        </Button>\n        <P>\n          <A\n            href={getAssetUrl(\"/KitePaintTermsandConditions.pdf\")}\n            target=\"_blank\"\n          >\n            Terms and Conditions\n          </A>\n        </P>\n        <P>\n          Already registered?{\" \"}\n          <A className=\"testing_log-in\" onClick={onLogIn}>\n            Sign In\n          </A>\n        </P>\n      </React.Fragment>\n    )}\n  </form>\n);\n\nRegisterForm.propTypes = {\n  /**\n   * The value for the email field.\n   */\n  email: PropTypes.string,\n  /**\n   * An error message to be displayed at the top of the form.\n   */\n  errorMessage: PropTypes.string,\n  /**\n   * A unique identifier to distinguish this from other instances.\n   */\n  id: PropTypes.string.isRequired,\n  /**\n   * Indicates if the form should be disabled.\n   */\n  isDisabled: PropTypes.bool,\n  /**\n   * A function called when the email value is changed. Is called with the new email as the first\n   * parameter.\n   */\n  onEmailChange: PropTypes.func.isRequired,\n  /**\n   * A function called when the link to go to the log in form is clicked.\n   */\n  onLogIn: PropTypes.func.isRequired,\n  /**\n   * A function called when the password field changes. Is called with the new password as the first\n   * parameter.\n   */\n  onPasswordChange: PropTypes.func.isRequired,\n  /**\n   * A function called when the confirmation password changes. Is called with the new password as\n   * the first parameter.\n   */\n  onPasswordConfirmationChange: PropTypes.func.isRequired,\n  /**\n   * A function called when the form is submitted.\n   */\n  onSubmit: PropTypes.func.isRequired,\n  /**\n   * A function called when the username changes. Is called with the new username as the first\n   * parameter.\n   */\n  onUsernameChange: PropTypes.func.isRequired,\n  /**\n   * The value of the password field.\n   */\n  password: PropTypes.string,\n  /**\n   * The value of the confirmation password field.\n   */\n  passwordConfirmation: PropTypes.string,\n  /**\n   * Indicates if the success message should be shown.\n   */\n  showSuccessMessage: PropTypes.bool,\n  /**\n   * The value of the username field.\n   */\n  username: PropTypes.string\n};\n\nexport default RegisterForm;\n","import React from \"react\";\nimport RegisterForm from \"../components/RegisterForm\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { CREATE_ACCOUNT } from \"../redux/actions\";\n\nexport class RegisterFormContainer extends React.Component {\n  static propTypes = {\n    /**\n     * A unique identifier to distinguish this from other instances.\n     */\n    id: PropTypes.string.isRequired,\n    /**\n     * A function called when the link to go to the log in form is clicked.\n     */\n    onLogIn: PropTypes.func.isRequired,\n    /**\n     * A function called when the log in form is submitted.\n     * Provided by redux.\n     */\n    onSubmit: PropTypes.func.isRequired\n  };\n  state = {\n    /**\n     * The user entered email address. Used on the registration and reset password forms.\n     * @type {String}\n     */\n    email: \"\",\n    /**\n     * Is the register request pending?\n     * @type {Boolean}\n     */\n    pendingRequest: false,\n    /**\n     * The user entered password. Used on the registration and log in forms.\n     * @type {String}\n     */\n    password: \"\",\n    /**\n     * The user entered confirmation password. This is used to force the user to enter the password\n     * twice when registering. Used on the registration form.\n     * @type {String}\n     */\n    passwordConfirmation: \"\",\n    /**\n     * An error message to display when registration fails.\n     * @type {String}\n     */\n    errorMessage: null,\n    /**\n     * Indicates that a registration request has been sent. Should be set to true after submission\n     * of the registration form, that way we can display a success message to the user.\n     * @type {Boolean}\n     */\n    registrationSent: false,\n    /**\n     * The user entered username. Used on the registration, log in, and reset password forms.\n     * @type {String}\n     */\n    username: \"\"\n  };\n  /**\n   * Handles changes to the email field by storing it in state\n   * @param  {String} email The new email address\n   */\n  handleEmailChange = email => {\n    this.setState({\n      email,\n      errorMessage: null\n    });\n  };\n\n  /**\n   * Handles changes to the username field by storing it in state\n   * @param  {String} username The new username\n   */\n  handleUsernameChange = username => {\n    this.setState({\n      username,\n      errorMessage: null\n    });\n  };\n\n  /**\n   * Handles changes to the password field by storing it in state\n   * @param  {String} password The new password\n   */\n  handlePasswordChange = password => {\n    this.setState({\n      password,\n      errorMessage: null\n    });\n  };\n\n  /**\n   * Handles changes to the passwordConfirmation field by storing it in state\n   * @param  {String} passwordConfirmation The new passwordConfirmation\n   */\n  handlePasswordConfirmationChange = passwordConfirmation => {\n    this.setState({\n      passwordConfirmation,\n      errorMessage: null\n    });\n  };\n\n  /**\n   * Handles the log in form submission\n   */\n  handleSubmit = () => {\n    const data = {\n      email: this.state.email,\n      username: this.state.username,\n      password: this.state.password,\n      password2: this.state.passwordConfirmation\n    };\n    this.setState({\n      pendingRequest: true\n    });\n    return this.props\n      .onSubmit(data)\n      .then(() => {\n        this.setState({\n          pendingRequest: false,\n          registrationSent: true\n        });\n      })\n      .catch(error => {\n        this.setState({\n          pendingRequest: false,\n          errorMessage: error\n        });\n      });\n  };\n\n  render() {\n    return (\n      <RegisterForm\n        email={this.state.email}\n        errorMessage={this.state.errorMessage}\n        id={this.props.id}\n        isDisabled={this.state.pendingRequest}\n        onEmailChange={this.handleEmailChange}\n        onLogIn={this.props.onLogIn}\n        onPasswordChange={this.handlePasswordChange}\n        onPasswordConfirmationChange={this.handlePasswordConfirmationChange}\n        onSubmit={this.handleSubmit}\n        onUsernameChange={this.handleUsernameChange}\n        password={this.state.password}\n        passwordConfirmation={this.state.passwordConfirmation}\n        showSuccessMessage={this.state.registrationSent}\n        username={this.state.username}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = () => ({});\n\nconst mapDispatchToProps = {\n  onSubmit: CREATE_ACCOUNT\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(RegisterFormContainer);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { A, P, Error, Label, Input, Button, Tooltip } from \"../theme\";\n\nconst ResetPasswordForm = ({\n  email,\n  errorMessage,\n  id,\n  isDisabled,\n  onCancel,\n  onEmailChange,\n  onSubmit,\n  onUsernameChange,\n  showSuccessMessage,\n  username\n}) => (\n  <form\n    id={id}\n    onSubmit={e => {\n      e.preventDefault();\n      onSubmit();\n    }}\n  >\n    {showSuccessMessage ? (\n      <React.Fragment>\n        <P className=\"testing_success-message\">\n          An email containing a password reset link has been sent to {email}.\n        </P>\n        <Button type=\"button\" isPrimary isBlock onClick={onCancel}>\n          Sign In\n        </Button>\n      </React.Fragment>\n    ) : (\n      <React.Fragment>\n        {errorMessage && (\n          <Error>\n            <P>{errorMessage}</P>\n          </Error>\n        )}\n        <P>Enter your username and email address to reset your password.</P>\n        <Label htmlFor={`${id}-username`}>\n          Username{\" \"}\n          <Tooltip>\n            Usernames may be between 3-30 characters.\n            <br />\n            They may include these characters: a-z, A-Z, 0-9.\n          </Tooltip>\n        </Label>\n        <Input\n          id={`${id}-username`}\n          value={username}\n          disabled={isDisabled}\n          onChange={e => onUsernameChange(e.target.value)}\n        />\n        <Label htmlFor={`${id}-email`}>Email Address</Label>\n        <Input\n          id={`${id}-email`}\n          type=\"email\"\n          value={email}\n          disabled={isDisabled}\n          onChange={e => onEmailChange(e.target.value)}\n        />\n        <Button isPrimary isBlock type=\"submit\" disabled={isDisabled}>\n          Reset Password\n        </Button>\n        <P>\n          <A className=\"testing_cancel\" onClick={onCancel}>\n            Cancel\n          </A>\n        </P>\n      </React.Fragment>\n    )}\n  </form>\n);\n\nResetPasswordForm.propTypes = {\n  /**\n   * The value for the email field.\n   */\n  email: PropTypes.string,\n  /**\n   * A message to display as an error.\n   * @type {String}\n   */\n  errorMessage: PropTypes.string,\n  /**\n   * A unique identifier needed to differentiate instances of this componnet.\n   */\n  id: PropTypes.string.isRequired,\n  /**\n   * Indicates if the form is disabled.\n   */\n  isDisabled: PropTypes.bool,\n  /**\n   * A function called when the user clicks on the cancel button.\n   */\n  onCancel: PropTypes.func.isRequired,\n  /**\n   * A function called when the email changes. Is called with the new email as the first paramater.\n   * @type {[type]}\n   */\n  onEmailChange: PropTypes.func.isRequired,\n  /**\n   * A function called when the form is submitted.\n   */\n  onSubmit: PropTypes.func.isRequired,\n  /**\n   * A function called when the username changes. Is called with the new username as the first parameter.\n   */\n  onUsernameChange: PropTypes.func.isRequired,\n  /**\n   * Indicates if the pasword reset request has been sent successfully.\n   */\n  showSuccessMessage: PropTypes.bool,\n  /**\n   * The value for the username field.\n   */\n  username: PropTypes.string\n};\n\nexport default ResetPasswordForm;\n","import React from \"react\";\nimport ResetPasswordForm from \"../components/ResetPasswordForm\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { RESET_PASSWORD } from \"../redux/actions\";\n\nexport class ResetPasswordFormContainer extends React.Component {\n  static propTypes = {\n    /**\n     * A unique identifier needed to differentiate instances of this componnet.\n     */\n    id: PropTypes.string.isRequired,\n    /**\n     * A function called when the user clicks on the cancel button.\n     */\n    onCancel: PropTypes.func.isRequired,\n    /**\n     * A function called when the form is submitted.\n     * Provided by redux.\n     */\n    onSubmit: PropTypes.func.isRequired\n  };\n  state = {\n    /**\n     * The user entered email address. Used on the registration and reset password forms.\n     * @type {String}\n     */\n    email: \"\",\n    /**\n     * Is the register request pending?\n     * @type {Boolean}\n     */\n    pendingRequest: false,\n    /**\n     * An error message to display when reset password fails.\n     * @type {String}\n     */\n    errorMessage: null,\n    /**\n     * Indicates that a reset password request has been sent. Should be set to true after submission\n     * of the reset password form, that way we can display a success message to the user.\n     * @type {Boolean}\n     */\n    resetPasswordSent: false,\n    /**\n     * The user entered username. Used on the registration, log in, and reset password forms.\n     * @type {String}\n     */\n    username: \"\"\n  };\n\n  /**\n   * Handles changes to the email field by storing it in state\n   * @param  {String} email The new email address\n   */\n  handleEmailChange = email => {\n    this.setState({\n      email,\n      errorMessage: null\n    });\n  };\n\n  /**\n   * Handles changes to the username field by storing it in state\n   * @param  {String} username The new username\n   */\n  handleUsernameChange = username => {\n    this.setState({\n      username,\n      errorMessage: null\n    });\n  };\n\n  /**\n   * Handles the password reset form submission.\n   */\n  handleSubmit = () => {\n    this.setState({\n      pendingRequest: true\n    });\n    return this.props\n      .onSubmit(this.state.username, this.state.email)\n      .then(() => {\n        this.setState({\n          pendingRequest: false,\n          resetPasswordSent: true\n        });\n      })\n      .catch(error => {\n        this.setState({\n          pendingRequest: false,\n          errorMessage: error\n        });\n      });\n  };\n\n  render() {\n    return (\n      <ResetPasswordForm\n        email={this.state.email}\n        errorMessage={this.state.errorMessage}\n        id={this.props.id}\n        isDisabled={this.state.pendingRequest}\n        onCancel={this.props.onCancel}\n        onEmailChange={this.handleEmailChange}\n        onSubmit={this.handleSubmit}\n        onUsernameChange={this.handleUsernameChange}\n        showSuccessMessage={this.state.resetPasswordSent}\n        username={this.state.username}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = () => ({});\n\nconst mapDispatchToProps = {\n  onSubmit: RESET_PASSWORD\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ResetPasswordFormContainer);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport LogInFormContainer from \"../containers/LogInFormContainer\";\nimport RegisterFormContainer from \"../containers/RegisterFormContainer\";\nimport ResetPasswordFormContainer from \"../containers/ResetPasswordFormContainer\";\n\n/**\n * Styles for the account form.\n */\nexport const StyleWrapper = styled.div`\n  width: 100%;\n  max-width: 300px;\n  background: ${({ theme }) => theme.colors.white};\n  border-radius: 8px;\n  padding: 16px;\n`;\n\n/**\n * AccountForm combines the Login, Register, and Reset Password forms into one unit.\n */\nclass AccountForm extends React.Component {\n  static propTypes = {\n    /**\n     * An ID to be applied to the form and to form fields to uniquely identify them since this\n     * component may be used more than once.\n     */\n    id: PropTypes.string.isRequired,\n    /**\n     * Indicates if the user is recognized as someone who has a KitePaint account. Will show the\n     * log in form if this is true, or the register form if this is false.\n     */\n    isRecognizedUser: PropTypes.bool.isRequired,\n    /**\n     * A function called when the user indicates that they do, or do not have a KitePaint account.\n     */\n    onToggleRecognition: PropTypes.func.isRequired,\n    /** A function called when the use successfully logs in */\n    onLogin: PropTypes.func,\n    className: PropTypes.string\n  };\n  static defaultProps = {\n    onLogin: () => {}\n  };\n\n  state = {\n    /**\n     * Indicates if we should be showing the reset password form.\n     * @type {Boolean}\n     */\n    showResetPassword: false\n  };\n\n  /**\n   * Toggles the showResetPassword state and clears out the password fields to switch between the\n   * reset password form and the log in form.\n   */\n  handleResetPasswordToggle = () => {\n    const { showResetPassword } = this.state;\n    this.setState({\n      showResetPassword: !showResetPassword\n    });\n  };\n\n  render() {\n    const { id, isRecognizedUser } = this.props;\n\n    // If we don't recognize the user, show the registration form\n    if (!isRecognizedUser) {\n      return (\n        <StyleWrapper className={this.props.className}>\n          <RegisterFormContainer\n            id={id}\n            onLogIn={this.props.onToggleRecognition}\n          />\n        </StyleWrapper>\n      );\n    }\n\n    // Show the reset password form\n    if (this.state.showResetPassword) {\n      return (\n        <StyleWrapper className={this.props.className}>\n          <ResetPasswordFormContainer\n            id={id}\n            onCancel={this.handleResetPasswordToggle}\n            onSubmit={this.handlePasswordReset}\n            onUsernameChange={this.handleUsernameChange}\n            showSuccessMessage={this.state.resetPasswordSent}\n            username={this.state.username}\n          />\n        </StyleWrapper>\n      );\n    }\n\n    // If all else is false, show the login form\n    return (\n      <StyleWrapper className={this.props.className}>\n        <LogInFormContainer\n          id={id}\n          onLogin={this.props.onLogin}\n          onRegister={this.props.onToggleRecognition}\n          onResetPassword={this.handleResetPasswordToggle}\n        />\n      </StyleWrapper>\n    );\n  }\n}\n\nexport default AccountForm;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport bgRev from \"./bg-rev.jpg\";\nimport { H3, Button } from \"../../theme\";\n\n/**\n * Styles for the CTABanner\n */\nexport const StyleWrapper = styled.div`\n  height: 408px;\n  width: 100%;\n  background: url(${bgRev}) no-repeat center;\n  background-size: cover;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .cta-wrapper {\n    background: rgba(0, 0, 0, 0.5);\n    width: 400px;\n    text-align: center;\n    padding: 16px;\n    border-radius: 8px;\n  }\n`;\n\n/**\n * Displays a banner with a Call To Action.\n */\nconst CTABanner = () => (\n  <StyleWrapper>\n    <div className=\"cta-wrapper\">\n      <H3 isLight>Get started new by creating a new kite design!</H3>\n      <Button isPrimary isBlock as={Link} to=\"/create\">\n        Get Started\n      </Button>\n    </div>\n  </StyleWrapper>\n);\nexport default CTABanner;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport UserContainer from \"../../containers/UserContainer\";\nimport RecentDesignsContainer from \"../../containers/RecentDesignsContainer\";\nimport { H2, Loading, Spacer, Button } from \"../../theme\";\nimport AccountForm from \"../AccountForm\";\nimport CTABanner from \"./CTABanner\";\nimport AccountBanner from \"./AccountBanner\";\nimport RecentDesigns from \"../RecentDesigns\";\n\n/**\n * A coordinating component for the Home page.\n */\nconst Home = () => (\n  <React.Fragment>\n    <CTABanner />\n    {/* <UserContainer>\n      {userData =>\n        !userData.props.isLoggedIn && (\n          <AccountBanner isRecognizedUser={userData.props.isRecognizedUser}>\n            <AccountForm\n              onToggleRecognition={userData.actions.toggleRecognition}\n              id=\"account-banner-login\"\n              isRecognizedUser={userData.props.isRecognizedUser}\n            />\n          </AccountBanner>\n        )\n      }\n    </UserContainer> */}\n    {/* <RecentDesignsContainer>\n      {designsData =>\n        designsData.props.isLoading ? (\n          <Spacer top=\"xl\" bottom=\"xl\">\n            <Loading />\n          </Spacer>\n        ) : (\n          <React.Fragment>\n            <Spacer top=\"sm\" left=\"sm\">\n              <H2>Recent Designs</H2>\n            </Spacer>\n            <RecentDesigns\n              designs={designsData.props.designs}\n              products={designsData.props.products}\n              manufacturers={designsData.props.manufacturers}\n              cta={\n                <Button isBlock as={Link} to=\"/designs\">\n                  See All Designs\n                </Button>\n              }\n            />\n          </React.Fragment>\n        )\n      }\n    </RecentDesignsContainer> */}\n  </React.Fragment>\n);\n\nexport default Home;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport { H2, P } from \"../../theme\";\n\nexport const StyleWrapper = styled.div`\n  background: ${({ theme }) => theme.colors.silver};\n  padding: 16px 24px;\n  display: flex;\n  justify-content: center;\n\n  .message {\n    padding: 16px;\n    display: none;\n  }\n\n  ${props => props.theme.media.mediaSm} {\n    .message {\n      display: block;\n    }\n  }\n`;\n\n/**\n * Displays a banner with login or account information.\n */\nconst AccountBanner = ({ isRecognizedUser, children }) => {\n  const recognizedUserContent = (\n    <div className=\"message\">\n      <H2>Welcome Back!</H2>\n      <P>Sign in to get back to your saved designs.</P>\n    </div>\n  );\n  const unrecognizedUserContent = (\n    <div className=\"message\">\n      <H2>Create an Account</H2>\n      <P>By creating a free account, you get access to features such as:</P>\n      <ul>\n        <li>\n          <P>Save your designs and modify them later</P>\n        </li>\n        <li>\n          <P>Control the visibility of your designs</P>\n        </li>\n        <li>\n          <P>More features to come!</P>\n        </li>\n      </ul>\n    </div>\n  );\n  return (\n    <StyleWrapper>\n      {children}\n      {isRecognizedUser ? recognizedUserContent : unrecognizedUserContent}\n    </StyleWrapper>\n  );\n};\n\nAccountBanner.propTypes = {\n  /**\n   * Indicates if the user is known to have a KitePaint account or not.\n   */\n  isRecognizedUser: PropTypes.bool,\n  /**\n   * Children nodes to be displayed to the left of the message.\n   */\n  children: PropTypes.node.isRequired\n};\n\nexport default AccountBanner;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport UserContainer from \"../../containers/UserContainer\";\nimport { getQueryParams, redirect } from \"../../utils\";\nimport AccountForm from \"../AccountForm\";\n\nexport const StyleWrapper = styled.div`\n  box-sizing: border-box;\n  min-height: calc(100vh - 85px);\n  ${props => props.theme.patterns.transparencyBackground};\n  padding-top: 10%;\n\n  .account-form {\n    margin: 0 auto;\n  }\n`;\n\nclass Login extends React.Component {\n  constructor(props, ...rest) {\n    super(props, ...rest);\n    const redirectUrl = getQueryParams().url;\n    this.state = {\n      redirectUrl\n    };\n  }\n\n  // After a successful login, either redirect to the url provided in the query\n  // params, or redirect to the home page.\n  redirectAfterLogin = () => {\n    if (this.state.redirectUrl) {\n      redirect(this.state.redirectUrl);\n      return;\n    }\n    redirect(window.location.origin);\n  };\n\n  render() {\n    return (\n      <StyleWrapper>\n        <UserContainer>\n          {userData => (\n            <AccountForm\n              className=\"account-form\"\n              onLogin={this.redirectAfterLogin}\n              onToggleRecognition={userData.actions.toggleRecognition}\n              id=\"account-banner-login\"\n              isRecognizedUser={userData.props.isRecognizedUser}\n            />\n          )}\n        </UserContainer>\n      </StyleWrapper>\n    );\n  }\n}\n\nexport default Login;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { getUser } from \"../redux/modules/user\";\nimport { getDesignsByUser } from \"../redux/modules/designs\";\nimport { getProductsWithIndex } from \"../redux/modules/products\";\nimport { getManufacturersWithIndex } from \"../redux/modules/manufacturers\";\nimport {\n  GET_DESIGNS,\n  GET_PRODUCTS,\n  GET_MANUFACTURERS,\n  DELETE_DESIGN\n} from \"../redux/actions\";\nimport Design from \"../models/Design\";\nimport Product from \"../models/Product\";\nimport Manufacturer from \"../models/Manufacturer\";\nimport { makeCancelable } from \"../utils\";\n\n/**\n * Provides access to designs created by the current user.\n */\nexport class MyDesignsContainer extends React.Component {\n  static propTypes = {\n    /**\n     * A function that is called when the user requests to delete a design.\n     */\n    onDeleteDesign: PropTypes.func.isRequired,\n    /**\n     * A function that triggers the retieval of the user's designs. Provided by Redux.\n     */\n    onFetchDesigns: PropTypes.func.isRequired,\n    /**\n     * A function that triggers the retrieval of products. Provided by Redux.\n     */\n    onFetchProducts: PropTypes.func.isRequired,\n    /**\n     * A function that triggers the retireval of manufacturers. Provided by Redux.\n     */\n    onFetchManufacturers: PropTypes.func.isRequired,\n    /**\n     * The designs created by the current user. Provided by Redux.\n     */\n    designs: PropTypes.arrayOf(PropTypes.instanceOf(Design)).isRequired,\n    /**\n     * All of the products, indexed by ID. Provided by Redux.\n     */\n    products: PropTypes.objectOf(PropTypes.instanceOf(Product)).isRequired,\n    /**\n     * All the manufacturers, indexed by ID. Provided by Redux.\n     */\n    manufacturers: PropTypes.objectOf(PropTypes.instanceOf(Manufacturer))\n      .isRequired,\n    /**\n     * The current user. Provided by Redux.\n     */\n    user: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    }),\n    /**\n     * A function that renders content.\n     */\n    children: PropTypes.func.isRequired\n  };\n\n  state = {\n    isLoading: true\n  };\n\n  componentDidMount() {\n    const designRequest = makeCancelable(\n      this.props.onFetchDesigns({\n        userId: this.props.user.id,\n        limit: null,\n        publicOnly: false\n      })\n    );\n    const productRequest = makeCancelable(this.props.onFetchProducts());\n    const manufacturerRequest = makeCancelable(\n      this.props.onFetchManufacturers()\n    );\n    this.cancelablePromises.push(designRequest);\n    this.cancelablePromises.push(productRequest);\n    this.cancelablePromises.push(manufacturerRequest);\n\n    Promise.all([\n      designRequest.promise,\n      productRequest.promise,\n      manufacturerRequest.promise\n    ])\n      .then(() => {\n        this.setState({\n          isLoading: false\n        });\n      })\n      .catch(() => {\n        this.setState({\n          isLoading: false\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    this.cancelablePromises.forEach(cancelable => cancelable.cancel());\n  }\n\n  cancelablePromises = [];\n\n  render() {\n    return this.props.children({\n      actions: {\n        deleteDesign: this.props.onDeleteDesign\n      },\n      props: {\n        isLoading: this.state.isLoading,\n        designs: this.props.designs,\n        products: this.props.products,\n        manufacturers: this.props.manufacturers\n      }\n    });\n  }\n}\n\nconst mapStateToProps = (state, props) => ({\n  designs: getDesignsByUser(state, props.user && props.user.id),\n  products: getProductsWithIndex(state),\n  manufacturers: getManufacturersWithIndex(state)\n});\n\nconst mapDispatchToProps = {\n  onDeleteDesign: DELETE_DESIGN,\n  onFetchDesigns: GET_DESIGNS,\n  onFetchProducts: GET_PRODUCTS,\n  onFetchManufacturers: GET_MANUFACTURERS\n};\n\n// We need the user prop to be provided in order to get the designs, so wrap the container once\n// to get the designs, and again to get the user.\nconst withoutUser = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyDesignsContainer);\n\nexport default connect(state => ({\n  user: getUser(state)\n}))(withoutUser);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport Status from \"../../models/Status\";\nimport Design from \"../../models/Design\";\nimport Product from \"../../models/Product\";\nimport Manufacturer from \"../../models/Manufacturer\";\nimport DesignSettingsModalContainer from \"../../containers/DesignSettingsModalContainer\";\nimport { H2, P, Button, Icon, Tile, ModalConfirm, Error } from \"../../theme\";\nimport ShareModal from \"../ShareModal\";\nimport Svg from \"../Svg\";\n\nexport const StyleWrapper = styled(Tile)`\n  > div {\n    padding: 8px;\n  }\n\n  .previews {\n    ${props => props.theme.patterns.transparencyBackground};\n    display: flex;\n    padding: 8px 0;\n\n    > div {\n      width: 200px;\n      padding: 0 8px;\n    }\n  }\n`;\n\n/**\n * Provides a UI for managing a user's design.\n */\nconst DesignManager = ({ design, product, manufacturer, onDelete }) => (\n  <StyleWrapper>\n    <div>\n      <H2>{design.get(\"name\")}</H2>\n      {product && (\n        <P>\n          <strong className=\"testing_product-info\">\n            {product.get(\"name\")}\n            {manufacturer && ` by ${manufacturer.get(\"name\")}`}\n          </strong>\n        </P>\n      )}\n    </div>\n    <div className=\"previews\">\n      {design.get(\"variations\").map(variation => (\n        <Svg key={variation.id} svg={variation.svg} />\n      ))}\n    </div>\n    <div>\n      <P>\n        Created: {design.get(\"created\")} | Last Modified:{\" \"}\n        {design.get(\"updated\")} | Visiblity:{\" \"}\n        {Status[design.get(\"currentStatus\")]}\n      </P>\n      {!design.get(\"isPrivateProduct\") && (\n        <Button\n          className=\"testing_view\"\n          as={Link}\n          to={`view/${design.get(\"id\")}`}\n        >\n          <Icon icon=\"eye\" /> View\n        </Button>\n      )}{\" \"}\n      {!design.get(\"isPrivateProduct\") && (\n        <Button as={Link} to={`edit/${design.get(\"id\")}`}>\n          <Icon icon=\"edit\" /> Edit\n        </Button>\n      )}{\" \"}\n      <ShareModal design={design}>\n        {modal => (\n          <Button onClick={modal.actions.open}>\n            <Icon icon=\"share\" /> Share\n          </Button>\n        )}\n      </ShareModal>{\" \"}\n      <ModalConfirm\n        onConfirm={() => onDelete()}\n        confirmText=\"Yes\"\n        cancelText=\"No\"\n        message={`Are you sure you want to delete ${design.get(\n          \"name\"\n        )}? This cannot be undone.`}\n      >\n        {modal => (\n          <Button onClick={modal.actions.open}>\n            <Icon icon=\"trash\" /> Delete\n          </Button>\n        )}\n      </ModalConfirm>{\" \"}\n      <DesignSettingsModalContainer design={design}>\n        {modal => (\n          <Button onClick={modal.actions.open}>\n            <Icon icon=\"cog\" /> Settings\n          </Button>\n        )}\n      </DesignSettingsModalContainer>\n      {design.get(\"isPrivateProduct\") && (\n        <Error>\n          <P>This product is no longer available.</P>\n        </Error>\n      )}\n    </div>\n  </StyleWrapper>\n);\n\nDesignManager.propTypes = {\n  design: PropTypes.instanceOf(Design),\n  onDelete: PropTypes.func.isRequired,\n  product: PropTypes.instanceOf(Product),\n  manufacturer: PropTypes.instanceOf(Manufacturer)\n};\nexport default DesignManager;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport MyDesignsContainer from \"../../containers/MyDesignsContainer\";\nimport { H1, Spacer, PageLoader, P } from \"../../theme\";\nimport DesignManager from \"./DesignManager\";\n\nconst StyleWrapper = styled.div`\n  padding: 8px 16px;\n  margin: 0 auto;\n  max-width: 1280px;\n`;\n\n/**\n * A coordinating component for the My Designs page.\n * The page is intended to allow users to see and manage their designs\n */\nconst MyDesigns = () => (\n  <StyleWrapper>\n    <H1>My Designs</H1>\n    <Spacer bottom=\"md\" />\n    <MyDesignsContainer>\n      {userDesigns =>\n        userDesigns.props.isLoading ? (\n          <PageLoader />\n        ) : (\n          <React.Fragment>\n            {userDesigns.props.designs.map(design => {\n              const product = userDesigns.props.products[design.get(\"product\")];\n              const manufacturer = product\n                ? userDesigns.props.manufacturers[product.get(\"manufacturer\")]\n                : null;\n              return (\n                <Spacer key={design.get(\"id\")} bottom=\"md\">\n                  <DesignManager\n                    onDelete={() =>\n                      userDesigns.actions.deleteDesign(design.get(\"id\"))\n                    }\n                    design={design}\n                    product={product}\n                    manufacturer={manufacturer}\n                  />\n                </Spacer>\n              );\n            })}\n            {!userDesigns.props.designs.length && (\n              <Spacer top=\"lg\" bottom=\"lg\">\n                <P>\n                  You have not saved any designs yet. Go to the{\" \"}\n                  <Link to=\"/create\">Create</Link> page to start creating a new\n                  design.\n                </P>\n              </Spacer>\n            )}\n          </React.Fragment>\n        )\n      }\n    </MyDesignsContainer>\n  </StyleWrapper>\n);\n\nexport default MyDesigns;\n","import { handleActions } from \"redux-actions\";\nimport { fromJS } from \"immutable\";\nimport { GET_USER } from \"../actions\";\n\nexport const defaultState = fromJS({});\n\n/**\n * The reducer managing retrieved users.\n */\nexport default handleActions(\n  {\n    [GET_USER.RECEIVED]: (state, action) => {\n      const { data } = action.payload;\n      if (!data || !data.get) {\n        return state;\n      }\n      return state.merge({\n        [data.get(\"loginid\")]: data\n      });\n    }\n  },\n  defaultState\n);\n\n/**\n * Get user by idea\n * @param  {Map} state\n * @param  {String} id\n * @return {Object}\n */\nexport const getUserById = (state, id) => {\n  const user = state.getIn([\"users\", id]);\n  return user ? user : null;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { getDesignById } from \"../redux/modules/designs\";\nimport { getProductById } from \"../redux/modules/products\";\nimport { getManufacturerByProductId } from \"../redux/modules/manufacturers\";\nimport { getUserById } from \"../redux/modules/users\";\nimport {\n  GET_DESIGN,\n  GET_PRODUCTS,\n  GET_MANUFACTURERS,\n  GET_USER\n} from \"../redux/actions\";\nimport Design from \"../models/Design\";\nimport Product from \"../models/Product\";\nimport Manufacturer from \"../models/Manufacturer\";\nimport User from \"../models/User\";\nimport { isEmbedded, defaultBackground } from \"../constants/embed\";\nimport ErrorPage from \"../components/ErrorPage\";\nimport { softCompareStrings, makeCancelable, embedAllowed } from \"../utils\";\nimport { generateAppliedColors } from \"./EditorContainer\";\n\n/**\n * A container that provides data management for the View page.\n */\nexport class ViewContainer extends React.Component {\n  static propTypes = {\n    /**\n     * A function that triggers the retrieval of a specific design. Provided by Redux.\n     */\n    onFetchDesign: PropTypes.func.isRequired,\n    /**\n     * A function that triggers the retrieval of products. Provided by Redux.\n     */\n    onFetchProducts: PropTypes.func.isRequired,\n    /**\n     * A function that triggers the retrieval of manufacturers. Provided by Redux.\n     */\n    onFetchManufacturers: PropTypes.func.isRequired,\n    /**\n     * A function that triggers the retrieval of a specific user. Provided by Redux.\n     */\n    onFetchUser: PropTypes.func.isRequired,\n    /**\n     * The design being viewed. Provided by Redux.\n     */\n    design: PropTypes.instanceOf(Design),\n    /**\n     * The ID of the design that is being viewed.\n     */\n    designId: PropTypes.string.isRequired,\n    /**\n     * The product related to the design. Provided by Redux.\n     */\n    product: PropTypes.instanceOf(Product),\n    /**\n     * The manufacturer related to the design. Provided by Redux.\n     */\n    manufacturer: PropTypes.instanceOf(Manufacturer),\n    /**\n     * The user that created the design. Provided by Redux.\n     */\n    user: PropTypes.instanceOf(User),\n    /**\n     * A function that renders content.\n     */\n    children: PropTypes.func.isRequired\n  };\n\n  state = {\n    isLoading: true,\n    usedColors: {},\n    currentVariation: null,\n    background: defaultBackground || null,\n    hideOutlines: false\n  };\n\n  static getDerivedStateFromProps(props, state) {\n    const variations = props.design && props.design.get(\"variations\");\n    const productColors = props.product && props.product.get(\"colors\");\n    if (!variations || !productColors) {\n      return {};\n    }\n\n    const newState = {};\n\n    // Set the current variation if not set already\n    if (!state.currentVariation) {\n      newState.currentVariation = variations.find(\n        variation => variation.primary\n      );\n    }\n\n    // Set the appied colors if not already set\n    if (!state.appliedColors) {\n      newState.appliedColors = generateAppliedColors(\n        props.design,\n        props.product\n      );\n    }\n\n    // Loop through the variations to grab the colors used in each\n    newState.usedColors = variations.reduce((accumulated, variation) => {\n      const svg = variation.svg;\n      const fillRegex = /\\sfill=\".{4,7}\"/g;\n      const matches = svg.match(fillRegex) || [];\n\n      // Loop through the found colors and match them to the product colors, if possible, with no\n      // duplicates\n      const colors = matches.reduce((accumulatedColors, match) => {\n        const colorValue = match.split('\"')[1];\n        const alreadyFound = accumulatedColors.find(color =>\n          softCompareStrings(color.color, colorValue)\n        );\n        if (alreadyFound) {\n          return accumulatedColors;\n        }\n\n        const color = productColors.find(color =>\n          softCompareStrings(color.color, colorValue)\n        );\n        if (color) {\n          accumulatedColors.push(color);\n          return accumulatedColors;\n        }\n\n        accumulatedColors.push({\n          name: \"\",\n          color: colorValue\n        });\n        return accumulatedColors;\n      }, []);\n      accumulated[variation.id] = colors;\n      return accumulated;\n    }, {});\n\n    return newState;\n  }\n\n  componentDidMount() {\n    const productPromise = this.props.onFetchProducts();\n    const manufacturerPromise = this.props.onFetchManufacturers();\n    const promises = [productPromise, manufacturerPromise];\n    let designPromise = Promise.resolve({\n      data: this.props.design\n    });\n    if (!this.props.design) {\n      designPromise = this.props.onFetchDesign(this.props.designId);\n    }\n    promises.push(designPromise);\n    const request = makeCancelable(Promise.all(promises));\n    this.cancelablePromises.push(request);\n    request.promise\n      .then(responses => {\n        const userId = responses[2].data.get(\"user\");\n        return this.props.onFetchUser(userId);\n      })\n      .then(() => {\n        this.setState({\n          isLoading: false\n        });\n      })\n      .catch(() => {\n        this.setState({\n          isLoading: false\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    this.cancelablePromises.forEach(cancelable => cancelable.cancel());\n  }\n\n  cancelablePromises = [];\n\n  /**\n   * Gets the applied colors for the current variation\n   */\n  getCurrentVariationColors = () => {\n    if (!this.state.currentVariation) {\n      return {};\n    }\n    const currentVariationId = this.state.currentVariation.id;\n    return this.state.appliedColors[currentVariationId] || {};\n  };\n\n  /**\n   * Handles when a different variation is selected by updating state.\n   * @param  {String} variationId The id of the newly selected variation\n   */\n  handleVariationSelection = variationId => {\n    const currentVariation = this.props.design\n      .get(\"variations\")\n      .find(variation => variation.id === variationId);\n    this.setState({\n      currentVariation\n    });\n  };\n\n  handleBackgroundChange = value => this.setState({ background: value });\n\n  handleToggleHideOutlines = () =>\n    this.setState({ hideOutlines: !this.state.hideOutlines });\n\n  render() {\n    if (\n      isEmbedded &&\n      this.props.product &&\n      !embedAllowed(this.props.product.get(\"embed\").split(\",\"))\n    ) {\n      return (\n        <ErrorPage\n          errorCode={401}\n          errorMessage=\"Embedding of this page is not permitted.\"\n        />\n      );\n    }\n    return this.props.children({\n      actions: {\n        changeBackground: this.handleBackgroundChange,\n        selectVariation: this.handleVariationSelection,\n        toggleHideOutlines: this.handleToggleHideOutlines\n      },\n      props: {\n        currentVariationColors: this.getCurrentVariationColors(),\n        background: this.state.background,\n        hideOutlines: this.state.hideOutlines,\n        currentVariation: this.state.currentVariation,\n        isLoading: this.state.isLoading,\n        design: this.props.design,\n        manufacturer: this.props.manufacturer,\n        product: this.props.product,\n        usedColors: this.state.usedColors,\n        user: this.props.user\n      }\n    });\n  }\n}\n\nconst mapStateToProps = (state, props) => ({\n  product: getProductById(state, props.design && props.design.get(\"product\")),\n  manufacturer: getManufacturerByProductId(\n    state,\n    props.design && props.design.get(\"product\")\n  ),\n  user: getUserById(state, props.design && props.design.get(\"user\"))\n});\n\nconst mapDispatchToProps = {\n  onFetchDesign: GET_DESIGN,\n  onFetchProducts: GET_PRODUCTS,\n  onFetchManufacturers: GET_MANUFACTURERS,\n  onFetchUser: GET_USER\n};\n\nconst withoutDesign = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ViewContainer);\n\nexport default connect((state, props) => ({\n  design: getDesignById(state, props.designId)\n}))(withoutDesign);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport Manufacturer from \"../../models/Manufacturer\";\nimport Product from \"../../models/Product\";\nimport Design from \"../../models/Design\";\nimport User from \"../../models/User\";\nimport ColorTile from \"../editor/ColorTile\";\nimport { Icon, FillToBottom, Sidebar as SidebarUI } from \"../../theme\";\nimport { getAssetUrl } from \"../../utils\";\nimport ManufacturerLogo from \"../ManufacturerLogo\";\nimport Svg from \"../Svg\";\n\n/**\n * A styled preview of a variation's svg\n */\nconst VariationPreview = styled.div`\n  display: block;\n  width: 24px;\n  height: 24px;\n\n  svg {\n    margin-top: 50%;\n    transform: translateY(-50%);\n  }\n`;\n\nexport const StyledSidebar = styled(SidebarUI)`\n  width: 60px;\n\n  .color-tile,\n  .manufacturer-logo,\n  .variation-preview {\n    margin: 0 auto;\n  }\n\n  .color-label,\n  .variation-label,\n  .colors-heading,\n  .manufacturer-info,\n  .design-heading {\n    display: none;\n  }\n\n  ${props => props.theme.media.mediaMd} {\n    width: 175px;\n    .color-label,\n    .variation-label {\n      display: inline;\n    }\n    .colors-heading,\n    .manufacturer-info,\n    .design-heading {\n      display: block;\n    }\n    .color-tile,\n    .manufacturer-logo,\n    .variation-preview {\n      margin: 0;\n    }\n  }\n`;\n\n/**\n * The sidebar displayed when editing/creating a new design\n */\nconst Sidebar = ({\n  manufacturer,\n  product,\n  design,\n  selectedVariation,\n  onVariationSelect,\n  user,\n  usedColors\n}) => (\n  <StyledSidebar>\n    {sidebar => (\n      <React.Fragment>\n        {product &&\n          manufacturer && (\n            <sidebar.components.Item\n              isLight\n              as={\n                product.get(\"url\") || manufacturer.get(\"website\") ? \"a\" : \"div\"\n              }\n              href={product.get(\"url\") || manufacturer.get(\"website\")}\n              target=\"_blank\"\n              hasAction={!!(product.get(\"url\") || manufacturer.get(\"website\"))}\n            >\n              <ManufacturerLogo\n                className=\"manufacturer-logo\"\n                size={32}\n                noMargin\n                src={getAssetUrl(`/logos/${manufacturer.get(\"logo\")}`)}\n              />\n              <div className=\"testing_manufacturer manufacturer-info\">\n                {product.get(\"name\")} <br />\n                <small>by {manufacturer.get(\"name\")}</small>\n              </div>\n            </sidebar.components.Item>\n          )}\n        <sidebar.components.Heading\n          className=\"testing_design design-heading\"\n          isLight\n        >\n          {design.get(\"name\")}{\" \"}\n          {user && (\n            <React.Fragment>\n              <br />\n              designed by {user.get(\"username\")}\n            </React.Fragment>\n          )}\n        </sidebar.components.Heading>\n        {design.get(\"variations\").map(variation => (\n          <sidebar.components.Item\n            className=\"testing_variation\"\n            isLight\n            hasAction\n            isActive={variation.id === selectedVariation}\n            key={variation.id}\n            onClick={() => onVariationSelect(variation.id)}\n          >\n            <VariationPreview className=\"variation-preview\">\n              <Svg svg={variation.svg} />\n            </VariationPreview>\n            <span className=\"variation-label\"> {variation.name}</span>\n          </sidebar.components.Item>\n        ))}\n        <sidebar.components.Heading isLight className=\"colors-heading\">\n          <Icon icon=\"palette\" /> Colors\n        </sidebar.components.Heading>\n        <FillToBottom offset={35}>\n          {usedColors[selectedVariation].map(color => (\n            <sidebar.components.Item isLight key={color.color}>\n              <ColorTile color={color.color} className=\"color-tile\" />\n              <span className=\"color-label\"> {color.name}</span>\n            </sidebar.components.Item>\n          ))}\n        </FillToBottom>\n      </React.Fragment>\n    )}\n  </StyledSidebar>\n);\n\nSidebar.propTypes = {\n  /**\n   * The manufacturer that creates the product being edited.\n   */\n  manufacturer: PropTypes.instanceOf(Manufacturer),\n  /**\n   * The produt that is being edited\n   */\n  product: PropTypes.instanceOf(Product),\n  /**\n   * The pre-existing design that is being edited, if any\n   */\n  design: PropTypes.instanceOf(Design).isRequired,\n  /**\n   * The user that created the design.\n   */\n  user: PropTypes.instanceOf(User),\n  /**\n   * The id of the variation that is currently selected\n   */\n  selectedVariation: PropTypes.string.isRequired,\n  /**\n   * The colors that are used in the current variation.\n   */\n  usedColors: PropTypes.objectOf(\n    PropTypes.arrayOf(\n      PropTypes.shape({\n        name: PropTypes.string,\n        color: PropTypes.string.isRequired\n      }).isRequired\n    ).isRequired\n  ).isRequired,\n  /**\n   * Called when a variation is selected.\n   * Is provided with the variation id as the first parameter.\n   */\n  onVariationSelect: PropTypes.func.isRequired\n};\n\nexport default Sidebar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport ViewContainer from \"../../containers/ViewContainer\";\nimport { PageLoader } from \"../../theme\";\nimport Toolbar from \"../editor/Toolbar\";\nimport Sidebar from \"./Sidebar\";\nimport Canvas from \"../editor/Canvas\";\nimport ErrorPage from \"../ErrorPage\";\n\nconst PageLayout = styled.div`\n  display: flex;\n  justify-content: stretch;\n  position: relative;\n`;\n\n/**\n * A coordinating component that builds the View page.\n */\nconst View = ({ match }) => (\n  <ViewContainer designId={match.params.designId}>\n    {viewData => {\n      if (viewData.props.isLoading) {\n        return <PageLoader />;\n      }\n      if (!viewData.props.design) {\n        return <ErrorPage />;\n      }\n      if (!viewData.props.product) {\n        return (\n          <ErrorPage errorMessage=\"This product is no longer available.\" />\n        );\n      }\n      return (\n        <React.Fragment>\n          <Toolbar\n            design={viewData.props.design}\n            hideOutlines={viewData.props.hideOutlines}\n            onHideOutlines={viewData.actions.toggleHideOutlines}\n            onBackgroundChange={viewData.actions.changeBackground}\n          />\n          <PageLayout>\n            <Sidebar\n              manufacturer={viewData.props.manufacturer}\n              product={viewData.props.product}\n              design={viewData.props.design}\n              selectedVariation={viewData.props.currentVariation.id}\n              usedColors={viewData.props.usedColors}\n              user={viewData.props.user}\n              onVariationSelect={viewData.actions.selectVariation}\n            />\n            <Canvas\n              hideOutlines={viewData.props.hideOutlines}\n              svg={viewData.props.currentVariation.svg}\n              isReadOnly\n              background={viewData.props.background}\n              colorMap={viewData.props.currentVariationColors}\n            />\n          </PageLayout>\n        </React.Fragment>\n      );\n    }}\n  </ViewContainer>\n);\n\nView.propTypes = {\n  /**\n   * Provided by react-router.\n   */\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      designId: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired\n};\n\nexport default View;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { isEmbedded } from \"../constants/embed\";\nimport { Alert } from \"../theme\";\nimport Header from \"./layout/Header\";\nimport Footer from \"./layout/Footer\";\nimport EmbeddedCss from \"./EmbeddedCss\";\nimport RestrictedRoute from \"./RestrictedRoute\";\nimport LegacyRedirect from \"./LegacyRedirect\";\nimport About from \"./about\";\nimport Account from \"./account\";\nimport Activate from \"./activate\";\nimport Create from \"./create\";\nimport CreateNew from \"./createNew\";\nimport Designs from \"./designs\";\nimport Edit from \"./edit\";\nimport ErrorPage from \"./ErrorPage\";\nimport Home from \"./home\";\nimport Login from \"./login\";\nimport MyDesigns from \"./my-designs\";\nimport View from \"./view\";\n\n/**\n * The entry for the app. The router will go here.\n */\nconst App = ({ _isEmbedded }) => (\n  <React.Fragment>\n    <EmbeddedCss />\n    {/* {!_isEmbedded && <Header />} */}\n    <LegacyRedirect />\n    <Switch>\n      <RestrictedRoute exact path=\"/\" component={Home} />\n      <RestrictedRoute exact path=\"/about\" component={About} />\n      <RestrictedRoute exact path=\"/account\" component={Account} />\n      <RestrictedRoute\n        exact\n        path=\"/activate/:userId/:activationCode\"\n        component={Activate}\n      />\n      <RestrictedRoute exact path=\"/create\" component={Create} />\n      <Route exact path=\"/create/:productId\" component={CreateNew} />\n      <RestrictedRoute exact path=\"/designs\" component={Designs} />\n      <Route exact path=\"/edit/:designId\" component={Edit} />\n      <RestrictedRoute exact path=\"/login\" component={Login} />\n      <RestrictedRoute exact path=\"/my-designs\" component={MyDesigns} />\n      <Route exact path=\"/view/:designId\" component={View} />\n      <Route component={ErrorPage} />\n    </Switch>\n    <Footer />\n    <Alert />\n  </React.Fragment>\n);\n\nApp.defaultProps = {\n  _isEmbedded: isEmbedded\n};\n\nApp.propTypes = {\n  _isEmbedded: PropTypes.bool\n};\n\nexport default App;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ThemeProvider } from \"styled-components\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Theme from \"../theme\";\nimport { CHECK_LOGIN } from \"../redux/actions\";\nimport { getCheckingLogin } from \"../redux/modules/user\";\nimport { setupFontAwesome } from \"../theme/Icon\";\nimport { PageLoader } from \"../theme\";\nimport App from \"../components/App\";\n\nsetupFontAwesome();\n\nexport class AppContainer extends React.Component {\n  static propTypes = {\n    children: PropTypes.node,\n    // isCheckingLogin: () => false,\n    // onCheckLogin: PropTypes.func.isRequired\n  };\n\n  constructor(props, ...rest) {\n    super(props, ...rest);\n    // props.onCheckLogin();\n  }\n\n  render() {\n    // if (this.props.isCheckingLogin) {\n    //   return <PageLoader />;\n    // }\n    return (\n      <BrowserRouter>\n        <ThemeProvider theme={Theme}>\n          <App />\n        </ThemeProvider>\n      </BrowserRouter>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  // isCheckingLogin: getCheckingLogin(state)\n});\n\nconst mapDispatchToProps = {\n  // onCheckLogin: CHECK_LOGIN\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(AppContainer);\n","import { combineReducers } from \"redux-immutable\";\nimport UserReducer from \"./user\";\nimport UsersReducer from \"./users\";\nimport DesignsReducer from \"./designs\";\nimport ProductsReducer from \"./products\";\nimport ManufacturersReducer from \"./manufacturers\";\n\n/**\n * The global combined reducer\n */\nexport default combineReducers({\n  designs: DesignsReducer,\n  user: UserReducer,\n  users: UsersReducer,\n  products: ProductsReducer,\n  manufacturers: ManufacturersReducer\n});\n","import { createStore, compose, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport reducers from \"./modules\";\n\nconst composeEnahancers =\n  window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport default createStore(reducers, composeEnahancers(applyMiddleware(thunk)));\n","/* eslint-disable no-undef */\nexport default function polyfil() {\n  /**\n   * NodeList.prototype.forEach\n   * https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach\n   *\n   * Polyfill for Chrome v49.0.263.122 (latest available on WinXP)\n   */\n  if (window.NodeList && !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = Array.prototype.forEach;\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider as ReduxProvider } from \"react-redux\";\nimport \"normalize.css\";\nimport AppContainer from \"./containers/AppContainer\";\nimport polyfill from \"./utils/polyfill\";\nimport Store from \"./redux\";\nimport \"./index.css\";\n\npolyfill();\n\nReactDOM.render(\n  <ReduxProvider store={Store}>\n    <AppContainer />\n  </ReduxProvider>,\n  document.getElementById(\"root\")\n);\n","module.exports = __webpack_public_path__ + \"static/media/bg-rev.f5e486e3.jpg\";"],"sourceRoot":""}